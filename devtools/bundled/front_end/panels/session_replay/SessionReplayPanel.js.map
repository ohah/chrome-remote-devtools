{"version":3,"file":"SessionReplayPanel.js","sourceRoot":"","sources":["../../../../../../front_end/panels/session_replay/SessionReplayPanel.ts"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAChD,OAAO,KAAK,GAAG,MAAM,uBAAuB,CAAC;AAG7C,OAAO,EAAE,QAAQ,EAAsB,SAAS,EAAE,MAAM,gDAAgD,CAAC;AAEzG,IAAI,0BAA8C,CAAC;AAEnD,MAAM,OAAO,kBAAmB,SAAQ,EAAE,CAAC,KAAK,CAAC,KAAK;IACpD,YAAY,GAAc,EAAE,CAAC;IAC7B,UAAU,GAAqB,IAAI,CAAC;IACpC,OAAO,GAA2B,IAAI,CAAC;IACvC,SAAS,GAA4D,IAAI,CAAC;IAC1E,SAAS,GAAqC,IAAI,CAAC,CAAC,oCAAoC;IACxF,YAAY,GAAG,KAAK,CAAC,CAAC,qDAAqD;IAC3E,kBAAkB,GAAqB,IAAI,CAAC,CAAC,yDAAyD;IACtG,gBAAgB,GAAqB,IAAI,CAAC,CAAC,iCAAiC;IAC5E,YAAY,GAAqB,IAAI,CAAC,CAAC,sBAAsB;IAC7D,aAAa,GAAqB,IAAI,CAAC,CAAC,yBAAyB;IACjE,YAAY,GAAqB,IAAI,CAAC,CAAC,uBAAuB;IAC9D,UAAU,GAAG,KAAK,CAAC,CAAC,wBAAwB;IAC5C,YAAY,GAAG,CAAC,CAAC,CAAC,kCAAkC;IACpD,UAAU,GAAG,CAAC,CAAC,CAAC,+BAA+B;IAC/C,eAAe,GAAgB,IAAI,CAAC,CAAC,kCAAkC;IAEvE;QACE,KAAK,CAAC,gBAAgB,CAAC,CAAC;QACxB,OAAO,CAAC,GAAG,CAAC,sDAAsD,CAAC,CAAC;QACpE,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAEQ,QAAQ;QACf,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjB,OAAO,CAAC,GAAG,CAAC,yCAAyC,CAAC,CAAC;QAEvD,uEAAuE;QACvE,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAE7B,gEAAgE;QAChE,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAExB,wHAAwH;QACxH,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;gBAClB,OAAO,CAAC,GAAG,CAAC,sDAAsD,CAAC,CAAC;gBACpE,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC1B,CAAC;YACD,+FAA+F;YAC/F,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC/B,CAAC,EAAE,IAAI,CAAC,CAAC;IACX,CAAC;IAEO,gBAAgB;QACtB,OAAO,CAAC,GAAG,CAAC,+DAA+D,CAAC,CAAC;QAC7E,wEAAwE;QACxE,MAAM,MAAM,GAAG,GAAG,CAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC,iBAAiB,EAAE,CAAC;QAC9E,OAAO,CAAC,GAAG,CAAC,wCAAwC,EAAE,MAAM,CAAC,CAAC;QAC9D,IAAI,CAAC,MAAM,EAAE,CAAC;YACZ,OAAO,CAAC,GAAG,CAAC,iEAAiE,CAAC,CAAC;YAC/E,sDAAsD;YACtD,GAAG,CAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC,gBAAgB,qFAEzD,GAAG,EAAE;gBACH,OAAO,CAAC,GAAG,CAAC,4DAA4D,CAAC,CAAC;gBAC1E,MAAM,SAAS,GAAG,GAAG,CAAC,aAAa,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC,iBAAiB,EAAE,CAAC;gBACjF,IAAI,SAAS,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;oBAC/B,OAAO,CAAC,GAAG,CAAC,mDAAmD,EAAE,SAAS,CAAC,CAAC;oBAC5E,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC;oBACzB,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;gBACjC,CAAC;YACH,CAAC,EACD,IAAI,CACL,CAAC;YACF,OAAO;QACT,CAAC;QAED,OAAO,CAAC,GAAG,CAAC,mEAAmE,CAAC,CAAC;QACjF,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;IAC9B,CAAC;IAEO,cAAc,CAAC,MAAyB;QAC9C,qFAAqF;QACrF,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;QAC/B,IAAI,CAAC,MAAM,EAAE,CAAC;YACZ,OAAO,CAAC,IAAI,CAAC,qDAAqD,CAAC,CAAC;YACpE,OAAO;QACT,CAAC;QAED,MAAM,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;QACrC,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,OAAO,CAAC,IAAI,CAAC,wDAAwD,CAAC,CAAC;YACvE,OAAO;QACT,CAAC;QAED,OAAO,CAAC,GAAG,CAAC,kDAAkD,EAAE,MAAM,CAAC,CAAC;QAExE,sDAAsD;QACtD,MAAM,kBAAkB,GAAG,MAAM,CAAC,kBAAkB,EAAE,CAAC;QACvD,IAAI,kBAAkB,EAAE,CAAC;YACvB,kBAAkB,CAAC,aAAa,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;gBAC3C,OAAO,CAAC,GAAG,CAAC,0CAA0C,CAAC,CAAC;YAC1D,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAc,EAAE,EAAE;gBAC1B,OAAO,CAAC,KAAK,CAAC,sDAAsD,EAAE,KAAK,CAAC,CAAC;YAC/E,CAAC,CAAC,CAAC;QACL,CAAC;aAAM,CAAC;YACN,OAAO,CAAC,IAAI,CAAC,gFAAgF,CAAC,CAAC;QACjG,CAAC;QAED,IAAI,CAAC,SAAS,GAAG;YACf,OAAO,EAAE,CAA+C,KAA+C,EAAQ,EAAE;gBAC/G,6DAA6D;gBAC7D,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;oBACjC,OAAO,CAAC,GAAG,CAAC,iDAAiD,EAAE,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;gBAC7F,CAAC;gBAED,0FAA0F;gBAC1F,IAAI,KAAK,CAAC,MAAM,EAAE,QAAQ,CAAC,eAAe,CAAC,IAAI,KAAK,CAAC,MAAM,EAAE,WAAW,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC;oBAC/F,OAAO,CAAC,GAAG,CAAC,qEAAqE,EAAE,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;gBACjH,CAAC;gBAED,mFAAmF;gBACnF,IAAI,KAAK,CAAC,MAAM,KAAK,6BAA6B,EAAE,CAAC;oBACnD,MAAM,MAAM,GAAG,KAAK,CAAC,MAAmD,CAAC;oBACzE,OAAO,CAAC,GAAG,CAAC,qEAAqE,EAAE,MAAM,CAAC,CAAC;oBAC3F,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC;wBACjC,OAAO,CAAC,GAAG,CAAC,0CAA0C,EAAE,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;wBAC9E,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;wBACzC,OAAO,CAAC,GAAG,CAAC,sCAAsC,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;wBAC9E,KAAK,IAAI,CAAC,YAAY,EAAE,CAAC;oBAC3B,CAAC;yBAAM,CAAC;wBACN,OAAO,CAAC,IAAI,CAAC,uEAAuE,EAAE,MAAM,CAAC,CAAC;oBAChG,CAAC;gBACH,CAAC;YACH,CAAC;YACD,YAAY,EAAE,CAAC,OAAe,EAAQ,EAAE;gBACtC,OAAO,CAAC,GAAG,CAAC,iDAAiD,EAAE,OAAO,CAAC,CAAC;gBACxE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACxB,CAAC;SACF,CAAC;QAEF,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACnC,OAAO,CAAC,GAAG,CAAC,4CAA4C,CAAC,CAAC;QAC1D,OAAO,CAAC,GAAG,CAAC,0CAA0C,EAAE;YACtD,WAAW,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS;YAC7B,eAAe,EAAE,CAAC,CAAC,UAAU;YAC7B,QAAQ,EAAE,MAAM,CAAC,EAAE,EAAE;SACtB,CAAC,CAAC;IACL,CAAC;IAEO,MAAM;QACZ,2DAA2D;QAC3D,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAEzB,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAChD,SAAS,CAAC,SAAS,GAAG,sBAAsB,CAAC;QAE7C,qCAAqC;QACrC,MAAM,cAAc,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACrD,cAAc,CAAC,SAAS,GAAG,wBAAwB,CAAC;QACpD,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC;QACjC,SAAS,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC;QAEtC,2BAA2B;QAC3B,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;QAE/B,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QAE3C,6DAA6D;QAC7D,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAE7B,KAAK,IAAI,CAAC,YAAY,EAAE,CAAC;IAC3B,CAAC;IAEO,qBAAqB;QAC3B,0FAA0F;QAC1F,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;YACrB,OAAO;QACT,CAAC;QAED,MAAM,YAAY,GAAG,GAAS,EAAE;YAC9B,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;gBACrB,OAAO;YACT,CAAC;YAED,2DAA2D;YAC3D,MAAM,YAAY,GAAG,IAAI,CAAC,cAAc,CAAC;YACzC,MAAM,SAAS,GAAG,YAAY,CAAC,qBAAqB,EAAE,CAAC;YAEvD,yDAAyD;YACzD,MAAM,cAAc,GAAG,IAAI,CAAC,kBAAkB,EAAE,YAAY,IAAI,CAAC,CAAC;YAElE,4CAA4C;YAC5C,MAAM,eAAe,GAAG,SAAS,CAAC,MAAM,GAAG,cAAc,CAAC;YAE1D,4CAA4C;YAC5C,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,IAAI,CAAC;YACnE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,SAAS,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,eAAe,CAAC,IAAI,CAAC;QACxE,CAAC,CAAC;QAEF,+BAA+B;QAC/B,YAAY,EAAE,CAAC;QAEf,iCAAiC;QACjC,MAAM,cAAc,GAAG,IAAI,cAAc,CAAC,GAAG,EAAE;YAC7C,YAAY,EAAE,CAAC;QACjB,CAAC,CAAC,CAAC;QAEH,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAE5C,+CAA+C;QAC/C,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;IAClD,CAAC;IAEO,cAAc,CAAC,SAAsB;QAC3C,MAAM,iBAAiB,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACxD,iBAAiB,CAAC,SAAS,GAAG,yBAAyB,CAAC;QACxD,IAAI,CAAC,kBAAkB,GAAG,iBAAiB,CAAC;QAE5C,iCAAiC;QACjC,MAAM,eAAe,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QACzD,eAAe,CAAC,SAAS,GAAG,2BAA2B,CAAC;QACxD,eAAe,CAAC,YAAY,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;QACxD,eAAe,CAAC,SAAS,GAAG;;;;KAI3B,CAAC;QACF,eAAe,CAAC,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;QACxE,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;QACxC,iBAAiB,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;QAE/C,sBAAsB;QACtB,MAAM,iBAAiB,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACxD,iBAAiB,CAAC,SAAS,GAAG,mCAAmC,CAAC;QAClE,iBAAiB,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;QAChF,MAAM,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACnD,YAAY,CAAC,SAAS,GAAG,8BAA8B,CAAC;QACxD,iBAAiB,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;QAC5C,IAAI,CAAC,YAAY,GAAG,iBAAiB,CAAC;QACtC,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC;QAClC,iBAAiB,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;QAEjD,uBAAuB;QACvB,MAAM,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAClD,WAAW,CAAC,SAAS,GAAG,qBAAqB,CAAC;QAC9C,WAAW,CAAC,WAAW,GAAG,aAAa,CAAC;QACxC,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,iBAAiB,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;QAE3C,SAAS,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;IAC3C,CAAC;IAEO,eAAe;QACrB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;YACpB,OAAO;QACT,CAAC;QAED,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;YACpB,2BAA2B;YAC3B,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;YACvB,+FAA+F;QACjG,CAAC;aAAM,CAAC;YACN,yCAAyC;YACzC,0DAA0D;YAC1D,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;gBACzC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;gBACtB,IAAI,CAAC,cAAc,EAAE,CAAC;YACxB,CAAC;YACD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACvC,+FAA+F;QACjG,CAAC;IACH,CAAC;IAEO,qBAAqB,CAAC,SAAkB;QAC9C,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC3B,OAAO;QACT,CAAC;QAED,IAAI,SAAS,EAAE,CAAC;YACd,IAAI,CAAC,gBAAgB,CAAC,SAAS,GAAG;;;;OAIjC,CAAC;YACF,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;QACnE,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,gBAAgB,CAAC,SAAS,GAAG;;;;OAIjC,CAAC;YACF,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;QAChE,CAAC;IACH,CAAC;IAEO,mBAAmB,CAAC,CAAa;QACvC,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,EAAE,CAAC;YACnE,OAAO;QACT,CAAC;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,qBAAqB,EAAE,CAAC;QACvD,MAAM,MAAM,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;QACrC,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QACjE,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAEhD,kDAAkD;QAClD,IAAI,CAAC,YAAY,GAAG,UAAU,CAAC;QAC/B,IAAI,CAAC,cAAc,EAAE,CAAC;QAEtB,mCAAmC;QACnC,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;YACpB,kFAAkF;YAClF,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;YACvB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAClC,CAAC;aAAM,CAAC;YACN,8DAA8D;YAC9D,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QACnC,CAAC;IACH,CAAC;IAEO,mBAAmB;QACzB,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,eAAe,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE;YAC7C,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;gBACtC,yDAAyD;gBACzD,IAAI,CAAC;oBACH,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAuD,CAAC;oBAC9E,IAAI,QAAQ,CAAC,cAAc,EAAE,CAAC;wBAC5B,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,cAAc,EAAE,CAAC;oBAChD,CAAC;yBAAM,CAAC;wBACN,6DAA6D;wBAC7D,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC,CAAC;oBACzE,CAAC;gBACH,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBACf,OAAO,CAAC,IAAI,CAAC,4DAA4D,EAAE,KAAK,CAAC,CAAC;gBACpF,CAAC;gBACD,IAAI,CAAC,cAAc,EAAE,CAAC;YACxB,CAAC;QACH,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAEO,kBAAkB;QACxB,IAAI,IAAI,CAAC,eAAe,KAAK,IAAI,EAAE,CAAC;YAClC,aAAa,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YACpC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC9B,CAAC;IACH,CAAC;IAEO,cAAc;QACpB,IAAI,CAAC,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,EAAE,CAAC;YACvE,OAAO;QACT,CAAC;QAED,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,CAAC,CAAC;QAC9E,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,UAAU,GAAG,CAAC;QAElD,MAAM,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC1D,MAAM,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACtD,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,GAAG,cAAc,MAAM,YAAY,EAAE,CAAC;IACxE,CAAC;IAEO,UAAU,CAAC,EAAU;QAC3B,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,IAAI,CAAC,CAAC;QACtC,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC,CAAC;QACzC,MAAM,gBAAgB,GAAG,OAAO,GAAG,EAAE,CAAC;QACtC,OAAO,GAAG,OAAO,IAAI,gBAAgB,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC;IACtE,CAAC;IAEO,kBAAkB;QACxB,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACnC,OAAO,CAAC,CAAC;QACX,CAAC;QAED,sDAAsD;QACtD,IAAI,OAAO,GAAG,CAAC,CAAC;QAChB,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;YACtC,MAAM,GAAG,GAAG,KAA6C,CAAC;YAC1D,IAAI,GAAG,CAAC,SAAS,EAAE,CAAC;gBAClB,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC;YAC7C,CAAC;QACH,CAAC;QAED,gEAAgE;QAChE,MAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAyB,CAAC;QAChE,IAAI,UAAU,EAAE,SAAS,EAAE,CAAC;YAC1B,OAAO,OAAO,GAAG,UAAU,CAAC,SAAS,CAAC;QACxC,CAAC;QAED,OAAO,CAAC,CAAC;IACX,CAAC;IAEO,iBAAiB;QACvB,2DAA2D;QAC3D,IAAI,QAAQ,CAAC,cAAc,CAAC,qBAAqB,CAAC,EAAE,CAAC;YACnD,OAAO;QACT,CAAC;QAED,mEAAmE;QACnE,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAC9C,KAAK,CAAC,EAAE,GAAG,qBAAqB,CAAC;QACjC,KAAK,CAAC,WAAW,GAAG,SAAS,CAAC;QAC9B,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IACnC,CAAC;IAEO,KAAK,CAAC,YAAY;QACxB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;YACrB,OAAO,CAAC,IAAI,CAAC,yDAAyD,CAAC,CAAC;YACxE,OAAO;QACT,CAAC;QAED,kEAAkE;QAClE,MAAM,eAAe,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAC5C,CAAC,KAAc,EAAE,EAAE,CAAE,KAAyB,CAAC,IAAI,KAAK,CAAC,CAC1D,CAAC;QAEF,OAAO,CAAC,GAAG,CAAC,uDAAuD,EAAE;YACnE,UAAU,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM;YACpC,eAAe;YACf,WAAW,EAAE,IAAI,CAAC,YAAY;SAC/B,CAAC,CAAC;QAEH,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;YACrD,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG;;0CAEQ,IAAI,CAAC,YAAY,CAAC,MAAM;;OAE3D,CAAC;YACF,OAAO;QACT,CAAC;QAED,iDAAiD;QACjD,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;YACvB,IAAI,CAAC;gBACH,OAAO,CAAC,GAAG,CAAC,0DAA0D,CAAC,CAAC;gBACxE,OAAO,CAAC,GAAG,CAAC,+CAA+C,EAAE,QAAQ,CAAC,CAAC;gBAEvE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBAEzB,2DAA2D;gBAC3D,4IAA4I;gBAC5I,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,EAAE,CAAC;gBAC/B,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBAC9C,iHAAiH;gBACjH,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;gBAErC,OAAO,CAAC,GAAG,CAAC,kEAAkE,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;gBAE1G,iCAAiC;gBACjC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC5C,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;gBAEtB,2DAA2D;gBAC3D,IAAI,aAAa,GAAG,IAAI,CAAC,CAAC,wBAAwB;gBAClD,IAAI,cAAc,GAAG,IAAI,CAAC,CAAC,yBAAyB;gBAEpD,uEAAuE;gBACvE,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;oBACtC,MAAM,GAAG,GAAG,KAAkE,CAAC;oBAC/E,6EAA6E;oBAC7E,IAAI,GAAG,CAAC,IAAI,KAAK,CAAC,IAAI,GAAG,CAAC,IAAI,EAAE,KAAK,IAAI,GAAG,CAAC,IAAI,EAAE,MAAM,EAAE,CAAC;wBAC1D,aAAa,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;wBAC/B,cAAc,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC;wBACjC,OAAO,CAAC,GAAG,CAAC,4EAA4E,EAAE;4BACxF,KAAK,EAAE,aAAa;4BACpB,MAAM,EAAE,cAAc;yBACvB,CAAC,CAAC;wBACH,MAAM;oBACR,CAAC;gBACH,CAAC;gBAED,6EAA6E;gBAC7E,IAAI,CAAC,SAAS,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,YAAY,EAAE;oBAC/C,IAAI,EAAE,OAAO;oBACb,KAAK,EAAE,CAAC;oBACR,YAAY,EAAE,KAAK;oBACnB,WAAW,EAAE,KAAK;iBACnB,CAAC,CAAC;gBAEH,OAAO,CAAC,GAAG,CAAC,gDAAgD,EAAE;oBAC5D,SAAS,EAAE,IAAI,CAAC,UAAU;oBAC1B,UAAU,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM;iBACrC,CAAC,CAAC;gBAEH,yFAAyF;gBACzF,gHAAgH;gBAChH,UAAU,CAAC,GAAG,EAAE;oBACd,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;wBACnB,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAoD,CAAC;wBAC3E,IAAI,QAAQ,CAAC,MAAM,EAAE,CAAC;4BACpB,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC;4BAC7D,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAE,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;4BAC/D,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,SAAS,CAAC;4BAC1C,OAAO,CAAC,GAAG,CAAC,gDAAgD,EAAE;gCAC5D,KAAK,EAAE,aAAa;gCACpB,MAAM,EAAE,cAAc;6BACvB,CAAC,CAAC;wBACL,CAAC;oBACH,CAAC;gBACH,CAAC,EAAE,GAAG,CAAC,CAAC;gBAER,qCAAqC;gBACrC,IAAI,CAAC,mBAAmB,EAAE,CAAC;gBAE3B,sBAAsB;gBACtB,IAAI,CAAC,cAAc,EAAE,CAAC;gBACtB,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;gBAElC,4DAA4D;gBAC5D,yBAAyB;YAC3B,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACf,OAAO,CAAC,KAAK,CAAC,8DAA8D,EAAE,KAAK,CAAC,CAAC;gBACrF,OAAO,CAAC,KAAK,CAAC,wBAAwB,EAAE;oBACtC,KAAK;oBACL,YAAY,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;oBACpE,UAAU,EAAE,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS;oBAC5D,iBAAiB,EAAE,OAAO,QAAQ,KAAK,WAAW;iBACnD,CAAC,CAAC;gBACH,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG;;qCAEC,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;;SAElF,CAAC;gBACF,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC5B,CAAC;QACH,CAAC;aAAM,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YAC1B,yFAAyF;YACzF,sEAAsE;YACtE,0CAA0C;YAC1C,OAAO,CAAC,GAAG,CAAC,0EAA0E,CAAC,CAAC;YACxF,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC1B,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,MAAM,IAAI,CAAC,YAAY,EAAE,CAAC;QAC5B,CAAC;IACH,CAAC;IAEO,mBAAmB;QACzB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;YACpB,OAAO;QACT,CAAC;QAED,mEAAmE;QACnE,IAAI,CAAC;YACH,6DAA6D;YAC7D,MAAM,QAAQ,GAAG,IAAI,CAAC,SAKrB,CAAC;YAEF,IAAI,QAAQ,CAAC,OAAO,EAAE,EAAE,EAAE,CAAC;gBACzB,wCAAwC;gBACxC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,EAAE,GAAG,EAAE;oBAChC,OAAO,CAAC,GAAG,CAAC,gDAAgD,CAAC,CAAC;oBAC9D,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;oBACvB,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;oBACjC,IAAI,CAAC,mBAAmB,EAAE,CAAC;gBAC7B,CAAC,CAAC,CAAC;gBAEH,wCAAwC;gBACxC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,EAAE,GAAG,EAAE;oBAChC,OAAO,CAAC,GAAG,CAAC,iDAAiD,CAAC,CAAC;oBAC/D,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;oBACxB,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;oBAClC,IAAI,CAAC,kBAAkB,EAAE,CAAC;oBAC1B,sDAAsD;oBACtD,IAAI,QAAQ,CAAC,cAAc,EAAE,CAAC;wBAC5B,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,cAAc,EAAE,CAAC;wBAC9C,IAAI,CAAC,cAAc,EAAE,CAAC;oBACxB,CAAC;gBACH,CAAC,CAAC,CAAC;gBAEH,0CAA0C;gBAC1C,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,QAAQ,EAAE,GAAG,EAAE;oBACjC,OAAO,CAAC,GAAG,CAAC,iDAAiD,CAAC,CAAC;oBAC/D,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;oBACxB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC;oBACpC,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;oBAClC,IAAI,CAAC,kBAAkB,EAAE,CAAC;oBAC1B,IAAI,CAAC,cAAc,EAAE,CAAC;gBACxB,CAAC,CAAC,CAAC;YACL,CAAC;iBAAM,CAAC;gBACN,OAAO,CAAC,IAAI,CAAC,0DAA0D,CAAC,CAAC;YAC3E,CAAC;QACH,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,IAAI,CAAC,sEAAsE,EAAE,KAAK,CAAC,CAAC;QAC9F,CAAC;IACH,CAAC;IAEQ,QAAQ;QACf,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjB,+CAA+C;QAC/C,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACnB,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;YACvB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QAC1B,CAAC;IACH,CAAC;IAED,MAAM,CAAC,QAAQ,CAAC,OAAiC,EAAC,QAAQ,EAAE,IAAI,EAAC;QAC/D,MAAM,EAAC,QAAQ,EAAC,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,0BAA0B,IAAI,QAAQ,EAAE,CAAC;YAC5C,0BAA0B,GAAG,IAAI,kBAAkB,EAAE,CAAC;QACxD,CAAC;QACD,OAAO,0BAA0B,CAAC;IACpC,CAAC;CACF","sourcesContent":["// Copyright 2025 The Chromium Authors\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as ProtocolClient from '../../core/protocol_client/protocol_client.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport { Replayer, type ReplayerClass, cssStyles } from '../../third_party/rrweb-replay/rrweb-replay.js';\n\nlet sessionReplayPanelInstance: SessionReplayPanel;\n\nexport class SessionReplayPanel extends UI.Panel.Panel {\n  #rrwebEvents: unknown[] = [];\n  #container: HTMLElement|null = null;\n  #target: SDK.Target.Target|null = null;\n  #observer: ProtocolClient.CDPConnection.CDPConnectionObserver|null = null;\n  #replayer: InstanceType<ReplayerClass>|null = null; // Replayer instance / Replayer 인스턴스\n  #rrwebLoaded = false; // Flag to track if rrweb is loaded / rrweb 로드 여부 플래그\n  #controlsContainer: HTMLElement|null = null; // Controls container / 컨트롤 컨테이너 (for future use / 향후 사용)\n  #playPauseButton: HTMLElement|null = null; // Play/pause button / 재생/일시정지 버튼\n  #progressBar: HTMLElement|null = null; // Progress bar / 진행 바\n  #progressFill: HTMLElement|null = null; // Progress fill / 진행 채우기\n  #timeDisplay: HTMLElement|null = null; // Time display / 시간 표시\n  #isPlaying = false; // Playing state / 재생 상태\n  #currentTime = 0; // Current time in ms / 현재 시간 (ms)\n  #totalTime = 0; // Total time in ms / 총 시간 (ms)\n  #updateInterval: number|null = null; // Update interval ID / 업데이트 간격 ID\n\n  constructor() {\n    super('session-replay');\n    console.log('SessionReplay: Panel constructor called / 패널 생성자 호출됨');\n    this.render();\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    console.log('SessionReplay: Panel was shown / 패널 표시됨');\n\n    // Update container height when panel is shown / 패널이 표시될 때 컨테이너 높이 업데이트\n    this.updateContainerHeight();\n\n    // Setup CDP listener when panel is shown / 패널이 표시될 때 CDP 리스너 설정\n    this.setupCDPListener();\n\n    // Also try to setup listener after a short delay in case target becomes available / 타겟이 나중에 사용 가능해질 수 있으므로 짧은 지연 후에도 시도\n    setTimeout(() => {\n      if (!this.#target) {\n        console.log('SessionReplay: Retrying setup after delay / 지연 후 재시도');\n        this.setupCDPListener();\n      }\n      // Update height again after delay to ensure correct calculation / 지연 후 높이를 다시 업데이트하여 정확한 계산 보장\n      this.updateContainerHeight();\n    }, 1000);\n  }\n\n  private setupCDPListener(): void {\n    console.log('SessionReplay: setupCDPListener called / setupCDPListener 호출됨');\n    // Get primary target and listen to CDP events / 주요 타겟을 가져와서 CDP 이벤트 리스닝\n    const target = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n    console.log('SessionReplay: Primary target / 주요 타겟:', target);\n    if (!target) {\n      console.log('SessionReplay: No target available, waiting... / 타겟 없음, 대기 중...');\n      // Wait for target to be available / 타겟이 사용 가능할 때까지 대기\n      SDK.TargetManager.TargetManager.instance().addEventListener(\n        SDK.TargetManager.Events.AVAILABLE_TARGETS_CHANGED,\n        () => {\n          console.log('SessionReplay: AVAILABLE_TARGETS_CHANGED event / 타겟 변경 이벤트');\n          const newTarget = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n          if (newTarget && !this.#target) {\n            console.log('SessionReplay: New target available / 새 타겟 사용 가능:', newTarget);\n            this.#target = newTarget;\n            this.attachToTarget(newTarget);\n          }\n        },\n        this\n      );\n      return;\n    }\n\n    console.log('SessionReplay: Target available, attaching... / 타겟 사용 가능, 연결 중...');\n    this.#target = target;\n    this.attachToTarget(target);\n  }\n\n  private attachToTarget(target: SDK.Target.Target): void {\n    // Listen to SessionReplay.eventRecorded events / SessionReplay.eventRecorded 이벤트 리스닝\n    const router = target.router();\n    if (!router) {\n      console.warn('SessionReplay: Router not available / 라우터를 사용할 수 없음');\n      return;\n    }\n\n    const connection = router.connection;\n    if (!connection) {\n      console.warn('SessionReplay: Connection not available / 연결을 사용할 수 없음');\n      return;\n    }\n\n    console.log('SessionReplay: Attaching to target / 타겟에 연결 중...', target);\n\n    // Enable SessionReplay domain / SessionReplay 도메인 활성화\n    const sessionReplayAgent = target.sessionReplayAgent();\n    if (sessionReplayAgent) {\n      sessionReplayAgent.invoke_enable().then(() => {\n        console.log('SessionReplay: Domain enabled / 도메인 활성화됨');\n      }).catch((error: unknown) => {\n        console.error('SessionReplay: Failed to enable domain / 도메인 활성화 실패:', error);\n      });\n    } else {\n      console.warn('SessionReplay: SessionReplayAgent not available / SessionReplayAgent를 사용할 수 없음');\n    }\n\n    this.#observer = {\n      onEvent: <T extends ProtocolClient.CDPConnection.Event>(event: ProtocolClient.CDPConnection.CDPEvent<T>): void => {\n        // Log first few events for debugging / 디버깅을 위해 처음 몇 개 이벤트 로깅\n        if (this.#rrwebEvents.length < 5) {\n          console.log('SessionReplay: CDP event received / CDP 이벤트 수신:', event.method, event.params);\n        }\n\n        // Log all SessionReplay related events for debugging / 디버깅을 위해 모든 SessionReplay 관련 이벤트 로깅\n        if (event.method?.includes('SessionReplay') || event.method?.toLowerCase().includes('session')) {\n          console.log('SessionReplay: Received SessionReplay event / SessionReplay 이벤트 수신:', event.method, event.params);\n        }\n\n        // Check for SessionReplay.eventRecorded event / SessionReplay.eventRecorded 이벤트 확인\n        if (event.method === 'SessionReplay.eventRecorded') {\n          const params = event.params as Protocol.SessionReplay.EventRecordedEvent;\n          console.log('SessionReplay: eventRecorded event received / eventRecorded 이벤트 수신:', params);\n          if (Array.isArray(params.events)) {\n            console.log('SessionReplay: Received events / 이벤트 수신:', params.events.length);\n            this.#rrwebEvents.push(...params.events);\n            console.log('SessionReplay: Total events / 총 이벤트:', this.#rrwebEvents.length);\n            void this.updateReplay();\n          } else {\n            console.warn('SessionReplay: params.events is not an array / params.events가 배열이 아님:', params);\n          }\n        }\n      },\n      onDisconnect: (_reason: string): void => {\n        console.log('SessionReplay: Connection disconnected / 연결 끊김:', _reason);\n        this.#observer = null;\n      },\n    };\n\n    connection.observe(this.#observer);\n    console.log('SessionReplay: Observer attached / 옵저버 연결됨');\n    console.log('SessionReplay: Connection state / 연결 상태:', {\n      hasObserver: !!this.#observer,\n      connectionReady: !!connection,\n      targetId: target.id(),\n    });\n  }\n\n  private render(): void {\n    // Inject rrweb-replay CSS styles / rrweb-replay CSS 스타일 주입\n    this.injectRrwebStyles();\n\n    const container = document.createElement('div');\n    container.className = 'session-replay-panel';\n\n    // Create content wrapper / 콘텐츠 래퍼 생성\n    const contentWrapper = document.createElement('div');\n    contentWrapper.className = 'session-replay-content';\n    this.#container = contentWrapper;\n    container.appendChild(contentWrapper);\n\n    // Create controls / 컨트롤 생성\n    this.createControls(container);\n\n    this.contentElement.appendChild(container);\n\n    // Update container height after layout / 레이아웃 후 컨테이너 높이 업데이트\n    this.updateContainerHeight();\n\n    void this.updateReplay();\n  }\n\n  private updateContainerHeight(): void {\n    // Calculate available height considering tab bar and controls / 탭바와 컨트롤을 고려한 사용 가능한 높이 계산\n    if (!this.#container) {\n      return;\n    }\n\n    const updateHeight = (): void => {\n      if (!this.#container) {\n        return;\n      }\n\n      // Get panel content element dimensions / 패널 콘텐츠 요소 크기 가져오기\n      const panelElement = this.contentElement;\n      const panelRect = panelElement.getBoundingClientRect();\n\n      // Get controls height if available / 컨트롤 높이 가져오기 (있는 경우)\n      const controlsHeight = this.#controlsContainer?.offsetHeight || 0;\n\n      // Calculate available height / 사용 가능한 높이 계산\n      const availableHeight = panelRect.height - controlsHeight;\n\n      // Set content wrapper height / 콘텐츠 래퍼 높이 설정\n      this.#container.style.height = `${Math.max(0, availableHeight)}px`;\n      this.#container.style.minHeight = `${Math.max(0, availableHeight)}px`;\n    };\n\n    // Update immediately / 즉시 업데이트\n    updateHeight();\n\n    // Update on resize / 리사이즈 시 업데이트\n    const resizeObserver = new ResizeObserver(() => {\n      updateHeight();\n    });\n\n    resizeObserver.observe(this.contentElement);\n\n    // Also listen to window resize / 윈도우 리사이즈도 리스닝\n    window.addEventListener('resize', updateHeight);\n  }\n\n  private createControls(container: HTMLElement): void {\n    const controlsContainer = document.createElement('div');\n    controlsContainer.className = 'session-replay-controls';\n    this.#controlsContainer = controlsContainer;\n\n    // Play/Pause button / 재생/일시정지 버튼\n    const playPauseButton = document.createElement('button');\n    playPauseButton.className = 'session-replay-play-pause';\n    playPauseButton.setAttribute('aria-label', 'Play / 재생');\n    playPauseButton.innerHTML = `\n      <svg viewBox=\"0 0 24 24\">\n        <path d=\"M8 5v14l11-7z\"/>\n      </svg>\n    `;\n    playPauseButton.addEventListener('click', () => this.togglePlayPause());\n    this.#playPauseButton = playPauseButton;\n    controlsContainer.appendChild(playPauseButton);\n\n    // Progress bar / 진행 바\n    const progressContainer = document.createElement('div');\n    progressContainer.className = 'session-replay-progress-container';\n    progressContainer.addEventListener('click', (e) => this.handleProgressClick(e));\n    const progressFill = document.createElement('div');\n    progressFill.className = 'session-replay-progress-fill';\n    progressContainer.appendChild(progressFill);\n    this.#progressBar = progressContainer;\n    this.#progressFill = progressFill;\n    controlsContainer.appendChild(progressContainer);\n\n    // Time display / 시간 표시\n    const timeDisplay = document.createElement('div');\n    timeDisplay.className = 'session-replay-time';\n    timeDisplay.textContent = '0:00 / 0:00';\n    this.#timeDisplay = timeDisplay;\n    controlsContainer.appendChild(timeDisplay);\n\n    container.appendChild(controlsContainer);\n  }\n\n  private togglePlayPause(): void {\n    if (!this.#replayer) {\n      return;\n    }\n\n    if (this.#isPlaying) {\n      // Pause playback / 재생 일시정지\n      this.#replayer.pause();\n      // Note: The pause event from emitter will update the state / 참고: emitter의 pause 이벤트가 상태를 업데이트함\n    } else {\n      // Resume or start playback / 재생 재개 또는 시작\n      // If at the end, restart from beginning / 끝에 있으면 처음부터 재시작\n      if (this.#currentTime >= this.#totalTime) {\n        this.#currentTime = 0;\n        this.updateProgress();\n      }\n      this.#replayer.play(this.#currentTime);\n      // Note: The start event from emitter will update the state / 참고: emitter의 start 이벤트가 상태를 업데이트함\n    }\n  }\n\n  private updatePlayPauseButton(isPlaying: boolean): void {\n    if (!this.#playPauseButton) {\n      return;\n    }\n\n    if (isPlaying) {\n      this.#playPauseButton.innerHTML = `\n        <svg viewBox=\"0 0 24 24\">\n          <path d=\"M6 4h4v16H6V4zm8 0h4v16h-4V4z\"/>\n        </svg>\n      `;\n      this.#playPauseButton.setAttribute('aria-label', 'Pause / 일시정지');\n    } else {\n      this.#playPauseButton.innerHTML = `\n        <svg viewBox=\"0 0 24 24\">\n          <path d=\"M8 5v14l11-7z\"/>\n        </svg>\n      `;\n      this.#playPauseButton.setAttribute('aria-label', 'Play / 재생');\n    }\n  }\n\n  private handleProgressClick(e: MouseEvent): void {\n    if (!this.#progressBar || !this.#replayer || this.#totalTime === 0) {\n      return;\n    }\n\n    const rect = this.#progressBar.getBoundingClientRect();\n    const clickX = e.clientX - rect.left;\n    const percentage = Math.max(0, Math.min(1, clickX / rect.width));\n    const targetTime = this.#totalTime * percentage;\n\n    // Update current time immediately / 현재 시간 즉시 업데이트\n    this.#currentTime = targetTime;\n    this.updateProgress();\n\n    // Seek to target time / 목표 시간으로 이동\n    if (this.#isPlaying) {\n      // If playing, pause first then play at new position / 재생 중이면 먼저 일시정지한 후 새 위치에서 재생\n      this.#replayer.pause();\n      this.#replayer.play(targetTime);\n    } else {\n      // If paused, just seek without playing / 일시정지 중이면 재생하지 않고 이동만\n      this.#replayer.pause(targetTime);\n    }\n  }\n\n  private startProgressUpdate(): void {\n    this.stopProgressUpdate();\n    this.#updateInterval = window.setInterval(() => {\n      if (this.#replayer && this.#isPlaying) {\n        // Get current time from replayer / replayer에서 현재 시간 가져오기\n        try {\n          const replayer = this.#replayer as unknown as {getCurrentTime?: () => number};\n          if (replayer.getCurrentTime) {\n            this.#currentTime = replayer.getCurrentTime();\n          } else {\n            // Fallback: estimate based on elapsed time / 대체: 경과 시간 기반 추정\n            this.#currentTime = Math.min(this.#totalTime, this.#currentTime + 100);\n          }\n        } catch (error) {\n          console.warn('SessionReplay: Failed to get current time / 현재 시간 가져오기 실패:', error);\n        }\n        this.updateProgress();\n      }\n    }, 100);\n  }\n\n  private stopProgressUpdate(): void {\n    if (this.#updateInterval !== null) {\n      clearInterval(this.#updateInterval);\n      this.#updateInterval = null;\n    }\n  }\n\n  private updateProgress(): void {\n    if (!this.#progressFill || !this.#timeDisplay || this.#totalTime === 0) {\n      return;\n    }\n\n    const percentage = Math.min(100, (this.#currentTime / this.#totalTime) * 100);\n    this.#progressFill.style.width = `${percentage}%`;\n\n    const currentTimeStr = this.formatTime(this.#currentTime);\n    const totalTimeStr = this.formatTime(this.#totalTime);\n    this.#timeDisplay.textContent = `${currentTimeStr} / ${totalTimeStr}`;\n  }\n\n  private formatTime(ms: number): string {\n    const seconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n  }\n\n  private calculateTotalTime(): number {\n    if (this.#rrwebEvents.length === 0) {\n      return 0;\n    }\n\n    // Find the last event's timestamp / 마지막 이벤트의 타임스탬프 찾기\n    let maxTime = 0;\n    for (const event of this.#rrwebEvents) {\n      const evt = event as {timestamp?: number; delay?: number};\n      if (evt.timestamp) {\n        maxTime = Math.max(maxTime, evt.timestamp);\n      }\n    }\n\n    // Calculate relative time from first event / 첫 이벤트로부터의 상대 시간 계산\n    const firstEvent = this.#rrwebEvents[0] as {timestamp?: number};\n    if (firstEvent?.timestamp) {\n      return maxTime - firstEvent.timestamp;\n    }\n\n    return 0;\n  }\n\n  private injectRrwebStyles(): void {\n    // Check if styles are already injected / 스타일이 이미 주입되었는지 확인\n    if (document.getElementById('rrweb-replay-styles')) {\n      return;\n    }\n\n    // Inject CSS from rrweb-replay package / rrweb-replay 패키지에서 CSS 주입\n    const style = document.createElement('style');\n    style.id = 'rrweb-replay-styles';\n    style.textContent = cssStyles;\n    document.head.appendChild(style);\n  }\n\n  private async updateReplay(): Promise<void> {\n    if (!this.#container) {\n      console.warn('SessionReplay: Container not available / 컨테이너를 사용할 수 없음');\n      return;\n    }\n\n    // Check if we have enough events for replay / 재생에 충분한 이벤트가 있는지 확인\n    const hasFullSnapshot = this.#rrwebEvents.some(\n      (event: unknown) => (event as {type?: number}).type === 2\n    );\n\n    console.log('SessionReplay: updateReplay called / updateReplay 호출됨', {\n      eventCount: this.#rrwebEvents.length,\n      hasFullSnapshot,\n      rrwebLoaded: this.#rrwebLoaded,\n    });\n\n    if (this.#rrwebEvents.length < 2 || !hasFullSnapshot) {\n      this.#container.innerHTML = `\n        <div style=\"display: flex; align-items: center; justify-content: center; height: 100%; color: #999;\">\n          Waiting for full snapshot... (${this.#rrwebEvents.length} events)\n        </div>\n      `;\n      return;\n    }\n\n    // Initialize rrweb Replayer / rrweb Replayer 초기화\n    if (!this.#rrwebLoaded) {\n      try {\n        console.log('SessionReplay: Initializing Replayer / Replayer 초기화 중...');\n        console.log('SessionReplay: Replayer class / Replayer 클래스:', Replayer);\n\n        this.#rrwebLoaded = true;\n\n        // Clear container and create wrapper / 컨테이너 비우고 wrapper 생성\n        // Follow original rrweb pattern: wrapper has no size constraints, iframe gets fixed size / 원본 rrweb 패턴 따름: wrapper는 크기 제한 없음, iframe은 고정 크기\n        this.#container.innerHTML = '';\n        const wrapper = document.createElement('div');\n        // Wrapper uses default styles from CSS (position: relative only) / Wrapper는 CSS의 기본 스타일 사용 (position: relative만)\n        this.#container.appendChild(wrapper);\n\n        console.log('SessionReplay: Creating Replayer with events / 이벤트로 Replayer 생성:', this.#rrwebEvents.length);\n\n        // Calculate total time / 총 시간 계산\n        this.#totalTime = this.calculateTotalTime();\n        this.#currentTime = 0;\n\n        // Get viewport size from first event / 첫 이벤트에서 뷰포트 크기 가져오기\n        let viewportWidth = 1920; // Default width / 기본 너비\n        let viewportHeight = 1080; // Default height / 기본 높이\n\n        // Try to get viewport size from Meta event / Meta 이벤트에서 뷰포트 크기 가져오기 시도\n        for (const event of this.#rrwebEvents) {\n          const evt = event as {type?: number; data?: {width?: number; height?: number}};\n          // Meta event (type 4) contains viewport size / Meta 이벤트(type 4)에 뷰포트 크기가 포함됨\n          if (evt.type === 4 && evt.data?.width && evt.data?.height) {\n            viewportWidth = evt.data.width;\n            viewportHeight = evt.data.height;\n            console.log('SessionReplay: Found viewport size from Meta event / Meta 이벤트에서 뷰포트 크기 발견:', {\n              width: viewportWidth,\n              height: viewportHeight,\n            });\n            break;\n          }\n        }\n\n        // Create Replayer instance with collected events / 수집된 이벤트로 Replayer 인스턴스 생성\n        this.#replayer = new Replayer(this.#rrwebEvents, {\n          root: wrapper,\n          speed: 1,\n          skipInactive: false,\n          showWarning: false,\n        });\n\n        console.log('SessionReplay: Replayer created / Replayer 생성됨', {\n          totalTime: this.#totalTime,\n          eventCount: this.#rrwebEvents.length,\n        });\n\n        // Set fixed size for iframe after Replayer creates it / Replayer가 iframe을 생성한 후 고정 크기 설정\n        // Follow original rrweb pattern: set iframe width/height attributes / 원본 rrweb 패턴 따름: iframe width/height 속성 설정\n        setTimeout(() => {\n          if (this.#replayer) {\n            const replayer = this.#replayer as unknown as {iframe?: HTMLIFrameElement};\n            if (replayer.iframe) {\n              replayer.iframe.setAttribute('width', String(viewportWidth));\n              replayer.iframe.setAttribute('height', String(viewportHeight));\n              replayer.iframe.style.display = 'inherit';\n              console.log('SessionReplay: Set iframe size / iframe 크기 설정:', {\n                width: viewportWidth,\n                height: viewportHeight,\n              });\n            }\n          }\n        }, 100);\n\n        // Setup event listeners / 이벤트 리스너 설정\n        this.setupReplayerEvents();\n\n        // Update UI / UI 업데이트\n        this.updateProgress();\n        this.updatePlayPauseButton(false);\n\n        // Don't auto-play, let user control / 자동 재생하지 않고 사용자가 제어하도록\n        // this.#replayer.play();\n      } catch (error) {\n        console.error('Failed to initialize rrweb replayer / rrweb replayer 초기화 실패:', error);\n        console.error('Error details / 오류 상세:', {\n          error,\n          errorMessage: error instanceof Error ? error.message : String(error),\n          errorStack: error instanceof Error ? error.stack : undefined,\n          ReplayerAvailable: typeof Replayer !== 'undefined',\n        });\n        this.#container.innerHTML = `\n          <div style=\"display: flex; align-items: center; justify-content: center; height: 100%; color: #f00;\">\n            Failed to load replay: ${error instanceof Error ? error.message : String(error)}\n          </div>\n        `;\n        this.#rrwebLoaded = false;\n      }\n    } else if (this.#replayer) {\n      // If new events arrive, we need to recreate the replayer / 새 이벤트가 도착하면 replayer를 재생성해야 함\n      // rrweb Replayer doesn't support updating events after initialization\n      // rrweb Replayer는 초기화 후 이벤트 업데이트를 지원하지 않음\n      console.log('SessionReplay: Recreating replayer with new events / 새 이벤트로 replayer 재생성');\n      this.stopProgressUpdate();\n      this.#replayer.pause();\n      this.#replayer = null;\n      this.#rrwebLoaded = false;\n      await this.updateReplay();\n    }\n  }\n\n  private setupReplayerEvents(): void {\n    if (!this.#replayer) {\n      return;\n    }\n\n    // Listen to replayer events if available / 가능한 경우 replayer 이벤트 리스닝\n    try {\n      // Try to access emitter if available / 가능한 경우 emitter에 접근 시도\n      const replayer = this.#replayer as unknown as {\n        emitter?: {\n          on?: (event: string, callback: () => void) => void;\n        };\n        getCurrentTime?: () => number;\n      };\n\n      if (replayer.emitter?.on) {\n        // Listen to start event / start 이벤트 리스닝\n        replayer.emitter.on('start', () => {\n          console.log('SessionReplay: Replayer started / Replayer 시작됨');\n          this.#isPlaying = true;\n          this.updatePlayPauseButton(true);\n          this.startProgressUpdate();\n        });\n\n        // Listen to pause event / pause 이벤트 리스닝\n        replayer.emitter.on('pause', () => {\n          console.log('SessionReplay: Replayer paused / Replayer 일시정지됨');\n          this.#isPlaying = false;\n          this.updatePlayPauseButton(false);\n          this.stopProgressUpdate();\n          // Update current time when paused / 일시정지 시 현재 시간 업데이트\n          if (replayer.getCurrentTime) {\n            this.#currentTime = replayer.getCurrentTime();\n            this.updateProgress();\n          }\n        });\n\n        // Listen to finish event / finish 이벤트 리스닝\n        replayer.emitter.on('finish', () => {\n          console.log('SessionReplay: Replayer finished / Replayer 종료됨');\n          this.#isPlaying = false;\n          this.#currentTime = this.#totalTime;\n          this.updatePlayPauseButton(false);\n          this.stopProgressUpdate();\n          this.updateProgress();\n        });\n      } else {\n        console.warn('SessionReplay: Emitter not available / Emitter를 사용할 수 없음');\n      }\n    } catch (error) {\n      console.warn('SessionReplay: Could not setup replayer events / replayer 이벤트 설정 실패:', error);\n    }\n  }\n\n  override willHide(): void {\n    super.willHide();\n    // Clean up when panel is hidden / 패널이 숨겨질 때 정리\n    this.stopProgressUpdate();\n    if (this.#replayer) {\n      this.#replayer.pause();\n      this.#isPlaying = false;\n    }\n  }\n\n  static instance(opts: {forceNew: boolean|null} = {forceNew: null}): SessionReplayPanel {\n    const {forceNew} = opts;\n    if (!sessionReplayPanelInstance || forceNew) {\n      sessionReplayPanelInstance = new SessionReplayPanel();\n    }\n    return sessionReplayPanelInstance;\n  }\n}\n\n"]}
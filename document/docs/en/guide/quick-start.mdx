import { PackageManagerTabs } from '@theme';

# Quick Start

This guide will help you get started with Chrome Remote DevTools in just a few minutes.

## Installation

### Install Client Package

To use Chrome Remote DevTools in your web page, you need to install the client package:

<PackageManagerTabs command="install @ohah/chrome-remote-devtools-client" />

## Start the Development Servers

### 1. Start the WebSocket Relay Server

**Recommended method (for development convenience)**:

```bash
bun run dev:server
```

**Direct Rust server execution**:

```bash
cargo run --bin chrome-remote-devtools-server -- --port 8080 --host 0.0.0.0
```

> **Note**: `bun run dev:server` is a wrapper script that runs the cargo command above for development convenience. The server is implemented in Rust and will start on `http://localhost:8080` by default.

### 2. Start the Inspector (Web Version)

In a new terminal:

```bash
bun run dev:inspector
```

The Inspector will be available at `http://localhost:5173` (or the port shown in the terminal).

### 3. Initialize the Client in Your Web Page

**Using ESM module (TypeScript/React etc.):**

```typescript
import { init } from '@ohah/chrome-remote-devtools-client';

init({
  serverUrl: 'ws://localhost:8080',
  rrweb: {
    enable: true,
    enableExportButton: true,
  },
});
```

**Using script tag (IIFE):**

```html
<script src="http://localhost:8080/client.js"></script>
<script>
  ChromeRemoteDevTools.init({
    serverUrl: 'ws://localhost:8080',
    rrweb: {
      enable: true,
      enableExportButton: true,
    },
  });
</script>
```

#### Configuration Options

- `serverUrl`: WebSocket server URL (use `wss://` for HTTPS, `ws://` for HTTP)
- `rrweb.enable`: Enable session replay recording (optional, default: `false`)
- `rrweb.enableExportButton`: Show export button on page (optional, default: `false`)
- `skipWebSocket`: Skip WebSocket connection and use postMessage only (optional, default: `false`)

## Your First Debugging Session

1. Open your web page with the client script loaded
2. Open the Inspector in your browser (`http://localhost:5173`)
3. Select your client from the list
4. Start debugging!

The Inspector will connect to your page and you can use all DevTools features:

- View and interact with the console
- Inspect the DOM
- Monitor network requests
- Debug JavaScript
- And much more!

## Quick Start (React Native)

This guide shows how to use Chrome Remote DevTools in React Native apps.

### Installation

Install the React Native Inspector package:

<PackageManagerTabs command="install @ohah/chrome-remote-devtools-react-native" />

### Metro Configuration

Add Redux DevTools Extension polyfill to your Metro configuration:

```javascript
// metro.config.js
const { getDefaultConfig, mergeConfig } = require('@react-native/metro-config');
const { withChromeRemoteDevToolsRedux } = require('@ohah/chrome-remote-devtools-react-native/metro');

const config = getDefaultConfig(__dirname);

module.exports = withChromeRemoteDevToolsRedux(config);
```

### Connect in Your App

Connect to the server from your React Native app:

```typescript
import ChromeRemoteDevToolsInspector from '@ohah/chrome-remote-devtools-react-native';

// Connect to server
ChromeRemoteDevToolsInspector.connect('localhost', 8080)
  .then(() => {
    console.log('✅ Connected to Chrome Remote DevTools');
  })
  .catch((error) => {
    console.error('❌ Failed to connect:', error);
  });
```

**Note**: If using Android emulator, use `10.0.2.2` instead of `localhost`:

```typescript
const serverHost = Platform.OS === 'android' ? '10.0.2.2' : 'localhost';
ChromeRemoteDevToolsInspector.connect(serverHost, 8080);
```

### Using Redux DevTools (Optional)

If using Redux, add the middleware:

```typescript
import { createReduxDevToolsMiddleware } from '@ohah/chrome-remote-devtools-react-native/redux';
import { createStore, applyMiddleware } from 'redux';

const store = createStore(
  rootReducer,
  applyMiddleware(
    createReduxDevToolsMiddleware({
      name: 'MyApp',
      instanceId: 'main-store'
    })
  )
);
```

### Storage Inspection (Optional)

To inspect MMKV or AsyncStorage, register them:

```typescript
import { registerMMKVDevTools } from '@ohah/chrome-remote-devtools-react-native';
import { createMMKV } from 'react-native-mmkv';

const storage = createMMKV({ id: 'user-storage' });
registerMMKVDevTools(storage);
```

```typescript
import { registerAsyncStorageDevTools } from '@ohah/chrome-remote-devtools-react-native';
import AsyncStorage from '@react-native-async-storage/async-storage';

registerAsyncStorageDevTools(AsyncStorage);
```

### Your First Debugging Session

1. Start Chrome Remote DevTools server (`bun run dev:server` or `cargo run --bin chrome-remote-devtools-server -- --port 8080`)
2. Start Inspector web version (`bun run dev:inspector`)
3. Run your React Native app and connect to the server
4. Open Inspector in your browser (`http://localhost:5173`)
5. Select your client from the list
6. Start debugging!

The Inspector provides access to:

- View and interact with the console
- Monitor network requests
- Debug JavaScript
- Track Redux state and actions (if using Redux)
- Inspect and modify MMKV/AsyncStorage (if registered)
- And much more!

## Next Steps

- Learn about the [Architecture](/architecture/overview)
- Try the [Playground](/examples/)
- Read the [API Documentation](/api/server)
- Explore [React Native Custom CDP Domains](/api/domains/redux)

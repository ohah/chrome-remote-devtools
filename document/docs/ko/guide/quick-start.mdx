import { PackageManagerTabs } from '@theme';

# 빠른 시작

이 가이드는 몇 분 안에 Chrome Remote DevTools를 시작하는 데 도움이 됩니다.

## 설치

### 클라이언트 패키지 설치

웹 페이지에서 Chrome Remote DevTools를 사용하려면 클라이언트 패키지를 설치해야 합니다:

<PackageManagerTabs command="install @ohah/chrome-remote-devtools-client" />

## 개발 서버 시작

### 1. WebSocket 릴레이 서버 시작

**개발 편의를 위한 방법 (권장)**:

```bash
bun run dev:server
```

**직접 Rust 서버 실행**:

```bash
cargo run --bin chrome-remote-devtools-server -- --port 8080 --host 0.0.0.0
```

> **참고**: `bun run dev:server`는 개발 편의를 위해 위의 cargo 명령어를 실행하는 래퍼 스크립트입니다. 서버는 Rust로 구현되어 있으며, 기본적으로 `http://localhost:8080`에서 시작됩니다.

### 2. Inspector (웹 버전) 시작

새 터미널에서:

```bash
bun run dev:inspector
```

Inspector는 `http://localhost:5173` (또는 터미널에 표시된 포트)에서 사용할 수 있습니다.

### 3. 웹 페이지에서 클라이언트 초기화

**ESM 모듈 사용 (TypeScript/React 등):**

```typescript
import { init } from '@ohah/chrome-remote-devtools-client';

init({
  serverUrl: 'ws://localhost:8080',
  rrweb: {
    enable: true,
    enableExportButton: true,
  },
});
```

**스크립트 태그 사용 (IIFE):**

```html
<script src="http://localhost:8080/client.js"></script>
<script>
  ChromeRemoteDevTools.init({
    serverUrl: 'ws://localhost:8080',
    rrweb: {
      enable: true,
      enableExportButton: true,
    },
  });
</script>
```

#### 설정 옵션

- `serverUrl`: WebSocket 서버 URL (HTTPS는 `wss://`, HTTP는 `ws://` 사용)
- `rrweb.enable`: 세션 리플레이 녹화 활성화 (선택사항, 기본값: `false`)
- `rrweb.enableExportButton`: 페이지에 export 버튼 표시 (선택사항, 기본값: `false`)
- `skipWebSocket`: WebSocket 연결 건너뛰고 postMessage만 사용 (선택사항, 기본값: `false`)

## 첫 디버깅 세션

1. 클라이언트 스크립트가 로드된 웹 페이지 열기
2. 브라우저에서 Inspector 열기 (`http://localhost:5173`)
3. 목록에서 클라이언트 선택
4. 디버깅 시작!

Inspector가 페이지에 연결되고 모든 DevTools 기능을 사용할 수 있습니다:

- 콘솔 보기 및 상호작용
- DOM 검사
- 네트워크 요청 모니터링
- JavaScript 디버깅
- 그리고 더 많은 기능!

## Quick Start (React Native)

React Native 앱에서 Chrome Remote DevTools를 사용하는 방법입니다.

### 설치

React Native Inspector 패키지를 설치합니다:

<PackageManagerTabs command="install @ohah/chrome-remote-devtools-inspector-react-native" />

### Metro 설정

Metro 설정에 Redux DevTools Extension polyfill을 추가합니다:

```javascript
// metro.config.js
const { getDefaultConfig, mergeConfig } = require('@react-native/metro-config');
const { withChromeRemoteDevToolsRedux } = require('@ohah/chrome-remote-devtools-inspector-react-native/metro');

const config = getDefaultConfig(__dirname);

module.exports = withChromeRemoteDevToolsRedux(config);
```

### 앱에서 연결

React Native 앱에서 서버에 연결합니다:

```typescript
import ChromeRemoteDevToolsInspector from '@ohah/chrome-remote-devtools-inspector-react-native';

// 서버에 연결
ChromeRemoteDevToolsInspector.connect('localhost', 8080)
  .then(() => {
    console.log('✅ Connected to Chrome Remote DevTools');
  })
  .catch((error) => {
    console.error('❌ Failed to connect:', error);
  });
```

**참고**: Android 에뮬레이터를 사용하는 경우 `localhost` 대신 `10.0.2.2`를 사용하세요:

```typescript
const serverHost = Platform.OS === 'android' ? '10.0.2.2' : 'localhost';
ChromeRemoteDevToolsInspector.connect(serverHost, 8080);
```

### Redux DevTools 사용 (선택사항)

Redux를 사용하는 경우 미들웨어를 추가합니다:

```typescript
import { createReduxDevToolsMiddleware } from '@ohah/chrome-remote-devtools-inspector-react-native/redux';
import { createStore, applyMiddleware } from 'redux';

const store = createStore(
  rootReducer,
  applyMiddleware(
    createReduxDevToolsMiddleware({
      name: 'MyApp',
      instanceId: 'main-store'
    })
  )
);
```

### 스토리지 검사 (선택사항)

MMKV 또는 AsyncStorage를 검사하려면 등록합니다:

```typescript
import { registerMMKVDevTools } from '@ohah/chrome-remote-devtools-inspector-react-native';
import { createMMKV } from 'react-native-mmkv';

const storage = createMMKV({ id: 'user-storage' });
registerMMKVDevTools(storage);
```

```typescript
import { registerAsyncStorageDevTools } from '@ohah/chrome-remote-devtools-inspector-react-native';
import AsyncStorage from '@react-native-async-storage/async-storage';

registerAsyncStorageDevTools(AsyncStorage);
```

### 첫 디버깅 세션

1. Chrome Remote DevTools 서버 시작 (`bun run dev:server` 또는 `cargo run --bin chrome-remote-devtools-server -- --port 8080`)
2. Inspector 웹 버전 시작 (`bun run dev:inspector`)
3. React Native 앱 실행 및 서버에 연결
4. 브라우저에서 Inspector 열기 (`http://localhost:5173`)
5. 목록에서 클라이언트 선택
6. 디버깅 시작!

Inspector에서 다음 기능을 사용할 수 있습니다:

- 콘솔 보기 및 상호작용
- 네트워크 요청 모니터링
- JavaScript 디버깅
- Redux 상태 및 액션 추적 (Redux 사용 시)
- MMKV/AsyncStorage 검사 및 수정 (등록한 경우)
- 그리고 더 많은 기능!

## 다음 단계

- [아키텍처](/ko/architecture/overview) 알아보기
- [플레이그라운드](/ko/examples/) 체험하기
- [API 문서](/ko/api/server) 읽기
- [React Native 커스텀 CDP 도메인](/ko/api/domains/redux) 알아보기

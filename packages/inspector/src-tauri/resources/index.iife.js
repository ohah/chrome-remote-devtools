var ChromeRemoteDevTools=(function(exports){var __defProp$2=Object.defineProperty,__esmMin=(e,t)=>()=>(e&&(t=e(e=0)),t),__exportAll=(e,t)=>{let r={};for(var i in e)__defProp$2(r,i,{get:e[i],enumerable:!0});return t&&__defProp$2(r,Symbol.toStringTag,{value:`Module`}),r};const objectIds=new Map,objects=new Map,origins=new Map;let currentId=1;const getIdByObject=(e,t)=>{let r=objectIds.get(e);return r||(r=`${currentId++}`,objects.set(r,e),objectIds.set(e,r),origins.set(r,t),r)},getRealType=e=>{let t=/\[object\s+(.*)\]/.exec(Object.prototype.toString.call(e));return t&&t[1]||``},getSubType=e=>{try{if(e&&typeof e==`object`&&`nodeType`in e){let t=e;if([1,8,9].includes(t.nodeType))return`node`}}catch{}let t=getRealType(e).toLowerCase();return[`array`,`null`,`regexp`,`date`,`map`,`set`,`weakmap`,`weakset`,`error`,`proxy`,`promise`,`arraybuffer`,`iterator`,`generator`].includes(t)?t:``},getType=e=>({type:typeof e,subtype:getSubType(e)}),getPreview=(e,t={})=>{let{length:r=5,origin:i=e}=t;if(typeof e!=`object`||!e)return{overflow:!1,properties:[]};let a=Object.keys(e),o=[];return a.slice(0,r).forEach(e=>{let t;try{t=i[e]}catch{}let{type:r,subtype:a}=getType(t),s;if(r===`object`)if(a===`array`)s=`Array(${t.length})`;else if(a===`null`)s=`null`;else if([`date`,`regexp`].includes(a))s=String(t);else if(a===`node`)s=`#${t.nodeName}`;else try{s=t.constructor.name}catch{s=`Object`}else s=t===void 0?`undefined`:String(t);o.push({name:e,type:r,subtype:a,value:s})}),{overflow:a.length>r,properties:o}};function objectFormat(e,t={}){let{origin:r=e,preview:i=!1}=t,{type:a,subtype:o}=getType(e);if(a===`undefined`)return{type:a};if(a===`number`)return{type:a,value:e,description:String(e)};if(a===`string`||a===`boolean`)return{type:a,value:e};if(a===`symbol`)return{type:a,objectId:getIdByObject(e,r),description:String(e)};if(o===`null`)return{type:a,subtype:o,value:e};let s={type:a,subtype:o,objectId:getIdByObject(e,r)};if(a===`function`)s.className=`Function`,s.description=String(e),i&&(s.preview={type:a,subtype:o,description:String(e),...getPreview(e,{origin:r})});else if(o===`array`){s.className=`Array`;let t=e;s.description=`Array(${t.length})`,i&&(s.preview={type:a,subtype:o,description:`Array(${t.length})`,...getPreview(e,{length:100,origin:r})})}else if(o===`error`){s.className=`Error`;let t=e;s.description=t.stack||t.message,i&&(s.preview={type:a,subtype:o,description:t.stack||t.message,...getPreview(e,{origin:r})})}else if(o===`node`)try{s.className=s.description=e.constructor.name}catch{s.className=s.description=``}else{try{s.className=s.description=e.constructor.name}catch{s.className=s.description=``}i&&(s.preview={type:a,subtype:o,description:s.description,...getPreview(e,{origin:r})})}return s}function getObjectProperties(e){let{accessorPropertiesOnly:t,generatePreview:r,objectId:i,ownProperties:a}=e,o=objects.get(i);if(!o)return[];let s=origins.get(i),c=[],l=o.__proto__,u=l&&!a?l:o,d=Object.getOwnPropertyNames(u);for(let e of d){if(e===`__proto__`)continue;let i={name:e,value:void 0},o;try{o=s[e]}catch{}let d=Object.getOwnPropertyDescriptor(u,e);d&&(t&&!d.get&&!d.set||(i.configurable=d.configurable,i.enumerable=d.enumerable,i.writable=d.writable,i.isOwn=a?!0:l?Object.prototype.hasOwnProperty.call(l,e):!0,i.value=objectFormat(o,{preview:r}),c.push(i)))}return l&&c.push({name:`__proto__`,configurable:!0,enumerable:!1,isOwn:!!a,value:objectFormat(l,{origin:s})}),c}function objectRelease({objectId:e}){let t=objects.get(e);t&&(objects.delete(e),objectIds.delete(t),origins.delete(e))}function getObjectById(e){return objects.get(e)}var BaseDomain=class{socket;namespace=``;eventStorage;devtoolsWindow=null;eventQueue=[];constructor(e){this.socket=e.socket,this.eventStorage=e.eventStorage}setDevToolsWindow(e){this.devtoolsWindow=e,this.flushEventQueue(),this.sendStoredEventsFromIndexedDB()}flushEventQueue(){if(!(!this.devtoolsWindow||this.eventQueue.length===0))for(;this.eventQueue.length>0;){let e=this.eventQueue.shift();if(e)try{this.devtoolsWindow.postMessage(e,`*`)}catch(e){console.warn(`Failed to send queued postMessage event:`,e)}}}createCDPMessage(e){return{type:`CDP_MESSAGE`,message:JSON.stringify(e)}}sendViaPostMessage(e,t){try{return t.postMessage(e,`*`),!0}catch(e){return console.warn(`Failed to send postMessage event:`,e),!1}}getTargetWindow(){return typeof window>`u`?null:this.devtoolsWindow?this.devtoolsWindow:window.opener||(window===window.top?null:window.parent)}queueEvent(e){this.eventQueue.push(e)}saveEventToStorage(e,t){this.eventStorage&&this.eventStorage.saveEvent(e,t)}saveMessageToStorage(e){this.eventStorage&&this.eventStorage.saveMessage(e)}sendViaWebSocket(e){if(this.socket&&this.socket.readyState===WebSocket.OPEN){let t=JSON.stringify(e);return this.socket.send(t),!0}return!1}isCDPEvent(e){return typeof e==`object`&&!!e&&`method`in e&&typeof e.method==`string`&&e.id===void 0}async sendStoredEventsFromIndexedDB(){if(!(typeof window<`u`&&window.__CHROME_REMOTE_DEVTOOLS_REPLAY_MODE__)&&!(!this.devtoolsWindow||!this.eventStorage))try{let e=await this.eventStorage.getEvents();if(e.length>0){let t=e.filter(e=>{try{return!(JSON.parse(e.message).method||``).startsWith(`SessionReplay.`)}catch{return!0}});if(t.length>0){let e=100;for(let e=0;e<t.length;e+=100){let r=t.slice(e,e+100);for(let e of r)this.sendViaPostMessage(e,this.devtoolsWindow);await new Promise(e=>setTimeout(e,10))}}}}catch(e){console.error(`Failed to send stored messages to DevTools / 저장된 메시지를 DevTools로 전송 실패:`,e)}}enable(){}send(e){if(!(typeof window<`u`&&window.__CHROME_REMOTE_DEVTOOLS_REPLAY_MODE__)&&(this.isCDPMessage(e)&&this.saveMessageToStorage(e),!this.sendViaWebSocket(e)&&this.isCDPMessage(e))){let t=this.getTargetWindow(),r=this.createCDPMessage(e);t&&this.sendViaPostMessage(r,t)||this.queueEvent(r)}}isCDPMessage(e){return typeof e!=`object`||!e?!1:`method`in e||`id`in e}};const protocolMethods={Runtime:[`enable`,`evaluate`,`getProperties`,`releaseObject`,`callFunctionOn`],Page:[`enable`,`startScreencast`,`stopScreencast`,`getResourceTree`,`getResourceContent`],DOM:[`enable`,`getDocument`,`removeNode`,`requestChildNodes`,`requestNode`,`getOuterHTML`,`setOuterHTML`,`setAttributesAsText`,`setInspectedNode`,`pushNodesByBackendIdsToFrontend`,`performSearch`,`getSearchResults`,`discardSearchResults`,`getNodeForLocation`,`setNodeValue`,`getBoxModel`],CSS:[`enable`,`getComputedStyleForNode`,`getMatchedStylesForNode`,`getInlineStylesForNode`,`getBackgroundColors`,`getStyleSheetText`,`setStyleTexts`],Network:[`enable`,`getCookies`,`setCookie`,`deleteCookies`,`getResponseBody`],Console:[`enable`,`clearMessages`],DOMStorage:[`enable`,`disable`,`getDOMStorageItems`,`setDOMStorageItem`,`removeDOMStorageItem`,`clear`],Storage:[`getStorageKey`,`replayStoredEvents`],SessionReplay:[`enable`,`disable`,`sendEvent`,`replayStoredEvents`]};var protocol_default=protocolMethods;const Event={executionContextCreated:`Runtime.executionContextCreated`,consoleAPICalled:`Runtime.consoleAPICalled`,exceptionThrown:`Runtime.exceptionThrown`,screencastFrame:`Page.screencastFrame`,loadEventFired:`Page.loadEventFired`,domContentEventFired:`Page.domContentEventFired`,setChildNodes:`DOM.setChildNodes`,childNodeCountUpdated:`DOM.childNodeCountUpdated`,childNodeInserted:`DOM.childNodeInserted`,childNodeRemoved:`DOM.childNodeRemoved`,attributeModified:`DOM.attributeModified`,attributeRemoved:`DOM.attributeRemoved`,characterDataModified:`DOM.characterDataModified`,documentUpdated:`DOM.documentUpdated`,styleSheetAdded:`CSS.styleSheetAdded`,styleSheetChanged:`CSS.styleSheetChanged`,requestWillBeSent:`Network.requestWillBeSent`,responseReceivedExtraInfo:`Network.responseReceivedExtraInfo`,responseReceived:`Network.responseReceived`,loadingFinished:`Network.loadingFinished`,loadingFailed:`Network.loadingFailed`,messageAdded:`Console.messageAdded`,domStorageItemAdded:`DOMStorage.domStorageItemAdded`,domStorageItemRemoved:`DOMStorage.domStorageItemRemoved`,domStorageItemUpdated:`DOMStorage.domStorageItemUpdated`,domStorageItemsCleared:`DOMStorage.domStorageItemsCleared`,sessionReplayEventRecorded:`SessionReplay.eventRecorded`};var Runtime=class extends BaseDomain{namespace=`Runtime`;constructor(e){super(e),this.hookConsole()}enable(){this.send({method:Event.executionContextCreated,params:{context:{id:1,name:`top`,origin:location.origin}}})}evaluate({expression:e,generatePreview:t}){try{let r=window.eval(e);return window.$_=r,{result:objectFormat(r,{preview:t})}}catch(e){return{result:objectFormat(e,{preview:t})}}}getProperties(e){return{result:getObjectProperties(e)}}releaseObject(e){objectRelease(e)}callFunctionOn({functionDeclaration,objectId,arguments:args,silent}){try{const fun=eval(`(() => ${functionDeclaration})()`),resolvedArgs=(args||[]).map(e=>{if(`value`in e)return e.value;if(`objectId`in e&&e.objectId)return getObjectById(e.objectId)}),thisArg=objectId?getObjectById(objectId):null,result=fun.apply(thisArg,resolvedArgs);return silent?void 0:{result:objectFormat(result)}}catch(e){return silent?void 0:{result:objectFormat(e)}}}socketSend(e,t){this.send(t)}hookConsole(){let e=console,t={log:`log`,debug:`debug`,info:`info`,error:`error`,warn:`warning`,dir:`dir`,dirxml:`dirxml`,table:`table`,trace:`trace`,clear:`clear`,group:`startGroup`,groupCollapsed:`startGroupCollapsed`,groupEnd:`endGroup`};Object.keys(t).forEach(r=>{let i=e[r];console[r]=(...e)=>{i?.(...e);let a={method:Event.consoleAPICalled,params:{type:t[r],args:e.map(e=>objectFormat(e,{preview:!0})),executionContextId:1,timestamp:Date.now(),stackTrace:{callFrames:[`error`,`warn`,`trace`].includes(r)?this.getCallFrames():[]}}};this.socketSend(`console`,a)}})}getCallFrames(e){return e&&e.stack?e.stack.split(`
`).slice(1).map(e=>{let t=e.match(/at\s+(.+?)\s+\((.+?):(\d+):(\d+)\)/);return t&&t[2]&&t[3]&&t[4]?{functionName:t[1],url:t[2],lineNumber:parseInt(t[3],10),columnNumber:parseInt(t[4],10)}:{}}):[]}},Page=class extends BaseDomain{namespace=`Page`;frame=new Map;intervalTimer=null;enable(){let e=new XMLHttpRequest;e.$$requestType=`Document`,e.onload=()=>{this.frame.set(location.href,e.responseText)},e.onerror=()=>{this.frame.set(location.href,`Cannot get script source code`)},e.open(`GET`,location.href),e.send()}getResourceTree(){return{frameTree:{frame:{id:`1`,mimeType:`text/html`,securityOrigin:location.origin,url:location.href},resources:[]}}}getResourceContent({url:e}){return{content:this.frame.get(e)}}startScreencast(){let e=()=>{if(!document.hidden)try{let e=document.createElement(`canvas`);e.width=window.innerWidth,e.height=window.innerHeight;let t=e.getContext(`2d`);if(t){t.fillStyle=`#ffffff`,t.fillRect(0,0,e.width,e.height);let r=e.toDataURL(`image/jpeg`,.8);this.send({method:Event.screencastFrame,params:{data:r.replace(/^data:image\/jpeg;base64,/,``),metadata:{deviceHeight:window.innerHeight,deviceWidth:window.innerWidth,pageScaleFactor:1,offsetTop:0,scrollOffsetX:window.scrollX,scrollOffsetY:window.scrollY,timestamp:Date.now()}}})}}catch{}};e(),this.intervalTimer=setInterval(e,1e3)}stopScreencast(){this.intervalTimer&&=(clearInterval(this.intervalTimer),null)}};const nodeIdMap=new WeakMap,nodeMap=new Map;let nodeIdCounter=1;function getNodeId(e){let t=nodeIdMap.get(e);return t||(t=nodeIdCounter++,nodeIdMap.set(e,t),nodeMap.set(t,e)),t}function getNodeById(e){return nodeMap.get(e)||null}function findPreviousValidSibling(e){let t=e.previousSibling;for(;t&&!isValidNode(t);)t=t.previousSibling;return t}function isValidNode(e){return e.nodeType===Node.TEXT_NODE?(e.nodeValue||``).trim()!==``:!0}function filterNodes(e){return Array.from(e).filter(e=>isValidNode(e))}function collectNode(e,t=0){let r=getNodeId(e),i={nodeId:r,backendNodeId:r,nodeType:e.nodeType,nodeName:e.nodeName};if(e.nodeType===Node.ELEMENT_NODE){let r=e;i.localName=r.localName;let a=[];Array.from(r.attributes).forEach(e=>{a.push(e.name,e.value)}),i.attributes=a;let o=filterNodes(r.childNodes);if(i.childNodeCount=o.length,(t===-1||t>0)&&o.length>0){let e=t===-1?-1:t-1;i.children=o.map(t=>collectNode(t,e))}}else if(e.nodeType===Node.TEXT_NODE||e.nodeType===Node.COMMENT_NODE)i.nodeValue=e.nodeValue||``;else if(e.nodeType===Node.DOCUMENT_TYPE_NODE){let t=e;i.nodeValue=t.name||``,i.publicId=t.publicId||``,i.systemId=t.systemId||``}else if(e.nodeType===Node.DOCUMENT_NODE){let r=filterNodes(e.childNodes);if(i.childNodeCount=r.length,(t===-1||t>0)&&r.length>0){let e=t===-1?-1:t-1;i.children=r.map(t=>collectNode(t,e))}}return i}var Dom=class e extends BaseDomain{namespace=`DOM`;searchId=0;searchRet=new Map;currentSearchKey=``;registeredNodes=new WeakSet;enable(){let t=e=>{this.registeredNodes.add(e),e.nodeType===Node.ELEMENT_NODE&&e.childNodes.forEach(e=>{(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.TEXT_NODE||e.nodeType===Node.COMMENT_NODE)&&t(e)})};t(document),this.nodeObserver(),e.set$Function()}getDocument(e){let t=e?.depth??-1,r=e=>{this.registeredNodes.add(e),(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.DOCUMENT_NODE)&&e.childNodes.forEach(e=>{(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.TEXT_NODE||e.nodeType===Node.COMMENT_NODE||e.nodeType===Node.DOCUMENT_TYPE_NODE)&&r(e)})};r(document);let i=collectNode(document,t);return i.nodeType===Node.DOCUMENT_NODE&&(i.documentURL=document.URL||location.href,i.baseURL=document.baseURI||location.href),{root:i}}requestChildNodes({nodeId:e}){let t=getNodeById(e);if(!t){console.warn(`[CDP DOM] requestChildNodes: Node not found for nodeId: ${e}`);return}if(t.nodeType!==Node.ELEMENT_NODE){console.warn(`[CDP DOM] requestChildNodes: Node ${e} is not an element node (nodeType: ${t.nodeType})`);return}this.registeredNodes.add(t);let r=t;r.childNodes.forEach(e=>{e.nodeType===Node.ELEMENT_NODE&&this.registeredNodes.add(e)});let i=filterNodes(r.childNodes).map(e=>collectNode(e,0));this.send({method:Event.setChildNodes,params:{parentId:e,nodes:i}})}getOuterHTML({nodeId:e}){let t=getNodeById(e);return t?t.nodeType===Node.ELEMENT_NODE?{outerHTML:t.outerHTML}:(console.warn(`[CDP DOM] getOuterHTML: Node ${e} is not an element node (nodeType: ${t.nodeType})`),{outerHTML:``}):(console.warn(`[CDP DOM] getOuterHTML: Node not found for nodeId: ${e}`),{outerHTML:``})}setOuterHTML({nodeId:e,outerHTML:t}){let r=getNodeById(e);if(!r){console.warn(`[CDP DOM] setOuterHTML: Node not found for nodeId: ${e}`);return}if(r.nodeType!==Node.ELEMENT_NODE){console.warn(`[CDP DOM] setOuterHTML: Node ${e} is not an element node (nodeType: ${r.nodeType})`);return}r.outerHTML=t}setAttributesAsText({nodeId:e,text:t}){let r=getNodeById(e);if(!r){console.warn(`[CDP DOM] setAttributesAsText: Node not found for nodeId: ${e}`);return}if(r.nodeType!==Node.ELEMENT_NODE){console.warn(`[CDP DOM] setAttributesAsText: Node ${e} is not an element node (nodeType: ${r.nodeType})`);return}let i=r;t?t.split(` `).filter(e=>e).forEach(e=>{let[t,r]=e.split(`=`);t&&r&&i.setAttribute(t,r.replace(/["']/g,``))}):Array.from(i.attributes).forEach(e=>i.removeAttribute(e.name))}requestNode({objectId:e}){let t=getObjectById(e);if(!t)throw Error(`Node not found for objectId: ${e}`);return{nodeId:getNodeId(t)}}setInspectedNode({nodeId:e}){let t=getNodeById(e);if(!t){console.warn(`[CDP DOM] setInspectedNode: Node not found for nodeId: ${e}`),window.$0=null;return}window.$0=t}performSearch({query:e}){this.currentSearchKey=e;let t=++this.searchId,r=[];try{let t=document.querySelectorAll(e);r.push(...Array.from(t))}catch{}return this.searchRet.set(t,r),{searchId:t,resultCount:r.length}}getSearchResults({searchId:e,fromIndex:t,toIndex:r}){let i=this.searchRet.get(e)||[],a=t||0,o=r===void 0?i.length:r;return{nodeIds:i.slice(a,o).map(e=>getNodeId(e))}}discardSearchResults({searchId:e}){this.searchRet.delete(e)}getNodeForLocation({x:e,y:t}){let r=document.elementFromPoint(e,t);if(!r)throw Error(`Node not found at location (${e}, ${t})`);return{nodeId:getNodeId(r)}}setNodeValue({nodeId:e,value:t}){let r=getNodeById(e);if(!r){console.warn(`[CDP DOM] setNodeValue: Node not found for nodeId: ${e}`);return}r.nodeValue=t}getBoxModel({nodeId:e}){let t=getNodeById(e);if(!t)throw Error(`Node not found for nodeId: ${e}`);if(t.nodeType!==Node.ELEMENT_NODE)throw Error(`Node ${e} is not an element node (nodeType: ${t.nodeType})`);let r=t,i=r.getBoundingClientRect(),a=window.getComputedStyle(r),o=parseFloat(a.paddingTop)||0;parseFloat(a.paddingRight);let s=parseFloat(a.paddingBottom)||0;parseFloat(a.paddingLeft);let c=parseFloat(a.borderTopWidth)||0,l=parseFloat(a.borderRightWidth)||0,u=parseFloat(a.borderBottomWidth)||0,d=parseFloat(a.borderLeftWidth)||0,f=parseFloat(a.marginTop)||0,p=parseFloat(a.marginRight)||0,m=parseFloat(a.marginBottom)||0,h=parseFloat(a.marginLeft)||0;return{model:{content:[i.left,i.top,i.right,i.bottom],padding:[i.left,i.top+o,i.right,i.top+o+i.height-s],border:[i.left-d,i.top-c,i.right+l,i.bottom+u],margin:[i.left-d-h,i.top-c-f,i.right+l+p,i.bottom+u+m],width:i.width,height:i.height}}}removeNode({nodeId:e}){let t=getNodeById(e);if(!t){console.warn(`[CDP DOM] removeNode: Node not found for nodeId: ${e}`);return}t.parentNode&&t.parentNode.removeChild(t)}pushNodesByBackendIdsToFrontend({backendNodeIds:e}){return{nodeIds:e.map(e=>{let t=getNodeById(e);return t?getNodeId(t):0}).filter(e=>e>0)}}nodeObserver(){new MutationObserver(e=>{e.forEach(e=>{if(e.type===`childList`)e.addedNodes.forEach(t=>{if(isValidNode(t)){if(t.nodeType===Node.ELEMENT_NODE){let r=e.target,i=r?getNodeId(r):0;if(i>0&&this.registeredNodes.has(r)){let e=findPreviousValidSibling(t),r=e?getNodeId(e):0;this.send({method:Event.childNodeInserted,params:{parentNodeId:i,previousNodeId:r,node:collectNode(t,0)}}),this.registeredNodes.add(t)}}else if(t.nodeType===Node.TEXT_NODE||t.nodeType===Node.COMMENT_NODE){let r=e.target,i=r?getNodeId(r):0;if(i>0&&this.registeredNodes.has(r)){let e=findPreviousValidSibling(t),r=e?getNodeId(e):0;this.send({method:Event.childNodeInserted,params:{parentNodeId:i,previousNodeId:r,node:collectNode(t,0)}}),this.registeredNodes.add(t)}}}}),e.removedNodes.forEach(t=>{if(isValidNode(t)&&(t.nodeType===Node.ELEMENT_NODE||t.nodeType===Node.TEXT_NODE||t.nodeType===Node.COMMENT_NODE)){let r=e.target,i=r?getNodeId(r):0,a=getNodeId(t);i>0&&a>0&&this.registeredNodes.has(r)&&this.send({method:Event.childNodeRemoved,params:{parentNodeId:i,nodeId:a}}),this.registeredNodes.delete(t)}});else if(e.type===`attributes`){let t=e.target;this.send({method:Event.attributeModified,params:{nodeId:getNodeId(t),name:e.attributeName||``,value:t.getAttribute(e.attributeName||``)||``}})}else e.type===`characterData`&&this.send({method:Event.characterDataModified,params:{nodeId:getNodeId(e.target),characterData:e.target.nodeValue||``}})})}).observe(document,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0})}static set$Function(){typeof window.$!=`function`&&(window.$=e=>document.querySelector(e)),typeof window.$$!=`function`&&(window.$$=e=>document.querySelectorAll(e)),typeof window.$x!=`function`&&(window.$x=e=>{let t=document.evaluate(e,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),r=[];for(let e=0;e<t.snapshotLength;e++){let i=t.snapshotItem(e);i&&r.push(i)}return r})}};function matchesSelector(e,t){try{return e.matches(t)}catch{return!1}}const styleSheetIdMap=new WeakMap,inlineStyleSheetIds=new Map,inlineStyleNodeIds=new Map;function getStyleSheetId(e=``){if(e){let t=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);t=(t<<5)-t+i,t&=t}return`stylesheet-${Math.abs(t)}`}return`stylesheet-inline-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function getStyleSheetIdForSheet(e){let t=styleSheetIdMap.get(e);return t||(t=getStyleSheetId(e.href||``),styleSheetIdMap.set(e,t)),t}function getStyleSheets(){return Array.from(document.styleSheets).forEach(e=>{styleSheetIdMap.has(e)||getStyleSheetIdForSheet(e)}),document.styleSheets}function formatStyle(e){let t={};for(let r=0,i=e.length;r<i;r++){let i=e[r];if(i){let r=e[i]||e.getPropertyValue(i);r&&(t[i]=r.trim())}}return t}function processCssRules(e,t,r,i,a,o=0){Array.from(e).forEach(e=>{a.totalRules++;let s=e.selectorText;if(s){let o=e;a.styleRules++,a.allSelectors.push(s);let c=!1;try{c=matchesSelector(t,s)}catch{return}if(!c)return;a.matchedRules++;let l=calculateSelectorPriority(s);i.push({selectorText:s,style:o.style,styleSheetId:r,priority:l})}else if(e.type===CSSRule.MEDIA_RULE){let s=e;try{s.cssRules&&processCssRules(s.cssRules,t,r,i,a,o+1)}catch{}}else if(e.type===16||e.name===`layer`)try{let s=e.cssRules;s&&processCssRules(s,t,r,i,a,o+1)}catch{}else if(e.cssRules)try{processCssRules(e.cssRules,t,r,i,a,o+1)}catch{}})}function getMatchedCssRules(e){let t=[],r={totalRules:0,styleRules:0,matchedRules:0,allSelectors:[]};return Array.from(document.styleSheets).forEach(i=>{let a=getStyleSheetIdForSheet(i),o=null;try{if(o=i.cssRules,!o)return}catch{return}processCssRules(o,e,a,t,r,0)}),t.sort((e,t)=>t.priority-e.priority).map(({priority:e,...t})=>t)}function calculateSelectorPriority(e){let t=(e.match(/#/g)||[]).length,r=(e.match(/\./g)||[]).length,i=e.split(/[#.\s>+~[\]]/).filter(e=>e&&/^[a-zA-Z]/.test(e)).length;return t*1e3+r*100+i}function getOrCreateInlineStyleSheetId(e){let t=inlineStyleSheetIds.get(e);return t||(t=getStyleSheetId(),inlineStyleSheetIds.set(e,t),inlineStyleNodeIds.set(t,e),t)}function getInlineStyleNodeId(e){return inlineStyleNodeIds.get(e)}const styleSheetTexts=new Map;async function getStyleSheetText(e){if(styleSheetTexts.has(e))return styleSheetTexts.get(e);if(getInlineStyleNodeId(e))return``;for(let t=0;t<document.styleSheets.length;t++){let r=document.styleSheets[t];if(r&&getStyleSheetIdForSheet(r)===e){let t=r.href;if(t)try{let r=await(await fetch(t)).text();return styleSheetTexts.set(e,r),r}catch{return``}else{let t=Array.from(r.cssRules).map(e=>e.cssText).join(`
`);return styleSheetTexts.set(e,t),t}}}return``}function getShorthandEntries(e){let t=`background.font.border.margin.padding.animation.transition.flex.flex-flow.grid.grid-area.grid-column.grid-row.grid-template.gap.place-content.place-items.place-self.outline.list-style.border-radius.border-color.border-style.border-width.border-top.border-right.border-bottom.border-left.border-block.border-inline.columns.column-rule`.split(`.`),r=[];return t.forEach(t=>{let i=e[t];i&&r.push({name:t,value:i})}),r}function toCssProperties(e){return Object.entries(e).map(([e,t])=>({name:e,value:t}))}function removeCssCommentsPreserveStringsAndUrls(e){let t=``,r=!1,i=null,a=!1,o=!1;for(let s=0;s<e.length;s++){let c=e[s],l=s+1<e.length?e[s+1]:``;if(r){c===`*`&&l===`/`&&(r=!1,s++);continue}if(i){t+=c,o?o=!1:c===`\\`?o=!0:c===i&&(i=null);continue}if(a){t+=c,!i&&(c===`"`||c===`'`)?i=c:c===`)`&&(a=!1);continue}if(c===`/`&&l===`*`){r=!0,s++;continue}if(c===`"`||c===`'`){i=c,t+=c;continue}if((c===`u`||c===`U`)&&e.slice(s,s+4).toLowerCase()===`url(`){a=!0,t+=`url(`,s+=3;continue}t+=c}return t}function parseCssText(e){let t=removeCssCommentsPreserveStringsAndUrls(e).split(`;`),r={};return t.forEach(e=>{let t=e.trim();if(!t)return;let i=t.indexOf(`:`);if(i>0){let e=t.slice(0,i).trim();r[e]=t.slice(i+1).trim()}}),r}function getLineCount(e){return e.split(`
`).length}function getLastLine(e){let t=e.split(`
`);return t[t.length-1]||``}function calculatePropertyRange(e,t,r){let i=e.split(`
`),a=0,o=0,s=0,c=0,l=``,u=r.trim().replace(/\s+/g,` `),d=[`${t}: ${r}`,`${t}:${r}`,`${t}: ${u}`,`${t}:${u}`];for(let e=0;e<i.length;e++){let u=i[e];if(!u)continue;for(let t of d){let r=u.indexOf(t);if(r!==-1)return l=t,a=e,o=r,s=e,c=r+l.length,{startLine:a,startColumn:o,endLine:s,endColumn:c,text:l}}let f=RegExp(`${t.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`)}\\s*:\\s*${r.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`).replace(/\s+/g,`\\s+`)}`,`i`),p=u.match(f);if(p&&p.index!==void 0)return l=p[0],a=e,o=p.index,s=e,c=p.index+l.length,{startLine:a,startColumn:o,endLine:s,endColumn:c,text:l}}return{startLine:a,startColumn:o,endLine:s,endColumn:c,text:l}}function formatMatchedCssRule(e,t){let{selectorText:r,style:i,styleSheetId:a}=t,o=r.split(`,`).map(e=>e.trim()).filter(e=>e.length>0),s=getShorthandEntries(i),c=formatStyle(i),l=[];return o.forEach((t,r)=>{try{matchesSelector(e,t)&&l.push(r)}catch{}}),l.length===0&&o.length>0&&o.forEach((e,t)=>l.push(t)),{matchingSelectors:l,rule:{styleSheetId:a,origin:`regular`,selectorList:{selectors:o.map(e=>({text:e})),text:r},style:{cssProperties:toCssProperties(c),shorthandEntries:s}}}}function calculateTextPosition(e,t){let r=e.split(`
`),i=0,a=0;for(let e=0;e<=t.endLine;e++){let o=(r[e]||``).length+1;e<t.startLine?i+=o:e===t.startLine&&(i+=t.startColumn),e<t.endLine?a+=o:e===t.endLine&&(a+=t.endColumn)}return{start:i,end:a}}var CSS=class extends BaseDomain{namespace=`CSS`;styleSheetObserver=null;processedStyleSheets=new WeakSet;constructor(e){super(e)}validateElementNode(e){let t=getNodeById(e);return!t||t.nodeType!==Node.ELEMENT_NODE||!document.contains(t)?null:t}sendStyleSheetAdded(e){if(this.processedStyleSheets.has(e))return;this.processedStyleSheets.add(e);let t=getStyleSheetIdForSheet(e),r=e.href||``,i=!r;this.send({method:Event.styleSheetAdded,params:{header:{styleSheetId:t,frameId:`main-frame`,isInline:i,sourceURL:i?void 0:r,origin:`regular`,startColumn:0,startLine:0,endColumn:0,endLine:0}}})}enable(){let e=getStyleSheets();Array.from(e).forEach(e=>{this.sendStyleSheetAdded(e)}),this.styleSheetObserver=new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{if(e.nodeType===Node.ELEMENT_NODE){let t=e;(t.tagName===`STYLE`||t.tagName===`LINK`&&t.getAttribute(`rel`)===`stylesheet`)&&setTimeout(()=>{let e=getStyleSheets();Array.from(e).forEach(e=>{this.processedStyleSheets.has(e)||this.sendStyleSheetAdded(e)})},0)}})})}),this.styleSheetObserver.observe(document.head,{childList:!0,subtree:!0}),document.body&&this.styleSheetObserver.observe(document.body,{childList:!0,subtree:!0})}disable(){this.styleSheetObserver&&=(this.styleSheetObserver.disconnect(),null)}getComputedStyleForNode({nodeId:e}){let t=this.validateElementNode(e);return t?{computedStyle:toCssProperties(formatStyle(window.getComputedStyle(t)))}:{computedStyle:[]}}getInlineStylesForNode({nodeId:e}){let t=this.validateElementNode(e);if(!t)return{};let r=t.style,i={cssProperties:[],shorthandEntries:[]};if(r&&r.length>0){i.styleSheetId=getOrCreateInlineStyleSheetId(e);let a=t.getAttribute(`style`)||``;i.cssText=a,a&&(i.range={startLine:0,startColumn:0,endLine:getLineCount(a)-1,endColumn:getLastLine(a).length});let o=toCssProperties(parseCssText(a)).map(({name:e,value:t})=>{let i=calculatePropertyRange(a,e,t),o=r[e],s=o!==void 0&&o!==``;return{name:e,value:t,text:i.text,range:{startLine:i.startLine,endLine:i.endLine,startColumn:i.startColumn,endColumn:i.endColumn},disabled:!1,implicit:!1,parsedOk:s}}),s=formatStyle(r),c=new Set(o.map(e=>e.name)),l=toCssProperties(Object.fromEntries(Object.entries(s).filter(([e])=>!c.has(e))));i.shorthandEntries=getShorthandEntries(r),i.cssProperties=[...o,...l]}return{inlineStyle:i}}collectInheritedStyles(e){let t=[],r=e.parentElement;for(;r&&r!==document.documentElement;){let e=getNodeId(r);if(e){let i=getMatchedCssRules(r).map(e=>formatMatchedCssRule(r,e)),a=this.getInlineStylesForNode({nodeId:e});(i.length>0||a.inlineStyle)&&t.push({inlineStyle:a.inlineStyle,matchedCSSRules:i})}r=r.parentElement}if(document.documentElement&&document.documentElement!==e){let e=getNodeId(document.documentElement);if(e){let r=getMatchedCssRules(document.documentElement).map(e=>formatMatchedCssRule(document.documentElement,e)),i=this.getInlineStylesForNode({nodeId:e});(r.length>0||i.inlineStyle)&&t.push({inlineStyle:i.inlineStyle,matchedCSSRules:r})}}return t}getMatchedStylesForNode({nodeId:e}){let t=this.validateElementNode(e);if(!t)return{matchedCSSRules:[]};let r=getMatchedCssRules(t).map(e=>formatMatchedCssRule(t,e)),i=this.getInlineStylesForNode({nodeId:e}),a=this.collectInheritedStyles(t);return{matchedCSSRules:r,...i,inherited:a.length>0?a:void 0}}getBackgroundColors({nodeId:e}){let t=this.validateElementNode(e);if(!t)return{backgroundColors:[]};let r=formatStyle(window.getComputedStyle(t));return{backgroundColors:r[`background-color`]?[r[`background-color`]]:[],computedFontSize:r[`font-size`],computedFontWeight:r[`font-weight`]}}async getStyleSheetText({styleSheetId:e}){let t=getInlineStyleNodeId(e);if(t){let e=getNodeById(t);if(e&&e.nodeType===Node.ELEMENT_NODE)return{text:e.getAttribute(`style`)||``}}for(let t=0;t<document.styleSheets.length;t++){let r=document.styleSheets[t];if(r&&getStyleSheetIdForSheet(r)===e&&!r.href)try{let e=r.cssRules;if(e)return{text:Array.from(e).map(e=>e.cssText).join(`
`)}}catch{return{text:``}}}return{text:await getStyleSheetText(e)}}setStyleTexts({edits:e}){return{styles:e.map(e=>{let{styleSheetId:t,text:r,range:i}=e,a=getInlineStyleNodeId(t);if(a){let e=getNodeById(a);if(e&&e.nodeType===Node.ELEMENT_NODE){let o=e,s=o.getAttribute(`style`)||``;if(i){let{start:e,end:t}=calculateTextPosition(s,i);s=s.slice(0,e)+r+s.slice(t)}else s=r;o.setAttribute(`style`,s);let c=this.getInlineStylesForNode({nodeId:a}).inlineStyle;return c&&c.styleSheetId?{styleSheetId:c.styleSheetId,cssText:c.cssText,range:c.range,cssProperties:c.cssProperties,shorthandEntries:c.shorthandEntries}:{styleSheetId:t}}}return{styleSheetId:t}})}}};function getAbsolutePath(e){if(!e||typeof e!=`string`)return``;let t=document.createElement(`a`);return t.href=e,t.href}function key2UpperCase(e){return e.replace(/^\S|-[a-z]/g,e=>e.toUpperCase())}const getTimestamp=()=>Date.now()/1e3;var Network=class e extends BaseDomain{namespace=`Network`;requestId=0;responseData=new Map;xhrMetadata=new WeakMap;constructor(e){super(e),this.hookXhr(),this.hookFetch()}enable(){this.reportImageNetwork()}getResponseBody({requestId:e}){let t=this.responseData.get(e);return t&&typeof t.body==`string`?{body:t.body,base64Encoded:!1}:{body:``,base64Encoded:!1}}getCookies(){let e=[];return document.cookie&&document.cookie.split(`;`).forEach(t=>{let[r,i]=t.split(`=`).map(e=>e.trim());r&&i&&e.push({name:r,value:i,domain:location.hostname,path:`/`})}),{cookies:e}}setCookie({name:e,value:t,domain:r,path:i,httpOnly:a,secure:o,sameSite:s}){try{let c=`${e}=${t}`;return r&&(c+=`; domain=${r}`),i&&(c+=`; path=${i}`),a&&(c+=`; httpOnly`),o&&(c+=`; secure`),s&&(c+=`; sameSite=${s}`),document.cookie=c,{success:!0}}catch{return{success:!1}}}deleteCookies({name:e,domain:t,path:r}){e?document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${r||`/`}; domain=${t||location.hostname}`:document.cookie.split(`;`).forEach(e=>{let t=e.split(`=`)[0]?.trim();t&&(document.cookie=`${t}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/`)})}hookXhr(){let t=this,r=XMLHttpRequest.prototype.open,i=XMLHttpRequest.prototype.send,a=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.open=function(e,i,...a){return t.xhrMetadata.set(this,{method:e,url:typeof i==`string`?i:i.toString(),headers:{}}),r.apply(this,[e,i,...a])},XMLHttpRequest.prototype.setRequestHeader=function(e,r){let i=t.xhrMetadata.get(this);return i&&(i.headers=i.headers||{},i.headers[e]=r),a.apply(this,[e,r])},XMLHttpRequest.prototype.send=function(r){let a=t.xhrMetadata.get(this);if(!a)return i.apply(this,[r]);let{method:o,url:s,headers:c={}}=a,l=`${t.requestId++}`,u={requestId:l,url:s,method:o,headers:{...e.getDefaultHeaders(),...c}};return r&&(u.postData=typeof r==`string`?r:JSON.stringify(r)),t.socketSend({method:Event.requestWillBeSent,params:{requestId:l,loaderId:l,documentURL:location.href,request:{url:s,method:o,headers:u.headers,postData:u.postData},timestamp:getTimestamp(),type:`XHR`}}),this.addEventListener(`load`,()=>{let r={requestId:l,url:s,status:this.status,statusText:this.statusText,headers:e.formatResponseHeader(this.getAllResponseHeaders()),mimeType:this.getResponseHeader(`content-type`)||`text/plain`,body:this.responseText};t.responseData.set(l,r),t.socketSend({method:Event.responseReceived,params:{requestId:l,loaderId:l,timestamp:getTimestamp(),type:`XHR`,response:{url:s,status:this.status,statusText:this.statusText,headers:r.headers,mimeType:r.mimeType,body:r.body}}});let i=this.getResponseHeader(`content-length`),a=e.calculateEncodedDataLength(i,this.responseText);t.socketSend({method:Event.loadingFinished,params:{requestId:l,timestamp:getTimestamp(),encodedDataLength:a}})}),this.addEventListener(`error`,()=>{t.socketSend({method:Event.loadingFailed,params:{requestId:l,timestamp:getTimestamp(),errorText:`Network error`,canceled:!1}})}),i.apply(this,[r])}}hookFetch(){let t=this,r=window.fetch;window.fetch=function(i,a){let o=typeof i==`string`?i:i instanceof URL?i.toString():i.url,s=a?.method||`GET`,c=`${t.requestId++}`,l=e.getDefaultHeaders();a?.headers&&(a.headers instanceof Headers?a.headers.forEach((e,t)=>{l[t]=e}):Array.isArray(a.headers)?a.headers.forEach(([e,t])=>{l[e]=t}):l={...l,...a.headers}),i instanceof Request&&i.headers&&i.headers.forEach((e,t)=>{l[t]=e});let u={requestId:c,url:o,method:s,headers:l};return a?.body&&(u.postData=typeof a.body==`string`?a.body:JSON.stringify(a.body)),t.socketSend({method:Event.requestWillBeSent,params:{requestId:c,loaderId:c,documentURL:location.href,request:{url:o,method:s,headers:u.headers,postData:u.postData},timestamp:getTimestamp(),type:`Fetch`}}),r(i,a).then(r=>{let i=r.clone(),a=``;return r.headers.forEach((e,t)=>{a+=`${t}: ${e}\r\n`}),i.text().then(i=>{let s={requestId:c,url:o,status:r.status,statusText:r.statusText,headers:e.formatResponseHeader(a),mimeType:r.headers.get(`content-type`)||`text/plain`,body:i};t.responseData.set(c,s),t.socketSend({method:Event.responseReceived,params:{requestId:c,loaderId:c,timestamp:getTimestamp(),type:`Fetch`,response:{url:o,status:r.status,statusText:r.statusText,headers:s.headers,mimeType:s.mimeType,body:s.body}}});let l=r.headers.get(`content-length`),u=e.calculateEncodedDataLength(l,i);t.socketSend({method:Event.loadingFinished,params:{requestId:c,timestamp:getTimestamp(),encodedDataLength:u}})}).catch(i=>{console.warn(`Failed to read response body / 응답 본문 읽기 실패:`,i);let s={requestId:c,url:o,status:r.status,statusText:r.statusText,headers:e.formatResponseHeader(a),mimeType:r.headers.get(`content-type`)||`text/plain`,body:``};t.responseData.set(c,s),t.socketSend({method:Event.responseReceived,params:{requestId:c,loaderId:c,timestamp:getTimestamp(),type:`Fetch`,response:{url:o,status:r.status,statusText:r.statusText,headers:s.headers,mimeType:s.mimeType,body:``}}}),t.socketSend({method:Event.loadingFinished,params:{requestId:c,timestamp:getTimestamp(),encodedDataLength:0}})}),r}).catch(e=>{throw t.socketSend({method:Event.loadingFailed,params:{requestId:c,timestamp:getTimestamp(),errorText:e.message,canceled:!1}}),e})}}reportImageNetwork(){document.querySelectorAll(`img`).forEach(t=>{if(t.src&&!t.complete){let r=`${this.requestId++}`;this.socketSend({method:Event.requestWillBeSent,params:{requestId:r,loaderId:r,documentURL:location.href,request:{url:t.src,method:`GET`,headers:e.getDefaultHeaders()},timestamp:getTimestamp(),type:`Image`}}),t.addEventListener(`load`,()=>{this.socketSend({method:Event.responseReceived,params:{requestId:r,loaderId:r,timestamp:getTimestamp(),type:`Image`,response:{url:t.src,status:200,statusText:`OK`,headers:{},mimeType:`image/*`,body:void 0}}}),this.socketSend({method:Event.loadingFinished,params:{requestId:r,timestamp:getTimestamp(),encodedDataLength:0}})}),t.addEventListener(`error`,()=>{this.socketSend({method:Event.loadingFailed,params:{requestId:r,timestamp:getTimestamp(),errorText:`Failed to load image`,canceled:!1}})})}})}socketSend(e){this.send(e)}static formatResponseHeader(e){let t={},r=e.split(`
`);for(let e of r){let r=e.trim();if(r===``)continue;let[i,a]=r.split(`:`,2);i&&(t[key2UpperCase(i.trim())]=a?a.trim():``)}return t}static getDefaultHeaders(){let e={"User-Agent":navigator.userAgent};return document.cookie&&(e.Cookie=document.cookie),e}static calculateEncodedDataLength(e,t){if(e){let t=parseInt(e,10);if(!isNaN(t)&&t>=0)return t}return new Blob([t]).size}},Console=class extends BaseDomain{namespace=`Console`;isEnable=!1;enable(){this.isEnable=!0}clearMessages(){}},StorageObserver=class{listeners=new Map;originalMethods=new WeakMap;subscribe(e,t){return this.listeners.has(e)||(this.listeners.set(e,new Set),this.hookStorage(e)),this.listeners.get(e).add(t),()=>{let r=this.listeners.get(e);r&&(r.delete(t),r.size===0&&(this.unhookStorage(e),this.listeners.delete(e)))}}hookStorage(e){if(this.originalMethods.has(e))return;let t=e.setItem.bind(e),r=e.removeItem.bind(e),i=e.clear.bind(e);this.originalMethods.set(e,{setItem:t,removeItem:r,clear:i}),e.setItem=(t,r)=>{let i=this.originalMethods.get(e);if(!i)return;let a=e.getItem(t),o=a!==null;i.setItem(t,r),this.notify(e,{type:o?`updated`:`added`,key:t,oldValue:a,newValue:r})},e.removeItem=t=>{let r=this.originalMethods.get(e);if(!r)return;let i=e.getItem(t);i!==null&&(r.removeItem(t),this.notify(e,{type:`removed`,key:t,oldValue:i,newValue:null}))},e.clear=()=>{let t=this.originalMethods.get(e);t&&(t.clear(),this.notify(e,{type:`cleared`,key:null,oldValue:null,newValue:null}))}}unhookStorage(e){let t=this.originalMethods.get(e);t&&(e.setItem=t.setItem,e.removeItem=t.removeItem,e.clear=t.clear,this.originalMethods.delete(e))}notify(e,t){let r=this.listeners.get(e);r&&r.forEach(e=>{try{e(t)}catch{}})}};const storageObserver=new StorageObserver;var DOMStorage=class extends BaseDomain{namespace=`DOMStorage`;isEnable=!1;unsubscribeFunctions=[];enable(){if(this.isEnable)return;this.isEnable=!0,this.setupStorageListeners();let e=location.origin,t={isLocalStorage:!0,storageKey:e,securityOrigin:e},r={isLocalStorage:!1,storageKey:e,securityOrigin:e};this.getDOMStorageItems({storageId:t}).entries.forEach(([e,r])=>{this.send({method:Event.domStorageItemAdded,params:{storageId:t,key:e,newValue:r}})}),this.getDOMStorageItems({storageId:r}).entries.forEach(([e,t])=>{this.send({method:Event.domStorageItemAdded,params:{storageId:r,key:e,newValue:t}})})}disable(){this.isEnable&&(this.isEnable=!1,this.removeStorageListeners())}getDOMStorageItems({storageId:e}){let t=e.isLocalStorage?localStorage:sessionStorage,r=[];for(let e=0;e<t.length;e++){let i=t.key(e);if(i!==null){let e=t.getItem(i);e!==null&&r.push([i,e])}}return{entries:r}}setDOMStorageItem({storageId:e,key:t,value:r}){(e.isLocalStorage?localStorage:sessionStorage).setItem(t,r)}removeDOMStorageItem({storageId:e,key:t}){(e.isLocalStorage?localStorage:sessionStorage).removeItem(t)}clear({storageId:e}){(e.isLocalStorage?localStorage:sessionStorage).clear()}setupStorageListeners(){let e=storageObserver.subscribe(localStorage,e=>{if(!this.isEnable)return;let t={isLocalStorage:!0,storageKey:location.origin,securityOrigin:location.origin};this.handleStorageChange(t,e)}),t=storageObserver.subscribe(sessionStorage,e=>{if(!this.isEnable)return;let t={isLocalStorage:!1,storageKey:location.origin,securityOrigin:location.origin};this.handleStorageChange(t,e)});this.unsubscribeFunctions.push(e,t)}handleStorageChange(e,t){if(!this.isEnable)return;let r=null;switch(t.type){case`added`:if(t.key===null||t.newValue===null)return;r={method:Event.domStorageItemAdded,params:{storageId:e,key:t.key,newValue:t.newValue}};break;case`updated`:if(t.key===null||t.oldValue===null||t.newValue===null)return;r={method:Event.domStorageItemUpdated,params:{storageId:e,key:t.key,oldValue:t.oldValue,newValue:t.newValue}};break;case`removed`:if(t.key===null)return;r={method:Event.domStorageItemRemoved,params:{storageId:e,key:t.key}};break;case`cleared`:r={method:Event.domStorageItemsCleared,params:{storageId:e}};break;default:return}r&&this.send(r)}removeStorageListeners(){this.unsubscribeFunctions.forEach(e=>e()),this.unsubscribeFunctions=[]}},Storage=class extends BaseDomain{namespace=`Storage`;getStorageKey(e){return{storageKey:location.origin}}async replayStoredEvents(){if(!this.eventStorage||!this.socket)return console.warn(`Cannot replay stored messages: eventStorage or socket not available / 저장된 메시지 재생 불가: eventStorage 또는 socket이 사용 불가`),{success:!1};try{let e=await this.eventStorage.getEvents();if(e.length===0)return{success:!0,count:0};let t=e.filter(e=>{try{return!(JSON.parse(e.message).method||``).startsWith(`SessionReplay.`)}catch{return!0}});if(t.length===0)return{success:!0,count:0};let r=100,i=0;for(let e=0;e<t.length;e+=100){let r=t.slice(e,e+100);for(let e of r)if(this.socket.readyState===WebSocket.OPEN)try{let t=JSON.parse(e.message);this.socket.send(JSON.stringify(t)),i++}catch(e){console.warn(`Failed to parse stored message / 저장된 메시지 파싱 실패:`,e)}else console.warn(`WebSocket not open, cannot send message / WebSocket이 열려있지 않아 메시지 전송 불가`);await new Promise(e=>setTimeout(e,10))}return{success:!0,count:i}}catch(e){return console.error(`Failed to replay stored messages / 저장된 메시지 재생 실패:`,e),{success:!1}}}},SessionReplay=class extends BaseDomain{namespace=`SessionReplay`;isEnabled=!1;constructor(e){super(e)}enable(){this.isEnabled=!0,this.replayStoredEvents().catch(e=>{console.error(`Failed to replay stored SessionReplay events / 저장된 SessionReplay 이벤트 재생 실패:`,e)})}setDevToolsWindow(e){this.devtoolsWindow=e,this.isEnabled?this.replayStoredEvents().then(()=>{super.setDevToolsWindow(e)}).catch(t=>{console.error(`Failed to replay stored SessionReplay events after DevTools ready / DevTools 준비 후 저장된 SessionReplay 이벤트 재생 실패:`,t),super.setDevToolsWindow(e)}):super.setDevToolsWindow(e)}disable(){this.isEnabled=!1}sendEvent(e){if(!this.isEnabled)return{success:!1};let t=e?.events||[];return t.length===0?{success:!1}:(this.send({method:Event.sessionReplayEventRecorded,params:{events:t}}),{success:!0})}async replayStoredEvents(){if(!this.eventStorage)return{success:!1};try{let e=(await this.eventStorage.getEvents()).filter(e=>{try{return JSON.parse(e.message).method===`SessionReplay.eventRecorded`}catch{return!1}});if(e.length===0)return{success:!0,count:0};let t=0;for(let r of e)try{let e=JSON.parse(r.message),i=e.params;if(i&&Array.isArray(i.events)&&i.events.length>0){if(this.socket&&this.socket.readyState===WebSocket.OPEN)this.socket.send(JSON.stringify(e)),t++;else if(!this.socket)if(this.devtoolsWindow)try{this.devtoolsWindow.postMessage(r,`*`),t++}catch(e){console.warn(`[SessionReplay] Failed to send event via postMessage / [SessionReplay] postMessage로 이벤트 전송 실패:`,e)}else return{success:!1};await new Promise(e=>setTimeout(e,10))}else console.warn(`[SessionReplay] Event params invalid or empty events array / [SessionReplay] 이벤트 params가 유효하지 않거나 events 배열이 비어있음:`,i)}catch(e){console.warn(`[SessionReplay] Failed to parse stored message / [SessionReplay] 저장된 메시지 파싱 실패:`,e)}return{success:!0,count:t}}catch(e){return console.error(`Failed to replay stored events / 저장된 이벤트 재생 실패:`,e),{success:!1}}}},ChromeDomain=class{protocol={};domains=[];eventStorage;constructor(e){this.eventStorage=e.eventStorage,this.registerProtocol(e)}setDevToolsWindow(e){this.domains.forEach(t=>{t.setDevToolsWindow(e)})}execute(e={}){let{id:t,method:r,params:i}=e;if(!r)return{id:t};this.eventStorage&&this.eventStorage.saveMessage({id:t,method:r,params:i});let a=this.protocol[r];if(typeof a!=`function`)return{id:t};try{let e=a(i);return e instanceof Promise?e.then(e=>({id:t,result:e})).catch(e=>({id:t,error:{code:-32e3,message:e instanceof Error?e.message:String(e)}})):{id:t,result:e}}catch(e){return{id:t,error:{code:-32e3,message:e instanceof Error?e.message:String(e)}}}}registerProtocol(e){let t=[new Runtime(e),new Page(e),new Dom(e),new CSS(e),new Network(e),new Console(e),new DOMStorage(e),new Storage(e),new SessionReplay(e)];this.domains=t,t.forEach(e=>{let{namespace:t}=e,r=protocol_default[t];r&&r.forEach(r=>{let i=`${t}.${r}`,a=e[r];typeof a==`function`&&(this.protocol[i]=a.bind(e))})})}getEventStorage(){return this.eventStorage}},compression_exports=__exportAll({compress:()=>compress,decompress:()=>decompress,isCompressed:()=>isCompressed,isCompressionSupported:()=>isCompressionSupported});function isCompressionSupported(){return typeof CompressionStream<`u`&&typeof DecompressionStream<`u`}async function compress(e){if(!isCompressionSupported())return null;try{let t=new TextEncoder,r=new ReadableStream({start(r){r.enqueue(t.encode(e)),r.close()}}).pipeThrough(new CompressionStream(`gzip`));return await new Response(r).arrayBuffer()}catch(e){return console.error(`Compression failed / 압축 실패:`,e),null}}async function decompress(e){if(!isCompressionSupported())return null;try{let t=new ReadableStream({start(t){t.enqueue(e),t.close()}}).pipeThrough(new DecompressionStream(`gzip`)),r=await new Response(t).arrayBuffer();return new TextDecoder().decode(r)}catch(e){return console.error(`Decompression failed / 압축 해제 실패:`,e),null}}function isCompressed(e){if(!e||e.byteLength<3)return!1;let t=new Uint8Array(e);return t[0]===31&&t[1]===139&&t[2]===8}var init_compression=__esmMin((()=>{}));init_compression();const DB_NAME=`CDPEventStorage`,DB_VERSION=1,STORE_NAME=`events`,ACTIVITY_STORE_NAME=`clientActivity`,ORPHANED_THRESHOLD_MS=1440*60*1e3;var EventStorage=class{db=null;config;clientId;maxSize=50*1024*1024;maxEvents=1e4;constructor(e){if(!e.clientId)throw Error(`clientId is required / clientId는 필수입니다`);this.config=e,this.clientId=e.clientId,this.maxEvents=e.maxStoredEvents||1e4,e.maxStorageSize?this.maxSize=e.maxStorageSize:this.calculateMaxSize()}async init(){return new Promise((e,t)=>{let r=indexedDB.open(DB_NAME,DB_VERSION);r.onerror=()=>{console.error(`Failed to open IndexedDB / IndexedDB 열기 실패:`,r.error),t(r.error)},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=e=>{let t=e.target.result,r=e.target.transaction;if(!r)return;let i;t.objectStoreNames.contains(STORE_NAME)?i=r.objectStore(STORE_NAME):(i=t.createObjectStore(STORE_NAME,{keyPath:`id`,autoIncrement:!0}),i.createIndex(`timestamp`,`timestamp`,{unique:!1})),i.indexNames.contains(`clientId`)||i.createIndex(`clientId`,`clientId`,{unique:!1}),i.indexNames.contains(`clientId_timestamp`)||i.createIndex(`clientId_timestamp`,[`clientId`,`timestamp`],{unique:!1}),t.objectStoreNames.contains(ACTIVITY_STORE_NAME)||t.createObjectStore(ACTIVITY_STORE_NAME,{keyPath:`clientId`}).createIndex(`lastActiveTime`,`lastActiveTime`,{unique:!1})}})}async calculateMaxSize(){if(!(typeof navigator>`u`||!navigator.storage||!navigator.storage.estimate))try{let e=await navigator.storage.estimate(),t=(e.quota||0)-(e.usage||0);this.maxSize=Math.min(t*.5,50*1024*1024)}catch(e){console.warn(`Failed to estimate storage quota / 저장 용량 확인 실패:`,e)}}shouldStore(e){return typeof e!=`object`||!e?!1:`method`in e||`id`in e}async getCurrentSize(){return this.db?new Promise((e,t)=>{let r=this.db.transaction([STORE_NAME],`readonly`).objectStore(STORE_NAME).index(`clientId`).getAll(this.clientId);r.onsuccess=()=>{e(r.result.reduce((e,t)=>e+(t.size||0),0))},r.onerror=()=>{t(r.error)}}):0}async getEventCount(){return this.db?new Promise((e,t)=>{let r=this.db.transaction([STORE_NAME],`readonly`).objectStore(STORE_NAME).index(`clientId`).count(this.clientId);r.onsuccess=()=>{e(r.result)},r.onerror=()=>{t(r.error)}}):0}async deleteOldEvents(e){if(this.db)return new Promise((t,r)=>{let i=this.db.transaction([STORE_NAME],`readwrite`).objectStore(STORE_NAME).index(`clientId_timestamp`),a=IDBKeyRange.bound([this.clientId,0],[this.clientId,1/0]),o=i.openCursor(a,`next`),s=0;o.onsuccess=r=>{let i=r.target.result;if(i&&s<e){let e=i.value;s+=e.size||0,i.delete(),i.continue()}else t()},o.onerror=()=>{r(o.error)}})}async deleteOldEventsByCount(e){if(this.db)return new Promise((t,r)=>{let i=this.db.transaction([STORE_NAME],`readwrite`).objectStore(STORE_NAME).index(`clientId_timestamp`),a=IDBKeyRange.bound([this.clientId,0],[this.clientId,1/0]),o=i.openCursor(a,`next`),s=0;o.onsuccess=r=>{let i=r.target.result;i&&s<e?(i.delete(),s++,i.continue()):t()},o.onerror=()=>{r(o.error)}})}async ensureStorageSpace(e){let t=await this.getCurrentSize(),r=await this.getEventCount();if(t+e>this.maxSize||r>=this.maxEvents){let i=Math.max(0,t+e-this.maxSize),a=r>=this.maxEvents?r-this.maxEvents+1:0;a>0?await this.deleteOldEventsByCount(a):i>0&&await this.deleteOldEvents(i)}}async saveMessage(e,t=0){if(this.shouldStore(e)){if(this.db||await this.init(),!this.db){console.warn(`IndexedDB not available / IndexedDB 사용 불가`);return}try{let r=Date.now(),i,a=!1,o,s=JSON.stringify(e);if(o=new Blob([s]).size,this.config.enableCompression){let e=await compress(s);e?(i=JSON.stringify({compressed:!0,data:Array.from(new Uint8Array(e))}),a=!0,o=e.byteLength):i=s}else i=s;return await this.ensureStorageSpace(o),new Promise(s=>{let c=this.db.transaction([STORE_NAME],`readwrite`).objectStore(STORE_NAME),l={clientId:this.clientId,type:`CDP_MESSAGE`,message:i,timestamp:r,compressed:a,size:o},u=c.add(l);u.onsuccess=()=>{s()},u.onerror=()=>{u.error?.name===`QuotaExceededError`&&t<1?this.deleteOldEvents(o).then(()=>{this.saveMessage(e,t+1).then(s).catch(()=>{s()})}):(console.error(`Failed to save message / 메시지 저장 실패:`,u.error),s())}})}catch(e){console.error(`Error saving message / 메시지 저장 오류:`,e)}}}async saveEvent(e,t,r=0){return this.saveMessage({method:e,params:t},r)}async getEvents(){return this.db||await this.init(),this.db?new Promise((e,t)=>{let r=this.db.transaction([STORE_NAME],`readonly`).objectStore(STORE_NAME).index(`clientId_timestamp`),i=IDBKeyRange.bound([this.clientId,0],[this.clientId,1/0]),a=r.getAll(i);a.onsuccess=async()=>{let t=a.result;e(await Promise.all(t.map(async e=>{let t;if(e.compressed){let{decompress:r}=await Promise.resolve().then(()=>(init_compression(),compression_exports)),i=new Uint8Array(JSON.parse(e.message).data).buffer,a=await r(i);if(a)try{let e=JSON.parse(a);t=e&&typeof e==`object`&&`message`in e&&e.type===`CDP_MESSAGE`?e.message:a}catch{t=a}else t=e.message}else try{let r=JSON.parse(e.message);t=r&&typeof r==`object`&&`message`in r&&r.type===`CDP_MESSAGE`?r.message:e.message}catch{t=e.message}return{type:`CDP_MESSAGE`,message:t}})))},a.onerror=()=>{t(a.error)}}):[]}async getEventsAfter(e){return this.db||await this.init(),this.db?new Promise((t,r)=>{let i=this.db.transaction([STORE_NAME],`readonly`).objectStore(STORE_NAME).index(`clientId_timestamp`),a=IDBKeyRange.bound([this.clientId,e],[this.clientId,1/0],!0,!1),o=i.getAll(a);o.onsuccess=async()=>{let e=o.result;t(await Promise.all(e.map(async e=>{let t;if(e.compressed){let{decompress:r}=await Promise.resolve().then(()=>(init_compression(),compression_exports)),i=new Uint8Array(JSON.parse(e.message).data).buffer,a=await r(i);if(a)try{let e=JSON.parse(a);t=e&&typeof e==`object`&&`message`in e&&e.type===`CDP_MESSAGE`?e.message:a}catch{t=a}else t=e.message}else try{let r=JSON.parse(e.message);t=r&&typeof r==`object`&&`message`in r&&r.type===`CDP_MESSAGE`?r.message:e.message}catch{t=e.message}return{type:`CDP_MESSAGE`,message:t}})))},o.onerror=()=>{r(o.error)}}):[]}async clearEvents(e){if(this.db)return new Promise((t,r)=>{let i=this.db.transaction([STORE_NAME],`readwrite`).objectStore(STORE_NAME).index(`clientId`).openCursor(IDBKeyRange.only(this.clientId));i.onsuccess=r=>{let i=r.target.result;if(i){let t=i.value;if(e)try{let r=JSON.parse(t.message).method||``;if(e.some(e=>r.startsWith(e))){i.continue();return}}catch{}i.delete(),i.continue()}else t()},i.onerror=()=>{r(i.error)}})}async clearEventsBefore(e){if(this.db)return new Promise((t,r)=>{let i=this.db.transaction([STORE_NAME],`readwrite`).objectStore(STORE_NAME).index(`clientId_timestamp`),a=IDBKeyRange.bound([this.clientId,0],[this.clientId,e],!1,!0),o=i.openCursor(a);o.onsuccess=e=>{let r=e.target.result;r?(r.delete(),r.continue()):t()},o.onerror=()=>{r(o.error)}})}async updateLastActiveTime(){if(this.db||await this.init(),this.db)return new Promise((e,t)=>{let r=this.db.transaction([ACTIVITY_STORE_NAME],`readwrite`).objectStore(ACTIVITY_STORE_NAME),i={clientId:this.clientId,lastActiveTime:Date.now()},a=r.put(i);a.onsuccess=()=>{e()},a.onerror=()=>{t(a.error)}})}async getActiveClientIds(){return this.db||await this.init(),this.db?new Promise((e,t)=>{let r=this.db.transaction([ACTIVITY_STORE_NAME],`readonly`).objectStore(ACTIVITY_STORE_NAME).index(`lastActiveTime`),i=Date.now()-ORPHANED_THRESHOLD_MS,a=IDBKeyRange.lowerBound(i),o=r.getAll(a);o.onsuccess=()=>{let t=o.result;e(new Set(t.map(e=>e.clientId)))},o.onerror=()=>{t(o.error)}}):new Set}async cleanupOrphanedEvents(){if(this.db||await this.init(),!this.db)return 0;try{let e=await this.getActiveClientIds(),t=Date.now()-ORPHANED_THRESHOLD_MS;return new Promise((r,i)=>{let a=this.db.transaction([STORE_NAME],`readwrite`).objectStore(STORE_NAME).index(`timestamp`),o=IDBKeyRange.upperBound(t),s=a.openCursor(o),c=0;s.onsuccess=t=>{let i=t.target.result;if(i){let t=i.value;e.has(t.clientId)||(i.delete(),c++),i.continue()}else this.cleanupOldActivityRecords().then(()=>{r(c)})},s.onerror=()=>{i(s.error)}})}catch(e){return console.error(`Failed to cleanup orphaned events / orphaned 이벤트 정리 실패:`,e),0}}async cleanupOldActivityRecords(){if(this.db)return new Promise((e,t)=>{let r=this.db.transaction([ACTIVITY_STORE_NAME],`readwrite`).objectStore(ACTIVITY_STORE_NAME).index(`lastActiveTime`),i=Date.now()-ORPHANED_THRESHOLD_MS,a=IDBKeyRange.upperBound(i),o=r.openCursor(a);o.onsuccess=t=>{let r=t.target.result;r?(r.delete(),r.continue()):e()},o.onerror=()=>{t(o.error)}})}async exportToFile(){if(this.db||await this.init(),!this.db)throw Error(`IndexedDB not available / IndexedDB 사용 불가`);try{let e=await this.getEvents(),t=[];document.cookie&&document.cookie.split(`;`).forEach(e=>{let r=e.indexOf(`=`);if(r>0){let i=e.substring(0,r).trim(),a=e.substring(r+1).trim();i&&a&&t.push({name:i,value:a,domain:location.hostname,path:`/`})}});let r=[],i=[];for(let e=0;e<window.localStorage.length;e++){let t=window.localStorage.key(e);if(t){let e=window.localStorage.getItem(t);e!==null&&r.push([t,e])}}for(let e=0;e<window.sessionStorage.length;e++){let t=window.sessionStorage.key(e);if(t){let e=window.sessionStorage.getItem(t);e!==null&&i.push([t,e])}}let a=document.documentElement.outerHTML,o={documentURL:document.URL||location.href,baseURL:document.baseURI||location.href,html:a},s={version:`1.0.0`,exportDate:new Date().toISOString(),clientId:this.clientId,events:e,cookies:t,localStorage:r,sessionStorage:i,domTree:o},c=JSON.stringify(s,null,2),l=new Blob([c],{type:`application/json`}),u=URL.createObjectURL(l),d=document.createElement(`a`);d.href=u,d.download=`cdp-events-${this.clientId}-${Date.now()}.json`,d.click(),URL.revokeObjectURL(u)}catch(e){throw console.error(`Failed to export messages / 메시지 내보내기 실패:`,e),e}}};function getId(){let e=sessionStorage.getItem(`debug_id`);return e||(e=typeof crypto<`u`&&crypto.randomUUID?crypto.randomUUID():`${`${Date.now()}-${performance.now()}`}-${Math.random().toString(36).substring(2,11)}-${Math.random().toString(36).substring(2,11)}-${Math.random().toString(36).substring(2,11)}`,sessionStorage.setItem(`debug_id`,e)),e}function getDocumentFavicon(){let e=document.head.querySelectorAll(`link`),t=Array.from(e).find(e=>{let t=e.getAttribute(`rel`);return t?.includes(`icon`)||t?.includes(`shortcut`)}),r=``;return t&&(r=getAbsolutePath(t.getAttribute(`href`)||``)),r}function getQuery(){let e=new URLSearchParams;return e.append(`url`,location.href),e.append(`title`,document.title),e.append(`favicon`,getDocumentFavicon()),e.append(`time`,Date.now().toString()),e.append(`ua`,navigator.userAgent),e.toString()}var export_button_exports=__exportAll({injectExportButton:()=>injectExportButton});function injectExportButton(e){if(document.getElementById(`chrome-remote-devtools-export-btn`))return;let t=document.createElement(`button`);t.id=`chrome-remote-devtools-export-btn`,t.title=`Export CDP events to JSON file`,t.innerHTML=`
    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M10 13V3M10 13L6 9M10 13L14 9M3 16H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  `,t.style.cssText=`
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 999999;
    padding: 12px;
    background: #3b82f6;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
  `,t.addEventListener(`click`,async()=>{t.disabled=!0,t.innerHTML=`
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="animation: spin 1s linear infinite;">
        <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2" stroke-opacity="0.3" fill="none"/>
        <path d="M10 2C10 2 13 6 13 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <style>
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
        </style>
      </svg>
    `;try{await e.exportToFile(),t.innerHTML=`
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16.5 5.5L7.5 14.5L3.5 10.5" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      `,setTimeout(()=>{t.innerHTML=`
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 13V3M10 13L6 9M10 13L14 9M3 16H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        `,t.disabled=!1},2e3)}catch(e){console.error(`Failed to export events / 이벤트 내보내기 실패:`,e),t.innerHTML=`
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2" fill="none"/>
          <path d="M10 6V10M10 14H10.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      `,setTimeout(()=>{t.innerHTML=`
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 13V3M10 13L6 9M10 13L14 9M3 16H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        `,t.disabled=!1},2e3)}}),document.body.appendChild(t)}var init_export_button=__esmMin((()=>{})),WebSocketClient=class{socket=null;domain=null;eventStorage=void 0;updateInterval=null;cleanupInterval=null;constructor(e,t,r,i,a){this.serverUrl=e,this.rrwebConfig=t,this.skipWebSocket=r,this.onDomainCreated=i,this.onRrwebInit=a}async initialize(){if(await this.initializeEventStorage(),this.skipWebSocket){await this.initializePostMessageMode();return}await this.initializeWebSocket()}async initializePostMessageMode(){let e=new ChromeDomain({socket:null,eventStorage:this.eventStorage});this.domain=e,this.onDomainCreated?.(e),e.execute({method:`Runtime.enable`}),e.execute({method:`Network.enable`}),e.execute({method:`Console.enable`}),this.onRrwebInit&&await this.onRrwebInit(null,e)}async initializeWebSocket(){let e=`ws:`;this.serverUrl.startsWith(`wss://`)||this.serverUrl.startsWith(`https://`)?e=`wss:`:this.serverUrl.startsWith(`ws://`)||this.serverUrl.startsWith(`http://`)?e=`ws:`:typeof location<`u`&&location.protocol===`https:`&&(e=`wss:`);let t=this.serverUrl.replace(/^(http|https|ws|wss):\/\//i,``),r=new WebSocket(`${e}//${t}/remote/debug/client/${getId()}?${getQuery()}`);this.socket=r;let i=new ChromeDomain({socket:r,eventStorage:this.eventStorage});this.domain=i,this.onDomainCreated?.(i),this.setupSocketHandlers(r,i),this.setupPeriodicTasks(r),this.onRrwebInit&&await this.onRrwebInit(r,i)}async initializeEventStorage(){let e=getId(),t=this.rrwebConfig.enableEventStorage!==!1,r=this.rrwebConfig.enableCompression!==!1;t&&(this.eventStorage=new EventStorage({clientId:e,enableCompression:r,maxStoredEvents:this.rrwebConfig.maxStoredEvents,maxStorageSize:this.rrwebConfig.maxStorageSize}),await this.eventStorage.init().then(async()=>{if(performance.getEntriesByType(`navigation`)[0]?.type===`reload`&&await this.eventStorage?.clearEvents(),await this.eventStorage?.updateLastActiveTime(),await this.eventStorage?.cleanupOrphanedEvents(),this.rrwebConfig.enableExportButton===!0&&this.eventStorage){let{injectExportButton:e}=await Promise.resolve().then(()=>(init_export_button(),export_button_exports));e(this.eventStorage)}}))}setupSocketHandlers(e,t){e.addEventListener(`message`,async({data:r})=>{await this.handleSocketMessage(r,t,e)})}async sendStoredEvents(e){if(!(!this.eventStorage||this.rrwebConfig.enableEventStorage===!1))try{let t=await this.eventStorage.getEvents();if(t.length>0){let r=100;for(let r=0;r<t.length;r+=100){let i=t.slice(r,r+100);for(let t of i)if(e.readyState===WebSocket.OPEN)try{let r=JSON.parse(t.message);e.send(JSON.stringify(r))}catch(e){console.warn(`Failed to parse stored message / 저장된 메시지 파싱 실패:`,e)}await new Promise(e=>setTimeout(e,10))}}}catch(e){console.error(`Failed to send stored messages / 저장된 메시지 전송 실패:`,e)}}async handleSocketMessage(e,t,r){try{let i;i=e instanceof Blob?await e.text():typeof e==`string`?e:e instanceof ArrayBuffer?new TextDecoder().decode(e):String(e);let a=JSON.parse(i),o=t.execute(a);if(o instanceof Promise){let e=await o;e.id!==void 0&&r.send(JSON.stringify(e))}else o.id!==void 0&&r.send(JSON.stringify(o))}catch(e){console.error(`CDP message error:`,e)}}setupPeriodicTasks(e){this.rrwebConfig.enableEventStorage!==!1&&this.eventStorage&&(this.updateInterval=setInterval(async()=>{await this.eventStorage?.updateLastActiveTime()},300*1e3),this.cleanupInterval=setInterval(async()=>{await this.eventStorage?.cleanupOrphanedEvents()},3600*1e3),e.addEventListener(`close`,()=>{this.cleanup()}))}getDomain(){return this.domain}getSocket(){return this.socket}cleanup(){this.updateInterval&&=(clearInterval(this.updateInterval),null),this.cleanupInterval&&=(clearInterval(this.cleanupInterval),null),this.socket&&this.socket.readyState!==WebSocket.CLOSED&&this.socket.close(),this.socket=null,this.domain=null}},PostMessageHandler=class{handler=null;devtoolsWindow=null;constructor(e){this.domain=e,this.setup()}setDomain(e){this.domain=e,this.devtoolsWindow&&e&&e.setDevToolsWindow(this.devtoolsWindow)}setup(){this.handler=this.handleMessage.bind(this),window.addEventListener(`message`,this.handler)}isWindow(e){return typeof e==`object`&&!!e&&`postMessage`in e&&typeof e.postMessage==`function`}handleMessage(e){if(!(!e.data||typeof e.data!=`object`)&&!(typeof window<`u`&&window.__CHROME_REMOTE_DEVTOOLS_REPLAY_MODE__)){if(e.data.type===`DEVTOOLS_READY`){this.isWindow(e.source)&&(this.devtoolsWindow=e.source,this.domain&&this.domain.setDevToolsWindow(this.devtoolsWindow)),window.dispatchEvent(new CustomEvent(`devtools-ready`,{detail:{ready:!0}}));return}if(e.data.type===`CDP_MESSAGE`&&e.data.message){!this.devtoolsWindow&&this.isWindow(e.source)&&(this.devtoolsWindow=e.source,this.domain&&this.domain.setDevToolsWindow(this.devtoolsWindow)),this.handleCDPMessage(e,!0);return}}}handleCDPMessage(e,t,r=!1){if(this.domain)try{let i=t?JSON.parse(e.data.message):e.data,a=this.domain.execute(i);this.sendResponse(e.source,i.id,a,r)}catch(e){console.warn(`Failed to parse CDP message:`,e)}}sendResponse(e,t,r,i=!1){let a=t=>{if(t.id!==void 0&&this.isWindow(e))try{if(i)e.postMessage(t,`*`);else{let r={type:`CDP_MESSAGE`,message:JSON.stringify(t)};e.postMessage(r,`*`)}}catch(e){console.warn(`Failed to send postMessage response:`,e)}};r instanceof Promise?r.then(a).catch(e=>{a({id:t,error:{code:-32e3,message:e instanceof Error?e.message:String(e)}})}):a(r)}destroy(){this.handler&&=(window.removeEventListener(`message`,this.handler),null)}};function keepScreenDisplay(){let e=navigator;e.wakeLock&&(e.wakeLock.request(`screen`).catch(()=>{}),document.addEventListener(`visibilitychange`,()=>{document.visibilityState===`visible`&&e.wakeLock?.request(`screen`).catch(()=>{})}))}function createEventBuffer(e){let t=[];return{push(r){return t.push(r),t.length>=e},drain(){return t.splice(0,t.length)},clear(){t.length=0},size(){return t.length}}}var init_buffer=__esmMin((()=>{}));function createCDPTransport(e){let{executeCDP:t}=e;return{async send(e){let r=t(`SessionReplay.sendEvent`,{events:e.events});if(r.error)throw Error(`Failed to send rrweb events: ${JSON.stringify(r.error)}`)}}}var init_cdp=__esmMin((()=>{})),record_exports=__exportAll({record:()=>record});function getUntaintedPrototype$1(e){if(untaintedBasePrototype$1[e])return untaintedBasePrototype$1[e];let t=globalThis[e],r=t.prototype,i=e in testableAccessors$1?testableAccessors$1[e]:void 0,a=!!(i&&i.every(e=>{var t,i;return!!(Object.getOwnPropertyDescriptor(r,e)?.get)?.toString().includes(`[native code]`)})),o=e in testableMethods$1?testableMethods$1[e]:void 0,s=!!(o&&o.every(e=>{var t;return typeof r[e]==`function`&&r[e]?.toString().includes(`[native code]`)}));if(a&&s&&!isAngularZonePresent$1())return untaintedBasePrototype$1[e]=t.prototype,t.prototype;try{let i=document.createElement(`iframe`);document.body.appendChild(i);let a=i.contentWindow;if(!a)return t.prototype;let o=a[e].prototype;return document.body.removeChild(i),o?untaintedBasePrototype$1[e]=o:r}catch{return r}}function getUntaintedAccessor$1(e,t,r){var i;let a=`${e}.${String(r)}`;if(untaintedAccessorCache$1[a])return untaintedAccessorCache$1[a].call(t);let o=getUntaintedPrototype$1(e),s=Object.getOwnPropertyDescriptor(o,r)?.get;return s?(untaintedAccessorCache$1[a]=s,s.call(t)):t[r]}function getUntaintedMethod$1(e,t,r){let i=`${e}.${String(r)}`;if(untaintedMethodCache$1[i])return untaintedMethodCache$1[i].bind(t);let a=getUntaintedPrototype$1(e)[r];return typeof a==`function`?(untaintedMethodCache$1[i]=a,a.bind(t)):t[r]}function childNodes$1(e){return getUntaintedAccessor$1(`Node`,e,`childNodes`)}function parentNode$1(e){return getUntaintedAccessor$1(`Node`,e,`parentNode`)}function parentElement$1(e){return getUntaintedAccessor$1(`Node`,e,`parentElement`)}function textContent$1(e){return getUntaintedAccessor$1(`Node`,e,`textContent`)}function contains$1(e,t){return getUntaintedMethod$1(`Node`,e,`contains`)(t)}function getRootNode$1(e){return getUntaintedMethod$1(`Node`,e,`getRootNode`)()}function host$1(e){return!e||!(`host`in e)?null:getUntaintedAccessor$1(`ShadowRoot`,e,`host`)}function styleSheets$1(e){return e.styleSheets}function shadowRoot$1(e){return!e||!(`shadowRoot`in e)?null:getUntaintedAccessor$1(`Element`,e,`shadowRoot`)}function querySelector$1(e,t){return getUntaintedAccessor$1(`Element`,e,`querySelector`)(t)}function querySelectorAll$1(e,t){return getUntaintedAccessor$1(`Element`,e,`querySelectorAll`)(t)}function mutationObserverCtor$1(){return getUntaintedPrototype$1(`MutationObserver`).constructor}function isElement(e){return e.nodeType===e.ELEMENT_NODE}function isShadowRoot(e){let t=e&&`host`in e&&`mode`in e&&index$1.host(e)||null;return!!(t&&`shadowRoot`in t&&index$1.shadowRoot(t)===e)}function isNativeShadowDom(e){return Object.prototype.toString.call(e)===`[object ShadowRoot]`}function fixBrowserCompatibilityIssuesInCSS(e){return e.includes(` background-clip: text;`)&&!e.includes(` -webkit-background-clip: text;`)&&(e=e.replace(/\sbackground-clip:\s*text;/g,` -webkit-background-clip: text; background-clip: text;`)),e}function escapeImportStatement(e){let{cssText:t}=e;if(t.split(`"`).length<3)return t;let r=[`@import`,`url(${JSON.stringify(e.href)})`];return e.layerName===``?r.push(`layer`):e.layerName&&r.push(`layer(${e.layerName})`),e.supportsText&&r.push(`supports(${e.supportsText})`),e.media.length&&r.push(e.media.mediaText),r.join(` `)+`;`}function stringifyStylesheet(e){try{let t=e.rules||e.cssRules;if(!t)return null;let r=e.href;return!r&&e.ownerNode&&e.ownerNode.ownerDocument&&(r=e.ownerNode.ownerDocument.location.href),fixBrowserCompatibilityIssuesInCSS(Array.from(t,e=>stringifyRule(e,r)).join(``))}catch{return null}}function stringifyRule(e,t){if(isCSSImportRule(e)){let t;try{t=stringifyStylesheet(e.styleSheet)||escapeImportStatement(e)}catch{t=e.cssText}return e.styleSheet.href?absolutifyURLs(t,e.styleSheet.href):t}else{let r=e.cssText;return isCSSStyleRule(e)&&e.selectorText.includes(`:`)&&(r=fixSafariColons(r)),t?absolutifyURLs(r,t):r}}function fixSafariColons(e){return e.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,`$1\\$2`)}function isCSSImportRule(e){return`styleSheet`in e}function isCSSStyleRule(e){return`selectorText`in e}function createMirror$2(){return new Mirror}function maskInputValue({element:e,maskInputOptions:t,tagName:r,type:i,value:a,maskInputFn:o}){let s=a||``,c=i&&toLowerCase(i);return(t[r.toLowerCase()]||c&&t[c])&&(s=o?o(s,e):`*`.repeat(s.length)),s}function toLowerCase(e){return e.toLowerCase()}function is2DCanvasBlank(e){let t=e.getContext(`2d`);if(!t)return!0;let r=50;for(let r=0;r<e.width;r+=50)for(let i=0;i<e.height;i+=50){let a=t.getImageData,o=ORIGINAL_ATTRIBUTE_NAME in a?a[ORIGINAL_ATTRIBUTE_NAME]:a;if(new Uint32Array(o.call(t,r,i,Math.min(50,e.width-r),Math.min(50,e.height-i)).data.buffer).some(e=>e!==0))return!1}return!0}function getInputType(e){let t=e.type;return e.hasAttribute(`data-rr-is-password`)?`password`:t?toLowerCase(t):null}function extractFileExtension(e,t){let r;try{r=new URL(e,t??window.location.href)}catch{return null}return r.pathname.match(/\.([0-9a-z]+)(?:$)/i)?.[1]??null}function extractOrigin(e){let t=``;return t=e.indexOf(`//`)>-1?e.split(`/`).slice(0,3).join(`/`):e.split(`/`)[0],t=t.split(`?`)[0],t}function absolutifyURLs(e,t){return(e||``).replace(URL_IN_CSS_REF,(e,r,i,a,o,s)=>{let c=i||o||s,l=r||a||``;if(!c)return e;if(URL_PROTOCOL_MATCH.test(c)||URL_WWW_MATCH.test(c)||DATA_URI.test(c))return`url(${l}${c}${l})`;if(c[0]===`/`)return`url(${l}${extractOrigin(t)+c}${l})`;let u=t.split(`/`),d=c.split(`/`);u.pop();for(let e of d)if(e===`.`)continue;else e===`..`?u.pop():u.push(e);return`url(${l}${u.join(`/`)}${l})`})}function normalizeCssString(e){return e.replace(/(\/\*[^*]*\*\/)|[\s;]/g,``)}function splitCssText(e,t){let r=Array.from(t.childNodes),i=[];if(r.length>1&&e&&typeof e==`string`){let t=normalizeCssString(e);for(let a=1;a<r.length;a++)if(r[a].textContent&&typeof r[a].textContent==`string`){let o=normalizeCssString(r[a].textContent);for(let r=3;r<o.length;r++){let a=o.substring(0,r);if(t.split(a).length===2){let r=t.indexOf(a);for(let t=r;t<e.length;t++)if(normalizeCssString(e.substring(0,t)).length===r){i.push(e.substring(0,t)),e=e.substring(t);break}break}}}}return i.push(e),i}function markCssSplits(e,t){return splitCssText(e,t).join(`/* rr_split */`)}function genId(){return _id++}function getValidTagName$1(e){if(e instanceof HTMLFormElement)return`form`;let t=toLowerCase(e.tagName);return tagNameRegex.test(t)?`div`:t}function getAbsoluteSrcsetString(e,t){if(t.trim()===``)return t;let r=0;function i(e){let i,a=e.exec(t.substring(r));return a?(i=a[0],r+=i.length,i):``}let a=[];for(;i(SRCSET_COMMAS_OR_SPACES),!(r>=t.length);){let o=i(SRCSET_NOT_SPACES);if(o.slice(-1)===`,`)o=absoluteToDoc(e,o.substring(0,o.length-1)),a.push(o);else{let i=``;o=absoluteToDoc(e,o);let s=!1;for(;;){let e=t.charAt(r);if(e===``){a.push((o+i).trim());break}else if(s)e===`)`&&(s=!1);else if(e===`,`){r+=1,a.push((o+i).trim());break}else e===`(`&&(s=!0);i+=e,r+=1}}}return a.join(`, `)}function absoluteToDoc(e,t){return!t||t.trim()===``?t:getHref(e,t)}function isSVGElement(e){return!!(e.tagName===`svg`||e.ownerSVGElement)}function getHref(e,t){let r=cachedDocument.get(e);if(r||(r=e.createElement(`a`),cachedDocument.set(e,r)),!t)t=``;else if(t.startsWith(`blob:`)||t.startsWith(`data:`))return t;return r.setAttribute(`href`,t),r.href}function transformAttribute(e,t,r,i){return i&&(r===`src`||r===`href`&&!(t===`use`&&i[0]===`#`)||r===`xlink:href`&&i[0]!==`#`||r===`background`&&(t===`table`||t===`td`||t===`th`)?absoluteToDoc(e,i):r===`srcset`?getAbsoluteSrcsetString(e,i):r===`style`?absolutifyURLs(i,getHref(e)):t===`object`&&r===`data`?absoluteToDoc(e,i):i)}function ignoreAttribute(e,t,r){return(e===`video`||e===`audio`)&&t===`autoplay`}function _isBlockedElement(e,t,r){try{if(typeof t==`string`){if(e.classList.contains(t))return!0}else for(let r=e.classList.length;r--;){let i=e.classList[r];if(t.test(i))return!0}if(r)return e.matches(r)}catch{}return!1}function classMatchesRegex(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return r?classMatchesRegex(index$1.parentNode(e),t,r):!1;for(let r=e.classList.length;r--;){let i=e.classList[r];if(t.test(i))return!0}return r?classMatchesRegex(index$1.parentNode(e),t,r):!1}function needMaskingText(e,t,r,i){let a;if(isElement(e)){if(a=e,!index$1.childNodes(a).length)return!1}else if(index$1.parentElement(e)===null)return!1;else a=index$1.parentElement(e);try{if(typeof t==`string`){if(i){if(a.closest(`.${t}`))return!0}else if(a.classList.contains(t))return!0}else if(classMatchesRegex(a,t,i))return!0;if(r){if(i){if(a.closest(r))return!0}else if(a.matches(r))return!0}}catch{}return!1}function onceIframeLoaded(e,t,r){let i=e.contentWindow;if(!i)return;let a=!1,o;try{o=i.document.readyState}catch{return}if(o!==`complete`){let i=setTimeout(()=>{a||=(t(),!0)},r);e.addEventListener(`load`,()=>{clearTimeout(i),a=!0,t()});return}let s=`about:blank`;if(i.location.href!==s||e.src===s||e.src===``)return setTimeout(t,0),e.addEventListener(`load`,t);e.addEventListener(`load`,t)}function onceStylesheetLoaded(e,t,r){let i=!1,a;try{a=e.sheet}catch{return}if(a)return;let o=setTimeout(()=>{i||=(t(),!0)},r);e.addEventListener(`load`,()=>{clearTimeout(o),i=!0,t()})}function serializeNode(e,t){let{doc:r,mirror:i,blockClass:a,blockSelector:o,needsMask:s,inlineStylesheet:c,maskInputOptions:l={},maskTextFn:u,maskInputFn:d,dataURLOptions:f={},inlineImages:p,recordCanvas:m,keepIframeSrcFn:h,newlyAddedElement:g=!1,cssCaptured:_=!1}=t,v=getRootId(r,i);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode===`CSS1Compat`?{type:NodeType$3.Document,childNodes:[]}:{type:NodeType$3.Document,childNodes:[],compatMode:e.compatMode};case e.DOCUMENT_TYPE_NODE:return{type:NodeType$3.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:v};case e.ELEMENT_NODE:return serializeElementNode(e,{doc:r,blockClass:a,blockSelector:o,inlineStylesheet:c,maskInputOptions:l,maskInputFn:d,dataURLOptions:f,inlineImages:p,recordCanvas:m,keepIframeSrcFn:h,newlyAddedElement:g,rootId:v});case e.TEXT_NODE:return serializeTextNode(e,{doc:r,needsMask:s,maskTextFn:u,rootId:v,cssCaptured:_});case e.CDATA_SECTION_NODE:return{type:NodeType$3.CDATA,textContent:``,rootId:v};case e.COMMENT_NODE:return{type:NodeType$3.Comment,textContent:index$1.textContent(e)||``,rootId:v};default:return!1}}function getRootId(e,t){if(!t.hasNode(e))return;let r=t.getId(e);return r===1?void 0:r}function serializeTextNode(e,t){let{needsMask:r,maskTextFn:i,rootId:a,cssCaptured:o}=t,s=index$1.parentNode(e),c=s&&s.tagName,l=``,u=c===`STYLE`?!0:void 0,d=c===`SCRIPT`?!0:void 0;return d?l=`SCRIPT_PLACEHOLDER`:o||(l=index$1.textContent(e),u&&l&&(l=absolutifyURLs(l,getHref(t.doc)))),!u&&!d&&l&&r&&(l=i?i(l,index$1.parentElement(e)):l.replace(/[\S]/g,`*`)),{type:NodeType$3.Text,textContent:l||``,rootId:a}}function serializeElementNode(e,t){let{doc:r,blockClass:i,blockSelector:a,inlineStylesheet:o,maskInputOptions:s={},maskInputFn:c,dataURLOptions:l={},inlineImages:u,recordCanvas:d,keepIframeSrcFn:f,newlyAddedElement:p=!1,rootId:m}=t,h=_isBlockedElement(e,i,a),g=getValidTagName$1(e),_={},v=e.attributes.length;for(let t=0;t<v;t++){let i=e.attributes[t];ignoreAttribute(g,i.name,i.value)||(_[i.name]=transformAttribute(r,g,toLowerCase(i.name),i.value))}if(g===`link`&&o){let t=Array.from(r.styleSheets).find(t=>t.href===e.href),i=null;t&&(i=stringifyStylesheet(t)),i&&(delete _.rel,delete _.href,_._cssText=i)}if(g===`style`&&e.sheet){let t=stringifyStylesheet(e.sheet);t&&(e.childNodes.length>1&&(t=markCssSplits(t,e)),_._cssText=t)}if(g===`input`||g===`textarea`||g===`select`){let t=e.value,r=e.checked;_.type!==`radio`&&_.type!==`checkbox`&&_.type!==`submit`&&_.type!==`button`&&t?_.value=maskInputValue({element:e,type:getInputType(e),tagName:g,value:t,maskInputOptions:s,maskInputFn:c}):r&&(_.checked=r)}if(g===`option`&&(e.selected&&!s.select?_.selected=!0:delete _.selected),g===`dialog`&&e.open&&(_.rr_open_mode=e.matches(`dialog:modal`)?`modal`:`non-modal`),g===`canvas`&&d){if(e.__context===`2d`)is2DCanvasBlank(e)||(_.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!(`__context`in e)){let t=e.toDataURL(l.type,l.quality),i=r.createElement(`canvas`);i.width=e.width,i.height=e.height,t!==i.toDataURL(l.type,l.quality)&&(_.rr_dataURL=t)}}if(g===`img`&&u){canvasService||(canvasService=r.createElement(`canvas`),canvasCtx=canvasService.getContext(`2d`));let t=e,i=t.currentSrc||t.getAttribute(`src`)||`<unknown-src>`,a=t.crossOrigin,o=()=>{t.removeEventListener(`load`,o);try{canvasService.width=t.naturalWidth,canvasService.height=t.naturalHeight,canvasCtx.drawImage(t,0,0),_.rr_dataURL=canvasService.toDataURL(l.type,l.quality)}catch(e){if(t.crossOrigin!==`anonymous`){t.crossOrigin=`anonymous`,t.complete&&t.naturalWidth!==0?o():t.addEventListener(`load`,o);return}else console.warn(`Cannot inline img src=${i}! Error: ${e}`)}t.crossOrigin===`anonymous`&&(a?_.crossOrigin=a:t.removeAttribute(`crossorigin`))};t.complete&&t.naturalWidth!==0?o():t.addEventListener(`load`,o)}if(g===`audio`||g===`video`){let t=_;t.rr_mediaState=e.paused?`paused`:`played`,t.rr_mediaCurrentTime=e.currentTime,t.rr_mediaPlaybackRate=e.playbackRate,t.rr_mediaMuted=e.muted,t.rr_mediaLoop=e.loop,t.rr_mediaVolume=e.volume}if(p||(e.scrollLeft&&(_.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(_.rr_scrollTop=e.scrollTop)),h){let{width:t,height:r}=e.getBoundingClientRect();_={class:_.class,rr_width:`${t}px`,rr_height:`${r}px`}}g===`iframe`&&!f(_.src)&&(e.contentDocument||(_.rr_src=_.src),delete _.src);let y;try{customElements.get(g)&&(y=!0)}catch{}return{type:NodeType$3.Element,tagName:g,attributes:_,childNodes:[],isSVG:isSVGElement(e)||void 0,needBlock:h,rootId:m,isCustom:y}}function lowerIfExists(e){return e==null?``:e.toLowerCase()}function slimDOMExcluded(e,t){return!!(t.comment&&e.type===NodeType$3.Comment||e.type===NodeType$3.Element&&(t.script&&(e.tagName===`script`||e.tagName===`link`&&(e.attributes.rel===`preload`||e.attributes.rel===`modulepreload`)&&e.attributes.as===`script`||e.tagName===`link`&&e.attributes.rel===`prefetch`&&typeof e.attributes.href==`string`&&extractFileExtension(e.attributes.href)===`js`)||t.headFavicon&&(e.tagName===`link`&&e.attributes.rel===`shortcut icon`||e.tagName===`meta`&&(lowerIfExists(e.attributes.name).match(/^msapplication-tile(image|color)$/)||lowerIfExists(e.attributes.name)===`application-name`||lowerIfExists(e.attributes.rel)===`icon`||lowerIfExists(e.attributes.rel)===`apple-touch-icon`||lowerIfExists(e.attributes.rel)===`shortcut icon`))||e.tagName===`meta`&&(t.headMetaDescKeywords&&lowerIfExists(e.attributes.name).match(/^description|keywords$/)||t.headMetaSocial&&(lowerIfExists(e.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(e.attributes.name).match(/^(og|twitter):/)||lowerIfExists(e.attributes.name)===`pinterest`)||t.headMetaRobots&&(lowerIfExists(e.attributes.name)===`robots`||lowerIfExists(e.attributes.name)===`googlebot`||lowerIfExists(e.attributes.name)===`bingbot`)||t.headMetaHttpEquiv&&e.attributes[`http-equiv`]!==void 0||t.headMetaAuthorship&&(lowerIfExists(e.attributes.name)===`author`||lowerIfExists(e.attributes.name)===`generator`||lowerIfExists(e.attributes.name)===`framework`||lowerIfExists(e.attributes.name)===`publisher`||lowerIfExists(e.attributes.name)===`progid`||lowerIfExists(e.attributes.property).match(/^article:/)||lowerIfExists(e.attributes.property).match(/^product:/))||t.headMetaVerification&&(lowerIfExists(e.attributes.name)===`google-site-verification`||lowerIfExists(e.attributes.name)===`yandex-verification`||lowerIfExists(e.attributes.name)===`csrf-token`||lowerIfExists(e.attributes.name)===`p:domain_verify`||lowerIfExists(e.attributes.name)===`verify-v1`||lowerIfExists(e.attributes.name)===`verification`||lowerIfExists(e.attributes.name)===`shopify-checkout-api-token`))))}function serializeNodeWithId(e,t){let{doc:r,mirror:i,blockClass:a,blockSelector:o,maskTextClass:s,maskTextSelector:c,skipChild:l=!1,inlineStylesheet:u=!0,maskInputOptions:d={},maskTextFn:f,maskInputFn:p,slimDOMOptions:m,dataURLOptions:h={},inlineImages:g=!1,recordCanvas:_=!1,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:b=5e3,onStylesheetLoad:S,stylesheetLoadTimeout:C=5e3,keepIframeSrcFn:w=()=>!1,newlyAddedElement:T=!1,cssCaptured:E=!1}=t,{needsMask:D}=t,{preserveWhiteSpace:O=!0}=t;D||=needMaskingText(e,s,c,D===void 0);let k=serializeNode(e,{doc:r,mirror:i,blockClass:a,blockSelector:o,needsMask:D,inlineStylesheet:u,maskInputOptions:d,maskTextFn:f,maskInputFn:p,dataURLOptions:h,inlineImages:g,recordCanvas:_,keepIframeSrcFn:w,newlyAddedElement:T,cssCaptured:E});if(!k)return console.warn(e,`not serialized`),null;let A;A=i.hasNode(e)?i.getId(e):slimDOMExcluded(k,m)||!O&&k.type===NodeType$3.Text&&!k.textContent.replace(/^\s+|\s+$/gm,``).length?IGNORED_NODE:genId();let j=Object.assign(k,{id:A});if(i.add(e,j),A===IGNORED_NODE)return null;v&&v(e);let M=!l;if(j.type===NodeType$3.Element){M&&=!j.needBlock,delete j.needBlock;let t=index$1.shadowRoot(e);t&&isNativeShadowDom(t)&&(j.isShadowHost=!0)}if((j.type===NodeType$3.Document||j.type===NodeType$3.Element)&&M){m.headWhitespace&&j.type===NodeType$3.Element&&j.tagName===`head`&&(O=!1);let t={doc:r,mirror:i,blockClass:a,blockSelector:o,needsMask:D,maskTextClass:s,maskTextSelector:c,skipChild:l,inlineStylesheet:u,maskInputOptions:d,maskTextFn:f,maskInputFn:p,slimDOMOptions:m,dataURLOptions:h,inlineImages:g,recordCanvas:_,preserveWhiteSpace:O,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:b,onStylesheetLoad:S,stylesheetLoadTimeout:C,keepIframeSrcFn:w,cssCaptured:!1};if(!(j.type===NodeType$3.Element&&j.tagName===`textarea`&&j.attributes.value!==void 0)){j.type===NodeType$3.Element&&j.attributes._cssText!==void 0&&typeof j.attributes._cssText==`string`&&(t.cssCaptured=!0);for(let r of Array.from(index$1.childNodes(e))){let e=serializeNodeWithId(r,t);e&&j.childNodes.push(e)}}let T=null;if(isElement(e)&&(T=index$1.shadowRoot(e)))for(let e of Array.from(index$1.childNodes(T))){let r=serializeNodeWithId(e,t);r&&(isNativeShadowDom(T)&&(r.isShadow=!0),j.childNodes.push(r))}}let N=index$1.parentNode(e);return N&&isShadowRoot(N)&&isNativeShadowDom(N)&&(j.isShadow=!0),j.type===NodeType$3.Element&&j.tagName===`iframe`&&onceIframeLoaded(e,()=>{let t=e.contentDocument;if(t&&y){let r=serializeNodeWithId(t,{doc:t,mirror:i,blockClass:a,blockSelector:o,needsMask:D,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:u,maskInputOptions:d,maskTextFn:f,maskInputFn:p,slimDOMOptions:m,dataURLOptions:h,inlineImages:g,recordCanvas:_,preserveWhiteSpace:O,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:b,onStylesheetLoad:S,stylesheetLoadTimeout:C,keepIframeSrcFn:w});r&&y(e,r)}},b),j.type===NodeType$3.Element&&j.tagName===`link`&&typeof j.attributes.rel==`string`&&(j.attributes.rel===`stylesheet`||j.attributes.rel===`preload`&&typeof j.attributes.href==`string`&&extractFileExtension(j.attributes.href)===`css`)&&onceStylesheetLoaded(e,()=>{if(S){let t=serializeNodeWithId(e,{doc:r,mirror:i,blockClass:a,blockSelector:o,needsMask:D,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:u,maskInputOptions:d,maskTextFn:f,maskInputFn:p,slimDOMOptions:m,dataURLOptions:h,inlineImages:g,recordCanvas:_,preserveWhiteSpace:O,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:b,onStylesheetLoad:S,stylesheetLoadTimeout:C,keepIframeSrcFn:w});t&&S(e,t)}},C),j}function snapshot(e,t){let{mirror:r=new Mirror,blockClass:i=`rr-block`,blockSelector:a=null,maskTextClass:o=`rr-mask`,maskTextSelector:s=null,inlineStylesheet:c=!0,inlineImages:l=!1,recordCanvas:u=!1,maskAllInputs:d=!1,maskTextFn:f,maskInputFn:p,slimDOM:m=!1,dataURLOptions:h,preserveWhiteSpace:g,onSerialize:_,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:b,stylesheetLoadTimeout:S,keepIframeSrcFn:C=()=>!1}=t||{};return serializeNodeWithId(e,{doc:e,mirror:r,blockClass:i,blockSelector:a,maskTextClass:o,maskTextSelector:s,skipChild:!1,inlineStylesheet:c,maskInputOptions:d===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:d===!1?{password:!0}:d,maskTextFn:f,maskInputFn:p,slimDOMOptions:m===!0||m===`all`?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:m===`all`,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:m===!1?{}:m,dataURLOptions:h,inlineImages:l,recordCanvas:u,preserveWhiteSpace:g,onSerialize:_,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:b,stylesheetLoadTimeout:S,keepIframeSrcFn:C,newlyAddedElement:!1})}function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,`default`)?e.default:e}function getAugmentedNamespace$1(e){if(e.__esModule)return e;var t=e.default;if(typeof t==`function`){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,`__esModule`,{value:!0}),Object.keys(e).forEach(function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})}),r}function capitalize$1(e){return e[0].toUpperCase()+e.slice(1)}function stringify$4$1(e,t){new Stringifier$1$1(t).stringify(e)}function cloneNode$1(e,t){let r=new e.constructor;for(let i in e){if(!Object.prototype.hasOwnProperty.call(e,i)||i===`proxyCache`)continue;let a=e[i],o=typeof a;i===`parent`&&o===`object`?t&&(r[i]=t):i===`source`?r[i]=a:Array.isArray(a)?r[i]=a.map(e=>cloneNode$1(e,r)):(o===`object`&&a!==null&&(a=cloneNode$1(a)),r[i]=a)}return r}function fromBase64$1(e){return Buffer?Buffer.from(e,`base64`).toString():window.atob(e)}function cleanSource$1(e){return e.map(e=>(e.nodes&&=cleanSource$1(e.nodes),delete e.source,e))}function markDirtyUp$1(e){if(e[isClean$1$1]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)markDirtyUp$1(t)}function findLastWithPosition$1(e){for(let t=e.length-1;t>=0;t--){let r=e[t],i=r[3]||r[2];if(i)return i}}function parse$3$1(e,t){let r=new Parser2$1(new Input$2$1(e,t));try{r.parse()}catch(e){throw e}return r.root}function isPromise$1(e){return typeof e==`object`&&typeof e.then==`function`}function getEvents$1(e){let t=!1,r=TYPE_TO_CLASS_NAME$1[e.type];return e.type===`decl`?t=e.prop.toLowerCase():e.type===`atrule`&&(t=e.name.toLowerCase()),t&&e.append?[r,r+`-`+t,CHILDREN$1,r+`Exit`,r+`Exit-`+t]:t?[r,r+`-`+t,r+`Exit`,r+`Exit-`+t]:e.append?[r,CHILDREN$1,r+`Exit`]:[r,r+`Exit`]}function toStack$1(e){let t;return t=e.type===`document`?[`Document`,CHILDREN$1,`DocumentExit`]:e.type===`root`?[`Root`,CHILDREN$1,`RootExit`]:getEvents$1(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks$1(e){return e[isClean$3]=!1,e.nodes&&e.nodes.forEach(e=>cleanMarks$1(e)),e}function fromJSON$1$1(e,t){if(Array.isArray(e))return e.map(e=>fromJSON$1$1(e));let{inputs:r,...i}=e;if(r){t=[];for(let e of r){let r={...e,__proto__:Input$1$1.prototype};r.map&&={...r.map,__proto__:PreviousMap2$1.prototype},t.push(r)}}if(i.nodes&&=e.nodes.map(e=>fromJSON$1$1(e,t)),i.source){let{inputId:e,...r}=i.source;i.source=r,e!=null&&(i.source.input=t[e])}if(i.type===`root`)return new Root$1$1(i);if(i.type===`decl`)return new Declaration$1$1(i);if(i.type===`rule`)return new Rule$1$1(i);if(i.type===`comment`)return new Comment$1$1(i);if(i.type===`atrule`)return new AtRule$1$1(i);throw Error(`Unknown node type: `+e.type)}function postcss$3(...e){return e.length===1&&Array.isArray(e[0])&&(e=e[0]),new Processor2$1(e)}function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,`default`)?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t==`function`){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,`__esModule`,{value:!0}),Object.keys(e).forEach(function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})}),r}function capitalize(e){return e[0].toUpperCase()+e.slice(1)}function stringify$4(e,t){new Stringifier$1(t).stringify(e)}function cloneNode(e,t){let r=new e.constructor;for(let i in e){if(!Object.prototype.hasOwnProperty.call(e,i)||i===`proxyCache`)continue;let a=e[i],o=typeof a;i===`parent`&&o===`object`?t&&(r[i]=t):i===`source`?r[i]=a:Array.isArray(a)?r[i]=a.map(e=>cloneNode(e,r)):(o===`object`&&a!==null&&(a=cloneNode(a)),r[i]=a)}return r}function fromBase64(e){return Buffer?Buffer.from(e,`base64`).toString():window.atob(e)}function cleanSource(e){return e.map(e=>(e.nodes&&=cleanSource(e.nodes),delete e.source,e))}function markDirtyUp(e){if(e[isClean$1]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)markDirtyUp(t)}function findLastWithPosition(e){for(let t=e.length-1;t>=0;t--){let r=e[t],i=r[3]||r[2];if(i)return i}}function parse$3(e,t){let r=new Parser22(new Input$2(e,t));try{r.parse()}catch(e){throw e}return r.root}function isPromise(e){return typeof e==`object`&&typeof e.then==`function`}function getEvents(e){let t=!1,r=TYPE_TO_CLASS_NAME[e.type];return e.type===`decl`?t=e.prop.toLowerCase():e.type===`atrule`&&(t=e.name.toLowerCase()),t&&e.append?[r,r+`-`+t,CHILDREN,r+`Exit`,r+`Exit-`+t]:t?[r,r+`-`+t,r+`Exit`,r+`Exit-`+t]:e.append?[r,CHILDREN,r+`Exit`]:[r,r+`Exit`]}function toStack(e){let t;return t=e.type===`document`?[`Document`,CHILDREN,`DocumentExit`]:e.type===`root`?[`Root`,CHILDREN,`RootExit`]:getEvents(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks(e){return e[isClean]=!1,e.nodes&&e.nodes.forEach(e=>cleanMarks(e)),e}function fromJSON$1(e,t){if(Array.isArray(e))return e.map(e=>fromJSON$1(e));let{inputs:r,...i}=e;if(r){t=[];for(let e of r){let r={...e,__proto__:Input$1.prototype};r.map&&={...r.map,__proto__:PreviousMap22.prototype},t.push(r)}}if(i.nodes&&=e.nodes.map(e=>fromJSON$1(e,t)),i.source){let{inputId:e,...r}=i.source;i.source=r,e!=null&&(i.source.input=t[e])}if(i.type===`root`)return new Root$1(i);if(i.type===`decl`)return new Declaration$1(i);if(i.type===`rule`)return new Rule$1(i);if(i.type===`comment`)return new Comment$1(i);if(i.type===`atrule`)return new AtRule$1(i);throw Error(`Unknown node type: `+e.type)}function postcss(...e){return e.length===1&&Array.isArray(e[0])&&(e=e[0]),new Processor22(e)}function getUntaintedPrototype(e){if(untaintedBasePrototype[e])return untaintedBasePrototype[e];let t=globalThis[e],r=t.prototype,i=e in testableAccessors?testableAccessors[e]:void 0,a=!!(i&&i.every(e=>{var t,i;return!!(Object.getOwnPropertyDescriptor(r,e)?.get)?.toString().includes(`[native code]`)})),o=e in testableMethods?testableMethods[e]:void 0,s=!!(o&&o.every(e=>{var t;return typeof r[e]==`function`&&r[e]?.toString().includes(`[native code]`)}));if(a&&s&&!isAngularZonePresent())return untaintedBasePrototype[e]=t.prototype,t.prototype;try{let i=document.createElement(`iframe`);document.body.appendChild(i);let a=i.contentWindow;if(!a)return t.prototype;let o=a[e].prototype;return document.body.removeChild(i),o?untaintedBasePrototype[e]=o:r}catch{return r}}function getUntaintedAccessor(e,t,r){var i;let a=`${e}.${String(r)}`;if(untaintedAccessorCache[a])return untaintedAccessorCache[a].call(t);let o=getUntaintedPrototype(e),s=Object.getOwnPropertyDescriptor(o,r)?.get;return s?(untaintedAccessorCache[a]=s,s.call(t)):t[r]}function getUntaintedMethod(e,t,r){let i=`${e}.${String(r)}`;if(untaintedMethodCache[i])return untaintedMethodCache[i].bind(t);let a=getUntaintedPrototype(e)[r];return typeof a==`function`?(untaintedMethodCache[i]=a,a.bind(t)):t[r]}function childNodes(e){return getUntaintedAccessor(`Node`,e,`childNodes`)}function parentNode(e){return getUntaintedAccessor(`Node`,e,`parentNode`)}function parentElement(e){return getUntaintedAccessor(`Node`,e,`parentElement`)}function textContent(e){return getUntaintedAccessor(`Node`,e,`textContent`)}function contains(e,t){return getUntaintedMethod(`Node`,e,`contains`)(t)}function getRootNode(e){return getUntaintedMethod(`Node`,e,`getRootNode`)()}function host(e){return!e||!(`host`in e)?null:getUntaintedAccessor(`ShadowRoot`,e,`host`)}function styleSheets(e){return e.styleSheets}function shadowRoot(e){return!e||!(`shadowRoot`in e)?null:getUntaintedAccessor(`Element`,e,`shadowRoot`)}function querySelector(e,t){return getUntaintedAccessor(`Element`,e,`querySelector`)(t)}function querySelectorAll(e,t){return getUntaintedAccessor(`Element`,e,`querySelectorAll`)(t)}function mutationObserverCtor(){return getUntaintedPrototype(`MutationObserver`).constructor}function on(e,t,r=document){let i={capture:!0,passive:!0};return r.addEventListener(e,t,i),()=>r.removeEventListener(e,t,i)}function throttle(e,t,r={}){let i=null,a=0;return function(...o){let s=Date.now();!a&&r.leading===!1&&(a=s);let c=t-(s-a),l=this;c<=0||c>t?(i&&=(clearTimeout(i),null),a=s,e.apply(l,o)):!i&&r.trailing!==!1&&(i=setTimeout(()=>{a=r.leading===!1?0:Date.now(),i=null,e.apply(l,o)},c))}}function hookSetter(e,t,r,i,a=window){let o=a.Object.getOwnPropertyDescriptor(e,t);return a.Object.defineProperty(e,t,i?r:{set(e){setTimeout(()=>{r.set.call(this,e)},0),o&&o.set&&o.set.call(this,e)}}),()=>hookSetter(e,t,o||{},!0)}function patch(e,t,r){try{if(!(t in e))return()=>{};let i=e[t],a=r(i);return typeof a==`function`&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:i}})),e[t]=a,()=>{e[t]=i}}catch{return()=>{}}}function getWindowScroll(e){var t,r,i,a;let o=e.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:e.pageXOffset===void 0?o.documentElement.scrollLeft||o?.body&&index.parentElement(o.body)?.scrollLeft||o?.body?.scrollLeft||0:e.pageXOffset,top:o.scrollingElement?o.scrollingElement.scrollTop:e.pageYOffset===void 0?o?.documentElement.scrollTop||o?.body&&index.parentElement(o.body)?.scrollTop||o?.body?.scrollTop||0:e.pageYOffset}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function closestElementOfNode(e){return e?e.nodeType===e.ELEMENT_NODE?e:index.parentElement(e):null}function isBlocked(e,t,r,i){if(!e)return!1;let a=closestElementOfNode(e);if(!a)return!1;try{if(typeof t==`string`){if(a.classList.contains(t)||i&&a.closest(`.`+t)!==null)return!0}else if(classMatchesRegex(a,t,i))return!0}catch{}return!!(r&&(a.matches(r)||i&&a.closest(r)!==null))}function isSerialized(e,t){return t.getId(e)!==-1}function isIgnored(e,t,r){return e.tagName===`TITLE`&&r.headTitleMutations?!0:t.getId(e)===IGNORED_NODE}function isAncestorRemoved(e,t){if(isShadowRoot(e))return!1;let r=t.getId(e);if(!t.has(r))return!0;let i=index.parentNode(e);return i&&i.nodeType===e.DOCUMENT_NODE?!1:i?isAncestorRemoved(i,t):!0}function legacy_isTouchEvent(e){return!!e.changedTouches}function polyfill$1(e=window){`NodeList`in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),`DOMTokenList`in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function isSerializedIframe(e,t){return!!(e.nodeName===`IFRAME`&&t.getMeta(e))}function isSerializedStylesheet(e,t){return!!(e.nodeName===`LINK`&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute(`rel`)===`stylesheet`&&t.getMeta(e))}function hasShadowRoot(e){return e?e instanceof BaseRRNode&&`shadowRoot`in e?!!e.shadowRoot:!!index.shadowRoot(e):!1}function getShadowHost(e){var t;let r=null;return`getRootNode`in e&&index.getRootNode(e)?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&index.host(index.getRootNode(e))&&(r=index.host(index.getRootNode(e))),r}function getRootShadowHost(e){let t=e,r;for(;r=getShadowHost(t);)t=r;return t}function shadowHostInDom(e){let t=e.ownerDocument;if(!t)return!1;let r=getRootShadowHost(e);return index.contains(t,r)}function inDom(e){let t=e.ownerDocument;return t?index.contains(t,e)||shadowHostInDom(e):!1}function isNodeInLinkedList(e){return`__ln`in e}function deepDelete(e,t){e.delete(t),index.childNodes(t).forEach(t=>deepDelete(e,t))}function processRemoves(e,t){let r=[e];for(;r.length;){let e=r.pop();t.has(e)||(t.add(e),index.childNodes(e).forEach(e=>r.push(e)))}}function isParentRemoved(e,t,r){return e.size===0?!1:_isParentRemoved(e,t)}function _isParentRemoved(e,t,r){let i=index.parentNode(t);return i?e.has(i):!1}function isAncestorInSet(e,t){return e.size===0?!1:_isAncestorInSet(e,t)}function _isAncestorInSet(e,t){let r=index.parentNode(t);return r?e.has(r)?!0:_isAncestorInSet(e,r):!1}function registerErrorHandler(e){errorHandler=e}function unregisterErrorHandler(){errorHandler=void 0}function getEventTarget(e){try{if(`composedPath`in e){let t=e.composedPath();if(t.length)return t[0]}else if(`path`in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function initMutationObserver(e,t){let r=new MutationBuffer;mutationBuffers.push(r),r.init(e);let i=new(mutationObserverCtor())(callbackWrapper(r.processMutations.bind(r)));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function initMoveObserver({mousemoveCb:e,sampling:t,doc:r,mirror:i}){if(t.mousemove===!1)return()=>{};let a=typeof t.mousemove==`number`?t.mousemove:50,o=typeof t.mousemoveCallback==`number`?t.mousemoveCallback:500,s=[],c,l=throttle(callbackWrapper(t=>{let r=Date.now()-c;e(s.map(e=>(e.timeOffset-=r,e)),t),s=[],c=null}),o),u=callbackWrapper(throttle(callbackWrapper(e=>{let t=getEventTarget(e),{clientX:r,clientY:a}=legacy_isTouchEvent(e)?e.changedTouches[0]:e;c||=nowTimestamp(),s.push({x:r,y:a,id:i.getId(t),timeOffset:nowTimestamp()-c}),l(typeof DragEvent<`u`&&e instanceof DragEvent?IncrementalSource.Drag:e instanceof MouseEvent?IncrementalSource.MouseMove:IncrementalSource.TouchMove)}),a,{trailing:!1})),d=[on(`mousemove`,u,r),on(`touchmove`,u,r),on(`drag`,u,r)];return callbackWrapper(()=>{d.forEach(e=>e())})}function initMouseInteractionObserver({mouseInteractionCb:e,doc:t,mirror:r,blockClass:i,blockSelector:a,sampling:o}){if(o.mouseInteraction===!1)return()=>{};let s=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[],l=null,u=t=>o=>{let s=getEventTarget(o);if(isBlocked(s,i,a,!0))return;let c=null,u=t;if(`pointerType`in o){switch(o.pointerType){case`mouse`:c=PointerTypes.Mouse;break;case`touch`:c=PointerTypes.Touch;break;case`pen`:c=PointerTypes.Pen;break}c===PointerTypes.Touch?MouseInteractions[t]===MouseInteractions.MouseDown?u=`TouchStart`:MouseInteractions[t]===MouseInteractions.MouseUp&&(u=`TouchEnd`):PointerTypes.Pen}else legacy_isTouchEvent(o)&&(c=PointerTypes.Touch);c===null?MouseInteractions[t]===MouseInteractions.Click&&(c=l,l=null):(l=c,(u.startsWith(`Touch`)&&c===PointerTypes.Touch||u.startsWith(`Mouse`)&&c===PointerTypes.Mouse)&&(c=null));let d=legacy_isTouchEvent(o)?o.changedTouches[0]:o;if(!d)return;let f=r.getId(s),{clientX:p,clientY:m}=d;callbackWrapper(e)({type:MouseInteractions[u],id:f,x:p,y:m,...c!==null&&{pointerType:c}})};return Object.keys(MouseInteractions).filter(e=>Number.isNaN(Number(e))&&!e.endsWith(`_Departed`)&&s[e]!==!1).forEach(e=>{let r=toLowerCase(e),i=u(e);if(window.PointerEvent)switch(MouseInteractions[e]){case MouseInteractions.MouseDown:case MouseInteractions.MouseUp:r=r.replace(`mouse`,`pointer`);break;case MouseInteractions.TouchStart:case MouseInteractions.TouchEnd:return}c.push(on(r,i,t))}),callbackWrapper(()=>{c.forEach(e=>e())})}function initScrollObserver({scrollCb:e,doc:t,mirror:r,blockClass:i,blockSelector:a,sampling:o}){return on(`scroll`,callbackWrapper(throttle(callbackWrapper(o=>{let s=getEventTarget(o);if(!s||isBlocked(s,i,a,!0))return;let c=r.getId(s);if(s===t&&t.defaultView){let r=getWindowScroll(t.defaultView);e({id:c,x:r.left,y:r.top})}else e({id:c,x:s.scrollLeft,y:s.scrollTop})}),o.scroll||100)),t)}function initViewportResizeObserver({viewportResizeCb:e},{win:t}){let r=-1,i=-1;return on(`resize`,callbackWrapper(throttle(callbackWrapper(()=>{let t=getWindowHeight(),a=getWindowWidth();(r!==t||i!==a)&&(e({width:Number(a),height:Number(t)}),r=t,i=a)}),200)),t)}function initInputObserver({inputCb:e,doc:t,mirror:r,blockClass:i,blockSelector:a,ignoreClass:o,ignoreSelector:s,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d}){function f(e){let r=getEventTarget(e),u=e.isTrusted,f=r&&r.tagName;if(r&&f===`OPTION`&&(r=index.parentElement(r)),!r||!f||INPUT_TAGS.indexOf(f)<0||isBlocked(r,i,a,!0)||r.classList.contains(o)||s&&r.matches(s))return;let m=r.value,h=!1,g=getInputType(r)||``;g===`radio`||g===`checkbox`?h=r.checked:(c[f.toLowerCase()]||c[g])&&(m=maskInputValue({element:r,maskInputOptions:c,tagName:f,type:g,value:m,maskInputFn:l})),p(r,d?{text:m,isChecked:h,userTriggered:u}:{text:m,isChecked:h});let _=r.name;g===`radio`&&_&&h&&t.querySelectorAll(`input[type="radio"][name="${_}"]`).forEach(e=>{if(e!==r){let t=e.value;p(e,d?{text:t,isChecked:!h,userTriggered:!1}:{text:t,isChecked:!h})}})}function p(t,i){let a=lastInputValueMap.get(t);if(!a||a.text!==i.text||a.isChecked!==i.isChecked){lastInputValueMap.set(t,i);let a=r.getId(t);callbackWrapper(e)({...i,id:a})}}let m=(u.input===`last`?[`change`]:[`input`,`change`]).map(e=>on(e,callbackWrapper(f),t)),h=t.defaultView;if(!h)return()=>{m.forEach(e=>e())};let g=h.Object.getOwnPropertyDescriptor(h.HTMLInputElement.prototype,`value`),_=[[h.HTMLInputElement.prototype,`value`],[h.HTMLInputElement.prototype,`checked`],[h.HTMLSelectElement.prototype,`value`],[h.HTMLTextAreaElement.prototype,`value`],[h.HTMLSelectElement.prototype,`selectedIndex`],[h.HTMLOptionElement.prototype,`selected`]];return g&&g.set&&m.push(..._.map(e=>hookSetter(e[0],e[1],{set(){callbackWrapper(f)({target:this,isTrusted:!1})}},!1,h))),callbackWrapper(()=>{m.forEach(e=>e())})}function getNestedCSSRulePositions(e){let t=[];function r(e,t){if(hasNestedCSSRule(`CSSGroupingRule`)&&e.parentRule instanceof CSSGroupingRule||hasNestedCSSRule(`CSSMediaRule`)&&e.parentRule instanceof CSSMediaRule||hasNestedCSSRule(`CSSSupportsRule`)&&e.parentRule instanceof CSSSupportsRule||hasNestedCSSRule(`CSSConditionRule`)&&e.parentRule instanceof CSSConditionRule){let r=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(r)}else if(e.parentStyleSheet){let r=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(r)}return t}return r(e,t)}function getIdAndStyleId(e,t,r){let i,a;return e?(e.ownerNode?i=t.getId(e.ownerNode):a=r.getId(e),{styleId:a,id:i}):{}}function initStyleSheetObserver({styleSheetRuleCb:e,mirror:t,stylesheetManager:r},{win:i}){if(!i.CSSStyleSheet||!i.CSSStyleSheet.prototype)return()=>{};let a=i.CSSStyleSheet.prototype.insertRule;i.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:callbackWrapper((i,a,o)=>{let[s,c]=o,{id:l,styleId:u}=getIdAndStyleId(a,t,r.styleMirror);return(l&&l!==-1||u&&u!==-1)&&e({id:l,styleId:u,adds:[{rule:s,index:c}]}),i.apply(a,o)})}),i.CSSStyleSheet.prototype.addRule=function(e,t,r=this.cssRules.length){let a=`${e} { ${t} }`;return i.CSSStyleSheet.prototype.insertRule.apply(this,[a,r])};let o=i.CSSStyleSheet.prototype.deleteRule;i.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:callbackWrapper((i,a,o)=>{let[s]=o,{id:c,styleId:l}=getIdAndStyleId(a,t,r.styleMirror);return(c&&c!==-1||l&&l!==-1)&&e({id:c,styleId:l,removes:[{index:s}]}),i.apply(a,o)})}),i.CSSStyleSheet.prototype.removeRule=function(e){return i.CSSStyleSheet.prototype.deleteRule.apply(this,[e])};let s;i.CSSStyleSheet.prototype.replace&&(s=i.CSSStyleSheet.prototype.replace,i.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:callbackWrapper((i,a,o)=>{let[s]=o,{id:c,styleId:l}=getIdAndStyleId(a,t,r.styleMirror);return(c&&c!==-1||l&&l!==-1)&&e({id:c,styleId:l,replace:s}),i.apply(a,o)})}));let c;i.CSSStyleSheet.prototype.replaceSync&&(c=i.CSSStyleSheet.prototype.replaceSync,i.CSSStyleSheet.prototype.replaceSync=new Proxy(c,{apply:callbackWrapper((i,a,o)=>{let[s]=o,{id:c,styleId:l}=getIdAndStyleId(a,t,r.styleMirror);return(c&&c!==-1||l&&l!==-1)&&e({id:c,styleId:l,replaceSync:s}),i.apply(a,o)})}));let l={};canMonkeyPatchNestedCSSRule(`CSSGroupingRule`)?l.CSSGroupingRule=i.CSSGroupingRule:(canMonkeyPatchNestedCSSRule(`CSSMediaRule`)&&(l.CSSMediaRule=i.CSSMediaRule),canMonkeyPatchNestedCSSRule(`CSSConditionRule`)&&(l.CSSConditionRule=i.CSSConditionRule),canMonkeyPatchNestedCSSRule(`CSSSupportsRule`)&&(l.CSSSupportsRule=i.CSSSupportsRule));let u={};return Object.entries(l).forEach(([i,a])=>{u[i]={insertRule:a.prototype.insertRule,deleteRule:a.prototype.deleteRule},a.prototype.insertRule=new Proxy(u[i].insertRule,{apply:callbackWrapper((i,a,o)=>{let[s,c]=o,{id:l,styleId:u}=getIdAndStyleId(a.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||u&&u!==-1)&&e({id:l,styleId:u,adds:[{rule:s,index:[...getNestedCSSRulePositions(a),c||0]}]}),i.apply(a,o)})}),a.prototype.deleteRule=new Proxy(u[i].deleteRule,{apply:callbackWrapper((i,a,o)=>{let[s]=o,{id:c,styleId:l}=getIdAndStyleId(a.parentStyleSheet,t,r.styleMirror);return(c&&c!==-1||l&&l!==-1)&&e({id:c,styleId:l,removes:[{index:[...getNestedCSSRulePositions(a),s]}]}),i.apply(a,o)})})}),callbackWrapper(()=>{i.CSSStyleSheet.prototype.insertRule=a,i.CSSStyleSheet.prototype.deleteRule=o,s&&(i.CSSStyleSheet.prototype.replace=s),c&&(i.CSSStyleSheet.prototype.replaceSync=c),Object.entries(l).forEach(([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule})})}function initAdoptedStyleSheetObserver({mirror:e,stylesheetManager:t},r){var i,a,o;let s=null;s=r.nodeName===`#document`?e.getId(r):e.getId(index.host(r));let c=r.nodeName===`#document`?r.defaultView?.Document:r.ownerDocument?.defaultView?.ShadowRoot,l=c?.prototype?Object.getOwnPropertyDescriptor(c?.prototype,`adoptedStyleSheets`):void 0;return s===null||s===-1||!c||!l?()=>{}:(Object.defineProperty(r,`adoptedStyleSheets`,{configurable:l.configurable,enumerable:l.enumerable,get(){var e;return l.get?.call(this)},set(e){var r;let i=l.set?.call(this,e);if(s!==null&&s!==-1)try{t.adoptStyleSheets(e,s)}catch{}return i}}),callbackWrapper(()=>{Object.defineProperty(r,`adoptedStyleSheets`,{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})}))}function initStyleDeclarationObserver({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:r,stylesheetManager:i},{win:a}){let o=a.CSSStyleDeclaration.prototype.setProperty;a.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:callbackWrapper((a,s,c)=>{var l;let[u,d,f]=c;if(r.has(u))return o.apply(s,[u,d,f]);let{id:p,styleId:m}=getIdAndStyleId(s.parentRule?.parentStyleSheet,t,i.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,set:{property:u,value:d,priority:f},index:getNestedCSSRulePositions(s.parentRule)}),a.apply(s,c)})});let s=a.CSSStyleDeclaration.prototype.removeProperty;return a.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:callbackWrapper((a,o,c)=>{var l;let[u]=c;if(r.has(u))return s.apply(o,[u]);let{id:d,styleId:f}=getIdAndStyleId(o.parentRule?.parentStyleSheet,t,i.styleMirror);return(d&&d!==-1||f&&f!==-1)&&e({id:d,styleId:f,remove:{property:u},index:getNestedCSSRulePositions(o.parentRule)}),a.apply(o,c)})}),callbackWrapper(()=>{a.CSSStyleDeclaration.prototype.setProperty=o,a.CSSStyleDeclaration.prototype.removeProperty=s})}function initMediaInteractionObserver({mediaInteractionCb:e,blockClass:t,blockSelector:r,mirror:i,sampling:a,doc:o}){let s=callbackWrapper(o=>throttle(callbackWrapper(a=>{let s=getEventTarget(a);if(!s||isBlocked(s,t,r,!0))return;let{currentTime:c,volume:l,muted:u,playbackRate:d,loop:f}=s;e({type:o,id:i.getId(s),currentTime:c,volume:l,muted:u,playbackRate:d,loop:f})}),a.media||500)),c=[on(`play`,s(MediaInteractions.Play),o),on(`pause`,s(MediaInteractions.Pause),o),on(`seeked`,s(MediaInteractions.Seeked),o),on(`volumechange`,s(MediaInteractions.VolumeChange),o),on(`ratechange`,s(MediaInteractions.RateChange),o)];return callbackWrapper(()=>{c.forEach(e=>e())})}function initFontObserver({fontCb:e,doc:t}){let r=t.defaultView;if(!r)return()=>{};let i=[],a=new WeakMap,o=r.FontFace;r.FontFace=function(e,t,r){let i=new o(e,t,r);return a.set(i,{family:e,buffer:typeof t!=`string`,descriptors:r,fontSource:typeof t==`string`?t:JSON.stringify(Array.from(new Uint8Array(t)))}),i};let s=patch(t.fonts,`add`,function(t){return function(r){return setTimeout(callbackWrapper(()=>{let t=a.get(r);t&&(e(t),a.delete(r))}),0),t.apply(this,[r])}});return i.push(()=>{r.FontFace=o}),i.push(s),callbackWrapper(()=>{i.forEach(e=>e())})}function initSelectionObserver(e){let{doc:t,mirror:r,blockClass:i,blockSelector:a,selectionCb:o}=e,s=!0,c=callbackWrapper(()=>{let e=t.getSelection();if(!e||s&&e?.isCollapsed)return;s=e.isCollapsed||!1;let c=[],l=e.rangeCount||0;for(let t=0;t<l;t++){let{startContainer:o,startOffset:s,endContainer:l,endOffset:u}=e.getRangeAt(t);isBlocked(o,i,a,!0)||isBlocked(l,i,a,!0)||c.push({start:r.getId(o),startOffset:s,end:r.getId(l),endOffset:u})}o({ranges:c})});return c(),on(`selectionchange`,c)}function initCustomElementObserver({doc:e,customElementCb:t}){let r=e.defaultView;return!r||!r.customElements?()=>{}:patch(r.customElements,`define`,function(e){return function(r,i,a){try{t({define:{name:r}})}catch{console.warn(`Custom element callback failed for ${r}`)}return e.apply(this,[r,i,a])}})}function mergeHooks(e,t){let{mutationCb:r,mousemoveCb:i,mouseInteractionCb:a,scrollCb:o,viewportResizeCb:s,inputCb:c,mediaInteractionCb:l,styleSheetRuleCb:u,styleDeclarationCb:d,canvasMutationCb:f,fontCb:p,selectionCb:m,customElementCb:h}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),r(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),i(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),a(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),o(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),s(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),c(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),l(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),u(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),d(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),f(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),p(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),m(...e)},e.customElementCb=(...e)=>{t.customElement&&t.customElement(...e),h(...e)}}function initObservers(e,t={}){let r=e.doc.defaultView;if(!r)return()=>{};mergeHooks(e,t);let i;e.recordDOM&&(i=initMutationObserver(e,e.doc));let a=initMoveObserver(e),o=initMouseInteractionObserver(e),s=initScrollObserver(e),c=initViewportResizeObserver(e,{win:r}),l=initInputObserver(e),u=initMediaInteractionObserver(e),d=()=>{},f=()=>{},p=()=>{},m=()=>{};e.recordDOM&&(d=initStyleSheetObserver(e,{win:r}),f=initAdoptedStyleSheetObserver(e,e.doc),p=initStyleDeclarationObserver(e,{win:r}),e.collectFonts&&(m=initFontObserver(e)));let h=initSelectionObserver(e),g=initCustomElementObserver(e),_=[];for(let t of e.plugins)_.push(t.observer(t.callback,r,t.options));return callbackWrapper(()=>{mutationBuffers.forEach(e=>e.reset()),i?.disconnect(),a(),o(),s(),c(),l(),u(),d(),f(),p(),m(),h(),g(),_.forEach(e=>e())})}function hasNestedCSSRule(e){return window[e]!==void 0}function canMonkeyPatchNestedCSSRule(e){return!!(window[e]!==void 0&&window[e].prototype&&`insertRule`in window[e].prototype&&`deleteRule`in window[e].prototype)}function variableListFor$1(e,t){let r=canvasVarMap.get(e);return r||(r=new Map,canvasVarMap.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}function serializeArg(e,t,r){if(e instanceof Array)return e.map(e=>serializeArg(e,t,r));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer)return{rr_type:e.constructor.name,base64:encode(e)};if(e instanceof DataView)return{rr_type:e.constructor.name,args:[serializeArg(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){let t=e.constructor.name,{src:r}=e;return{rr_type:t,src:r}}else if(e instanceof HTMLCanvasElement)return{rr_type:`HTMLImageElement`,src:e.toDataURL()};else if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[serializeArg(e.data,t,r),e.width,e.height]};else if(isInstanceOfWebGLObject(e,t)||typeof e==`object`)return{rr_type:e.constructor.name,index:saveWebGLVar(e,t,r)};return e}function initCanvas2DMutationObserver(e,t,r,i){let a=[],o=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(let s of o)try{if(typeof t.CanvasRenderingContext2D.prototype[s]!=`function`)continue;let o=patch(t.CanvasRenderingContext2D.prototype,s,function(a){return function(...o){return isBlocked(this.canvas,r,i,!0)||setTimeout(()=>{let r=serializeArgs(o,t,this);e(this.canvas,{type:CanvasContext[`2D`],property:s,args:r})},0),a.apply(this,o)}});a.push(o)}catch{let r=hookSetter(t.CanvasRenderingContext2D.prototype,s,{set(t){e(this.canvas,{type:CanvasContext[`2D`],property:s,args:[t],setter:!0})}});a.push(r)}return()=>{a.forEach(e=>e())}}function getNormalizedContextName(e){return e===`experimental-webgl`?`webgl`:e}function initCanvasContextObserver(e,t,r,i){let a=[];try{let o=patch(e.HTMLCanvasElement.prototype,`getContext`,function(e){return function(a,...o){if(!isBlocked(this,t,r,!0)){let e=getNormalizedContextName(a);if(`__context`in this||(this.__context=e),i&&[`webgl`,`webgl2`].includes(e))if(o[0]&&typeof o[0]==`object`){let e=o[0];e.preserveDrawingBuffer||=!0}else o.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[a,...o])}});a.push(o)}catch{console.error(`failed to patch HTMLCanvasElement.prototype.getContext`)}return()=>{a.forEach(e=>e())}}function patchGLPrototype(e,t,r,i,a,o){let s=[],c=Object.getOwnPropertyNames(e);for(let l of c)if(![`isContextLost`,`canvas`,`drawingBufferWidth`,`drawingBufferHeight`].includes(l))try{if(typeof e[l]!=`function`)continue;let c=patch(e,l,function(e){return function(...s){let c=e.apply(this,s);if(saveWebGLVar(c,o,this),`tagName`in this.canvas&&!isBlocked(this.canvas,i,a,!0)){let e={type:t,property:l,args:serializeArgs(s,o,this)};r(this.canvas,e)}return c}});s.push(c)}catch{let i=hookSetter(e,l,{set(e){r(this.canvas,{type:t,property:l,args:[e],setter:!0})}});s.push(i)}return s}function initCanvasWebGLMutationObserver(e,t,r,i){let a=[];return a.push(...patchGLPrototype(t.WebGLRenderingContext.prototype,CanvasContext.WebGL,e,r,i,t)),t.WebGL2RenderingContext!==void 0&&a.push(...patchGLPrototype(t.WebGL2RenderingContext.prototype,CanvasContext.WebGL2,e,r,i,t)),()=>{a.forEach(e=>e())}}function WorkerWrapper(e){let t;try{if(t=blob&&(window.URL||window.webkitURL).createObjectURL(blob),!t)throw``;let r=new Worker(t,{name:e?.name});return r.addEventListener(`error`,()=>{(window.URL||window.webkitURL).revokeObjectURL(t)}),r}catch{return new Worker(`data:text/javascript;base64,`+encodedJs,{name:e?.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}function record(e={}){let{emit:t,checkoutEveryNms:r,checkoutEveryNth:i,blockClass:a=`rr-block`,blockSelector:o=null,ignoreClass:s=`rr-ignore`,ignoreSelector:c=null,maskTextClass:l=`rr-mask`,maskTextSelector:u=null,inlineStylesheet:d=!0,maskAllInputs:f,maskInputOptions:p,slimDOMOptions:m,maskInputFn:h,maskTextFn:g,hooks:_,packFn:v,sampling:y={},dataURLOptions:b={},mousemoveWait:S,recordDOM:C=!0,recordCanvas:w=!1,recordCrossOriginIframes:T=!1,recordAfter:E=e.recordAfter===`DOMContentLoaded`?e.recordAfter:`load`,userTriggeredOnInput:D=!1,collectFonts:O=!1,inlineImages:k=!1,plugins:A,keepIframeSrcFn:j=()=>!1,ignoreCSSAttributes:M=new Set([]),errorHandler:N}=e;registerErrorHandler(N);let P=T?window.parent===window:!0,F=!1;if(!P)try{window.parent.document&&(F=!1)}catch{F=!0}if(P&&!t)throw Error(`emit function is required`);if(!P&&!F)return()=>{};S!==void 0&&y.mousemove===void 0&&(y.mousemove=S),mirror.reset();let I=f===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:p===void 0?{password:!0}:p,L=m===!0||m===`all`?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:m===`all`,headMetaDescKeywords:m===`all`,headTitleMutations:m===`all`}:m||{};polyfill$1();let R,z=0,B=e=>{for(let t of A||[])t.eventProcessor&&(e=t.eventProcessor(e));return v&&!F&&(e=v(e)),e};wrappedEmit=(e,a)=>{var o;let s=e;if(s.timestamp=nowTimestamp(),mutationBuffers[0]?.isFrozen()&&s.type!==EventType.FullSnapshot&&!(s.type===EventType.IncrementalSnapshot&&s.data.source===IncrementalSource.Mutation)&&mutationBuffers.forEach(e=>e.unfreeze()),P)t?.(B(s),a);else if(F){let e={type:`rrweb`,event:B(s),origin:window.location.origin,isCheckout:a};window.parent.postMessage(e,`*`)}if(s.type===EventType.FullSnapshot)R=s,z=0;else if(s.type===EventType.IncrementalSnapshot){if(s.data.source===IncrementalSource.Mutation&&s.data.isAttachIframe)return;z++;let e=i&&z>=i,t=r&&s.timestamp-R.timestamp>r;(e||t)&&takeFullSnapshot$1(!0)}};let V=e=>{wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Mutation,...e}})},H=e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Scroll,...e}}),U=e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.CanvasMutation,...e}}),W=new StylesheetManager({mutationCb:V,adoptedStyleSheetCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.AdoptedStyleSheet,...e}})}),G=new IframeManager({mirror,mutationCb:V,stylesheetManager:W,recordCrossOriginIframes:T,wrappedEmit});for(let e of A||[])e.getMirror&&e.getMirror({nodeMirror:mirror,crossOriginIframeMirror:G.crossOriginIframeMirror,crossOriginIframeStyleMirror:G.crossOriginIframeStyleMirror});let K=new ProcessedNodeManager;canvasManager=new CanvasManager({recordCanvas:w,mutationCb:U,win:window,blockClass:a,blockSelector:o,mirror,sampling:y.canvas,dataURLOptions:b});let q=new ShadowDomManager({mutationCb:V,scrollCb:H,bypassOptions:{blockClass:a,blockSelector:o,maskTextClass:l,maskTextSelector:u,inlineStylesheet:d,maskInputOptions:I,dataURLOptions:b,maskTextFn:g,maskInputFn:h,recordCanvas:w,inlineImages:k,sampling:y,slimDOMOptions:L,iframeManager:G,stylesheetManager:W,canvasManager,keepIframeSrcFn:j,processedNodeManager:K},mirror});takeFullSnapshot$1=(e=!1)=>{if(!C)return;wrappedEmit({type:EventType.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}},e),W.reset(),q.init(),mutationBuffers.forEach(e=>e.lock());let t=snapshot(document,{mirror,blockClass:a,blockSelector:o,maskTextClass:l,maskTextSelector:u,inlineStylesheet:d,maskAllInputs:I,maskTextFn:g,maskInputFn:h,slimDOM:L,dataURLOptions:b,recordCanvas:w,inlineImages:k,onSerialize:e=>{isSerializedIframe(e,mirror)&&G.addIframe(e),isSerializedStylesheet(e,mirror)&&W.trackLinkElement(e),hasShadowRoot(e)&&q.addShadowRoot(index.shadowRoot(e),document)},onIframeLoad:(e,t)=>{G.attachIframe(e,t),q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{W.attachLinkElement(e,t)},keepIframeSrcFn:j});if(!t)return console.warn(`Failed to snapshot the document`);wrappedEmit({type:EventType.FullSnapshot,data:{node:t,initialOffset:getWindowScroll(window)}},e),mutationBuffers.forEach(e=>e.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&W.adoptStyleSheets(document.adoptedStyleSheets,mirror.getId(document))};try{let e=[],t=e=>{var t;return callbackWrapper(initObservers)({mutationCb:V,mousemoveCb:(e,t)=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.MouseInteraction,...e}}),scrollCb:H,viewportResizeCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.ViewportResize,...e}}),inputCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Input,...e}}),mediaInteractionCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.MediaInteraction,...e}}),styleSheetRuleCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.StyleSheetRule,...e}}),styleDeclarationCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.StyleDeclaration,...e}}),canvasMutationCb:U,fontCb:e=>wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Font,...e}}),selectionCb:e=>{wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Selection,...e}})},customElementCb:e=>{wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.CustomElement,...e}})},blockClass:a,ignoreClass:s,ignoreSelector:c,maskTextClass:l,maskTextSelector:u,maskInputOptions:I,inlineStylesheet:d,sampling:y,recordDOM:C,recordCanvas:w,inlineImages:k,userTriggeredOnInput:D,collectFonts:O,doc:e,maskInputFn:h,maskTextFn:g,keepIframeSrcFn:j,blockSelector:o,slimDOMOptions:L,dataURLOptions:b,mirror,iframeManager:G,stylesheetManager:W,shadowDomManager:q,processedNodeManager:K,canvasManager,ignoreCSSAttributes:M,plugins:(A?.filter(e=>e.observer))?.map(e=>({observer:e.observer,options:e.options,callback:t=>wrappedEmit({type:EventType.Plugin,data:{plugin:e.name,payload:t}})}))||[]},_)};G.addLoadListener(r=>{try{e.push(t(r.contentDocument))}catch(e){console.warn(e)}});let r=()=>{takeFullSnapshot$1(),e.push(t(document)),recording=!0};return document.readyState===`interactive`||document.readyState===`complete`?r():(e.push(on(`DOMContentLoaded`,()=>{wrappedEmit({type:EventType.DomContentLoaded,data:{}}),E===`DOMContentLoaded`&&r()})),e.push(on(`load`,()=>{wrappedEmit({type:EventType.Load,data:{}}),E===`load`&&r()},window))),()=>{e.forEach(e=>e()),K.destroy(),recording=!1,unregisterErrorHandler()}}catch(e){console.warn(e)}}var __defProp,__defNormalProp,__publicField,_a,__defProp$1,__defNormalProp$1,__publicField$1,NodeType$3,testableAccessors$1,testableMethods$1,untaintedBasePrototype$1,isAngularZonePresent$1,untaintedAccessorCache$1,untaintedMethodCache$1,index$1,Mirror,ORIGINAL_ATTRIBUTE_NAME,URL_IN_CSS_REF,URL_PROTOCOL_MATCH,URL_WWW_MATCH,DATA_URI,_id,tagNameRegex,IGNORED_NODE,canvasService,canvasCtx,SRCSET_NOT_SPACES,SRCSET_COMMAS_OR_SPACES,cachedDocument,picocolors_browser$1,x$1,create$1,picocolors_browserExports$1,require$$2$1,pico$1,terminalHighlight$1$1,CssSyntaxError$3$1,cssSyntaxError$1,symbols$1,DEFAULT_RAW$1,Stringifier$2$1,stringifier$1,Stringifier$1$1,stringify_1$1,isClean$2$1,my$2$1,CssSyntaxError$2$1,Stringifier2$1,stringify$3$1,Node$4$1,node$1,Node$3$1,Declaration$4$1,declaration$1,urlAlphabet$1,customAlphabet$1,nanoid$1$1,nonSecure$1,SourceMapConsumer$2$1,SourceMapGenerator$2$1,existsSync$1,readFileSync$1,dirname$1$1,join$1,PreviousMap$2$1,previousMap$1,SourceMapConsumer$1$1,SourceMapGenerator$1$1,fileURLToPath$1,pathToFileURL$1$1,isAbsolute$1,resolve$1$1,nanoid$2,terminalHighlight$2,CssSyntaxError$1$1,PreviousMap$1$1,fromOffsetCache$1,sourceMapAvailable$1$1,pathAvailable$1$1,Input$4$1,input$1,SourceMapConsumer$3,SourceMapGenerator$3,dirname$2,relative$1,resolve$2,sep$1,pathToFileURL$2,Input$3$1,sourceMapAvailable$2,pathAvailable$2,mapGenerator$1,Node$2$1,Comment$4$1,comment$1,isClean$1$1,my$1$1,Declaration$3$1,Comment$3$1,Node$1$1,parse$4$1,Rule$4$1,AtRule$4$1,Root$6$1,Container$7$1,container$1,Container$6$1,LazyResult$4$1,Processor$3$1,Document$3$1,document$1$1,Warning$2$1,warning$1,Warning$1$1,Result$3$1,result$1,SINGLE_QUOTE$1,DOUBLE_QUOTE$1,BACKSLASH$1,SLASH$1,NEWLINE$1,SPACE$1,FEED$1,TAB$1,CR$1,OPEN_SQUARE$1,CLOSE_SQUARE$1,OPEN_PARENTHESES$1,CLOSE_PARENTHESES$1,OPEN_CURLY$1,CLOSE_CURLY$1,SEMICOLON$1,ASTERISK$1,COLON$1,AT$1,RE_AT_END$1,RE_WORD_END$1,RE_BAD_BRACKET$1,RE_HEX_ESCAPE$1,tokenize$1,Container$5$1,AtRule$3$1,atRule$1,Container$4$1,LazyResult$3$1,Processor$2$1,Root$5$1,root$1,list$2$1,list_1$1,Container$3$1,list$1$1,Rule$3$1,rule$1,Declaration$2$1,tokenizer2$1,Comment$2$1,AtRule$2$1,Root$4$1,Rule$2$1,SAFE_COMMENT_NEIGHBOR$1,parser$1,Container$2$1,Parser2$1,Input$2$1,parse_1$1,isClean$3,my$3,MapGenerator$1$1,stringify$2$1,Container$1$1,Document$2$1,Result$2$1,parse$2$1,Root$3$1,TYPE_TO_CLASS_NAME$1,PLUGIN_PROPS$1,NOT_VISITORS$1,CHILDREN$1,postcss$2$1,LazyResult$2$1,lazyResult$1,MapGenerator2$1,stringify$1$1,parse$1$1,Result$1$1,NoWorkResult$1$1,noWorkResult$1,NoWorkResult2$1,LazyResult$1$1,Document$1$1,Root$2$1,Processor$1$1,processor$1,Declaration$1$1,PreviousMap2$1,Comment$1$1,AtRule$1$1,Input$1$1,Root$1$1,Rule$1$1,fromJSON_1$1,CssSyntaxError2$1,Declaration2$1,LazyResult2$1,Container2$1,Processor2$1,stringify$5,fromJSON$2,Document22,Warning2$1,Comment2$1,AtRule2$1,Result2$1,Input2$1,parse$5,list$3,Rule2$1,Root2$1,Node2$1,postcss_1$1,postcss$1$1,__defProp2,__defNormalProp2,__publicField2,picocolors_browser,x,create,picocolors_browserExports,require$$2,pico,terminalHighlight$1,CssSyntaxError$3,cssSyntaxError,symbols,DEFAULT_RAW,Stringifier$2,stringifier,Stringifier$1,stringify_1,isClean$2,my$2,CssSyntaxError$2,Stringifier22,stringify$3,Node$4,node,Node$3,Declaration$4,declaration,urlAlphabet,customAlphabet,nanoid$1,nonSecure,SourceMapConsumer$2,SourceMapGenerator$2,existsSync,readFileSync,dirname$1,join,PreviousMap$2,previousMap,SourceMapConsumer$1,SourceMapGenerator$1,fileURLToPath,pathToFileURL$1,isAbsolute,resolve$1,nanoid,terminalHighlight,CssSyntaxError$1,PreviousMap$1,fromOffsetCache,sourceMapAvailable$1,pathAvailable$1,Input$4,input,SourceMapConsumer,SourceMapGenerator,dirname,relative,resolve,sep,pathToFileURL,Input$3,sourceMapAvailable,pathAvailable,mapGenerator,Node$2,Comment$4,comment,isClean$1,my$1,Declaration$3,Comment$3,Node$1,parse$4,Rule$4,AtRule$4,Root$6,Container$7,container,Container$6,LazyResult$4,Processor$3,Document$3,document$1,Warning$2,warning,Warning$1,Result$3,result,SINGLE_QUOTE,DOUBLE_QUOTE,BACKSLASH,SLASH,NEWLINE,SPACE,FEED,TAB,CR,OPEN_SQUARE,CLOSE_SQUARE,OPEN_PARENTHESES,CLOSE_PARENTHESES,OPEN_CURLY,CLOSE_CURLY,SEMICOLON,ASTERISK,COLON,AT,RE_AT_END,RE_WORD_END,RE_BAD_BRACKET,RE_HEX_ESCAPE,tokenize,Container$5,AtRule$3,atRule,Container$4,LazyResult$3,Processor$2,Root$5,root,list$2,list_1,Container$3,list$1,Rule$3,rule,Declaration$2,tokenizer22,Comment$2,AtRule$2,Root$4,Rule$2,SAFE_COMMENT_NEIGHBOR,parser,Container$2,Parser22,Input$2,parse_1,isClean,my,MapGenerator$1,stringify$2,Container$1,Document$2,Result$2,parse$2,Root$3,TYPE_TO_CLASS_NAME,PLUGIN_PROPS,NOT_VISITORS,CHILDREN,postcss$2,LazyResult$2,lazyResult,MapGenerator22,stringify$1,parse$1,Result$1,NoWorkResult$1,noWorkResult,NoWorkResult22,LazyResult$1,Document$1,Root$2,Processor$1,processor,Declaration$1,PreviousMap22,Comment$1,AtRule$1,Input$1,Root$1,Rule$1,fromJSON_1,CssSyntaxError22,Declaration22,LazyResult22,Container22,Processor22,stringify,fromJSON,Document222,Warning22,Comment22,AtRule22,Result22,Input22,parse,list,Rule22,Root22,Node22,postcss_1,postcss$1,BaseRRNode,testableAccessors,testableMethods,untaintedBasePrototype,isAngularZonePresent,untaintedAccessorCache,untaintedMethodCache,index,DEPARTED_MIRROR_ACCESS_WARNING,_mirror,nowTimestamp,StyleSheetMirror,EventType,IncrementalSource,MouseInteractions,PointerTypes,CanvasContext,MediaInteractions,NodeType,DoubleLinkedList,moveKey,MutationBuffer,errorHandler,callbackWrapper,mutationBuffers,INPUT_TAGS,lastInputValueMap,CrossOriginIframeMirror,IframeManager,ShadowDomManager,chars,lookup,i$1,encode,canvasVarMap,saveWebGLVar,serializeArgs,isInstanceOfWebGLObject,encodedJs,decodeBase64,blob,CanvasManager,StylesheetManager,ProcessedNodeManager,wrappedEmit,takeFullSnapshot$1,canvasManager,recording,mirror,n,init_record=__esmMin((()=>{for(__defProp=Object.defineProperty,__defNormalProp=(e,t,r)=>(t in e)?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__publicField=(e,t,r)=>__defNormalProp(e,typeof t==`symbol`?t:t+``,r),__defProp$1=Object.defineProperty,__defNormalProp$1=(e,t,r)=>(t in e)?__defProp$1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__publicField$1=(e,t,r)=>__defNormalProp$1(e,typeof t==`symbol`?t:t+``,r),NodeType$3=(e=>(e[e.Document=0]=`Document`,e[e.DocumentType=1]=`DocumentType`,e[e.Element=2]=`Element`,e[e.Text=3]=`Text`,e[e.CDATA=4]=`CDATA`,e[e.Comment=5]=`Comment`,e))(NodeType$3||{}),testableAccessors$1={Node:[`childNodes`,`parentNode`,`parentElement`,`textContent`],ShadowRoot:[`host`,`styleSheets`],Element:[`shadowRoot`,`querySelector`,`querySelectorAll`],MutationObserver:[]},testableMethods$1={Node:[`contains`,`getRootNode`],ShadowRoot:[`getSelection`],Element:[],MutationObserver:[`constructor`]},untaintedBasePrototype$1={},isAngularZonePresent$1=()=>!!globalThis.Zone,untaintedAccessorCache$1={},untaintedMethodCache$1={},index$1={childNodes:childNodes$1,parentNode:parentNode$1,parentElement:parentElement$1,textContent:textContent$1,contains:contains$1,getRootNode:getRootNode$1,host:host$1,styleSheets:styleSheets$1,shadowRoot:shadowRoot$1,querySelector:querySelector$1,querySelectorAll:querySelectorAll$1,mutationObserver:mutationObserverCtor$1},Mirror=class{constructor(){__publicField$1(this,`idNodeMap`,new Map),__publicField$1(this,`nodeMetaMap`,new WeakMap)}getId(e){var t;return e?this.getMeta(e)?.id??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){let r=this.getNode(e);if(r){let e=this.nodeMetaMap.get(r);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}},ORIGINAL_ATTRIBUTE_NAME=`__rrweb_original__`,URL_IN_CSS_REF=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,URL_PROTOCOL_MATCH=/^(?:[a-z+]+:)?\/\//i,URL_WWW_MATCH=/^www\..*/i,DATA_URI=/^(data:)([^,]*),(.*)/i,_id=1,tagNameRegex=RegExp(`[^a-z0-9-_:]`),IGNORED_NODE=-2,SRCSET_NOT_SPACES=/^[^ \t\n\r\u000c]+/,SRCSET_COMMAS_OR_SPACES=/^[, \t\n\r\u000c]+/,cachedDocument=new WeakMap,picocolors_browser$1={exports:{}},x$1=String,create$1=function(){return{isColorSupported:!1,reset:x$1,bold:x$1,dim:x$1,italic:x$1,underline:x$1,inverse:x$1,hidden:x$1,strikethrough:x$1,black:x$1,red:x$1,green:x$1,yellow:x$1,blue:x$1,magenta:x$1,cyan:x$1,white:x$1,gray:x$1,bgBlack:x$1,bgRed:x$1,bgGreen:x$1,bgYellow:x$1,bgBlue:x$1,bgMagenta:x$1,bgCyan:x$1,bgWhite:x$1}},picocolors_browser$1.exports=create$1(),picocolors_browser$1.exports.createColors=create$1,picocolors_browserExports$1=picocolors_browser$1.exports,require$$2$1=getAugmentedNamespace$1(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:`Module`}))),pico$1=picocolors_browserExports$1,terminalHighlight$1$1=require$$2$1,CssSyntaxError$3$1=class e extends Error{constructor(t,r,i,a,o,s){super(t),this.name=`CssSyntaxError`,this.reason=t,o&&(this.file=o),a&&(this.source=a),s&&(this.plugin=s),r!==void 0&&i!==void 0&&(typeof r==`number`?(this.line=r,this.column=i):(this.line=r.line,this.column=r.column,this.endLine=i.line,this.endColumn=i.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+`: `:``,this.message+=this.file?this.file:`<css input>`,this.line!==void 0&&(this.message+=`:`+this.line+`:`+this.column),this.message+=`: `+this.reason}showSourceCode(e){if(!this.source)return``;let t=this.source;e??=pico$1.isColorSupported,terminalHighlight$1$1&&e&&(t=terminalHighlight$1$1(t));let r=t.split(/\r?\n/),i=Math.max(this.line-3,0),a=Math.min(this.line+2,r.length),o=String(a).length,s,c;if(e){let{bold:e,gray:t,red:r}=pico$1.createColors(!0);s=t=>e(r(t)),c=e=>t(e)}else s=c=e=>e;return r.slice(i,a).map((e,t)=>{let r=i+1+t,a=` `+(` `+r).slice(-o)+` | `;if(r===this.line){let t=c(a.replace(/\d/g,` `))+e.slice(0,this.column-1).replace(/[^\t]/g,` `);return s(`>`)+c(a)+e+`
 `+t+s(`^`)}return` `+c(a)+e}).join(`
`)}toString(){let e=this.showSourceCode();return e&&=`

`+e+`
`,this.name+`: `+this.message+e}},cssSyntaxError$1=CssSyntaxError$3$1,CssSyntaxError$3$1.default=CssSyntaxError$3$1,symbols$1={},symbols$1.isClean=Symbol(`isClean`),symbols$1.my=Symbol(`my`),DEFAULT_RAW$1={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:` `,beforeRule:`
`,colon:`: `,commentLeft:` `,commentRight:` `,emptyBody:``,indent:`    `,semicolon:!1},Stringifier$2$1=class{constructor(e){this.builder=e}atrule(e,t){let r=`@`+e.name,i=e.params?this.rawValue(e,`params`):``;if(e.raws.afterName===void 0?i&&(r+=` `):r+=e.raws.afterName,e.nodes)this.block(e,r+i);else{let a=(e.raws.between||``)+(t?`;`:``);this.builder(r+i+a,e)}}beforeAfter(e,t){let r;r=e.type===`decl`?this.raw(e,null,`beforeDecl`):e.type===`comment`?this.raw(e,null,`beforeComment`):t===`before`?this.raw(e,null,`beforeRule`):this.raw(e,null,`beforeClose`);let i=e.parent,a=0;for(;i&&i.type!==`root`;)a+=1,i=i.parent;if(r.includes(`
`)){let t=this.raw(e,null,`indent`);if(t.length)for(let e=0;e<a;e++)r+=t}return r}block(e,t){let r=this.raw(e,`between`,`beforeOpen`);this.builder(t+r+`{`,e,`start`);let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,`after`)):i=this.raw(e,`after`,`emptyBody`),i&&this.builder(i),this.builder(`}`,e,`end`)}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type===`comment`;)--t;let r=this.raw(e,`semicolon`);for(let i=0;i<e.nodes.length;i++){let a=e.nodes[i],o=this.raw(a,`before`);o&&this.builder(o),this.stringify(a,t!==i||r)}}comment(e){let t=this.raw(e,`left`,`commentLeft`),r=this.raw(e,`right`,`commentRight`);this.builder(`/*`+t+e.text+r+`*/`,e)}decl(e,t){let r=this.raw(e,`between`,`colon`),i=e.prop+r+this.rawValue(e,`value`);e.important&&(i+=e.raws.important||` !important`),t&&(i+=`;`),this.builder(i,e)}document(e){this.body(e)}raw(e,t,r){let i;if(r||=t,t&&(i=e.raws[t],i!==void 0))return i;let a=e.parent;if(r===`before`&&(!a||a.type===`root`&&a.first===e||a&&a.type===`document`))return``;if(!a)return DEFAULT_RAW$1[r];let o=e.root();if(o.rawCache||={},o.rawCache[r]!==void 0)return o.rawCache[r];if(r===`before`||r===`after`)return this.beforeAfter(e,r);{let a=`raw`+capitalize$1(r);this[a]?i=this[a](o,e):o.walk(e=>{if(i=e.raws[t],i!==void 0)return!1})}return i===void 0&&(i=DEFAULT_RAW$1[r]),o.rawCache[r]=i,i}rawBeforeClose(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length>0&&e.raws.after!==void 0)return t=e.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,``)),!1}),t&&=t.replace(/\S/g,``),t}rawBeforeComment(e,t){let r;return e.walkComments(e=>{if(e.raws.before!==void 0)return r=e.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,``)),!1}),r===void 0?r=this.raw(t,null,`beforeDecl`):r&&=r.replace(/\S/g,``),r}rawBeforeDecl(e,t){let r;return e.walkDecls(e=>{if(e.raws.before!==void 0)return r=e.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,``)),!1}),r===void 0?r=this.raw(t,null,`beforeRule`):r&&=r.replace(/\S/g,``),r}rawBeforeOpen(e){let t;return e.walk(e=>{if(e.type!==`decl`&&(t=e.raws.between,t!==void 0))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&r.raws.before!==void 0)return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,``)),!1}),t&&=t.replace(/\S/g,``),t}rawColon(e){let t;return e.walkDecls(e=>{if(e.raws.between!==void 0)return t=e.raws.between.replace(/[^\s:]/g,``),!1}),t}rawEmptyBody(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length===0&&(t=e.raws.after,t!==void 0))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let i=r.parent;if(i&&i!==e&&i.parent&&i.parent===e&&r.raws.before!==void 0){let e=r.raws.before.split(`
`);return t=e[e.length-1],t=t.replace(/\S/g,``),!1}}),t}rawSemicolon(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length&&e.last.type===`decl`&&(t=e.raws.semicolon,t!==void 0))return!1}),t}rawValue(e,t){let r=e[t],i=e.raws[t];return i&&i.value===r?i.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,`selector`)),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,`end`)}stringify(e,t){if(!this[e.type])throw Error(`Unknown AST node type `+e.type+`. Maybe you need to change PostCSS stringifier.`);this[e.type](e,t)}},stringifier$1=Stringifier$2$1,Stringifier$2$1.default=Stringifier$2$1,Stringifier$1$1=stringifier$1,stringify_1$1=stringify$4$1,stringify$4$1.default=stringify$4$1,{isClean:isClean$2$1,my:my$2$1}=symbols$1,CssSyntaxError$2$1=cssSyntaxError$1,Stringifier2$1=stringifier$1,stringify$3$1=stringify_1$1,Node$4$1=class{constructor(e={}){for(let t in this.raws={},this[isClean$2$1]=!1,this[my$2$1]=!0,e)if(t===`nodes`){this.nodes=[];for(let r of e[t])typeof r.clone==`function`?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=cloneNode$1(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new CssSyntaxError$2$1(e)}getProxyProcessor(){return{get(e,t){return t===`proxyOf`?e:t===`root`?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r?!0:(e[t]=r,(t===`prop`||t===`value`||t===`name`||t===`params`||t===`important`||t===`text`)&&e.markDirty(),!0)}}}markDirty(){if(this[isClean$2$1]){this[isClean$2$1]=!1;let e=this;for(;e=e.parent;)e[isClean$2$1]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let i=t.indexOf(e.word);i!==-1&&(r=this.positionInside(i,t))}return r}positionInside(e,t){let r=t||this.toString(),i=this.source.start.column,a=this.source.start.line;for(let t=0;t<e;t++)r[t]===`
`?(i=1,a+=1):i+=1;return{column:i,line:a}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let i=this.toString(),a=i.indexOf(e.word);a!==-1&&(t=this.positionInside(a,i),r=this.positionInside(a+e.word.length,i))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:typeof e.endIndex==`number`?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new Stringifier2$1().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let i of e)i===this?r=!0:r?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);r||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!==`document`;)e=e.parent;return e}toJSON(e,t){let r={},i=t==null;t||=new Map;let a=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e)||e===`parent`||e===`proxyCache`)continue;let i=this[e];if(Array.isArray(i))r[e]=i.map(e=>typeof e==`object`&&e.toJSON?e.toJSON(null,t):e);else if(typeof i==`object`&&i.toJSON)r[e]=i.toJSON(null,t);else if(e===`source`){let o=t.get(i.input);o??(o=a,t.set(i.input,a),a++),r[e]={end:i.end,inputId:o,start:i.start}}else r[e]=i}return i&&(r.inputs=[...t.keys()].map(e=>e.toJSON())),r}toProxy(){return this.proxyCache||=new Proxy(this,this.getProxyProcessor()),this.proxyCache}toString(e=stringify$3$1){e.stringify&&(e=e.stringify);let t=``;return e(this,e=>{t+=e}),t}warn(e,t,r){let i={node:this};for(let e in r)i[e]=r[e];return e.warn(t,i)}get proxyOf(){return this}},node$1=Node$4$1,Node$4$1.default=Node$4$1,Node$3$1=node$1,Declaration$4$1=class extends Node$3$1{constructor(e){e&&e.value!==void 0&&typeof e.value!=`string`&&(e={...e,value:String(e.value)}),super(e),this.type=`decl`}get variable(){return this.prop.startsWith(`--`)||this.prop[0]===`$`}},declaration$1=Declaration$4$1,Declaration$4$1.default=Declaration$4$1,urlAlphabet$1=`useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict`,customAlphabet$1=(e,t=21)=>(r=t)=>{let i=``,a=r;for(;a--;)i+=e[Math.random()*e.length|0];return i},nanoid$1$1=(e=21)=>{let t=``,r=e;for(;r--;)t+=urlAlphabet$1[Math.random()*64|0];return t},nonSecure$1={nanoid:nanoid$1$1,customAlphabet:customAlphabet$1},{SourceMapConsumer:SourceMapConsumer$2$1,SourceMapGenerator:SourceMapGenerator$2$1}=require$$2$1,{existsSync:existsSync$1,readFileSync:readFileSync$1}=require$$2$1,{dirname:dirname$1$1,join:join$1}=require$$2$1,PreviousMap$2$1=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,`data:`);let r=t.map?t.map.prev:void 0,i=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=dirname$1$1(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||=new SourceMapConsumer$2$1(this.text),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/;if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return fromBase64$1(e.substr(RegExp.lastMatch.length));let i=e.match(/data:application\/json;([^,]+),/)[1];throw Error(`Unsupported source map encoding `+i)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,``).trim()}isMap(e){return typeof e==`object`?typeof e.mappings==`string`||typeof e._mappings==`string`||Array.isArray(e.sections):!1}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),i=e.indexOf(`*/`,r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,i)))}loadFile(e){if(this.root=dirname$1$1(e),existsSync$1(e))return this.mapFile=e,readFileSync$1(e,`utf-8`).toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t==`string`)return t;if(typeof t==`function`){let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw Error(`Unable to load previous source map: `+r.toString());return e}}else if(t instanceof SourceMapConsumer$2$1)return SourceMapGenerator$2$1.fromSourceMap(t).toString();else if(t instanceof SourceMapGenerator$2$1)return t.toString();else if(this.isMap(t))return JSON.stringify(t);else throw Error(`Unsupported previous source map format: `+t.toString())}else if(this.inline)return this.decodeInline(this.annotation);else if(this.annotation){let t=this.annotation;return e&&(t=join$1(dirname$1$1(e),t)),this.loadFile(t)}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}},previousMap$1=PreviousMap$2$1,PreviousMap$2$1.default=PreviousMap$2$1,{SourceMapConsumer:SourceMapConsumer$1$1,SourceMapGenerator:SourceMapGenerator$1$1}=require$$2$1,{fileURLToPath:fileURLToPath$1,pathToFileURL:pathToFileURL$1$1}=require$$2$1,{isAbsolute:isAbsolute$1,resolve:resolve$1$1}=require$$2$1,{nanoid:nanoid$2}=nonSecure$1,terminalHighlight$2=require$$2$1,CssSyntaxError$1$1=cssSyntaxError$1,PreviousMap$1$1=previousMap$1,fromOffsetCache$1=Symbol(`fromOffsetCache`),sourceMapAvailable$1$1=!!(SourceMapConsumer$1$1&&SourceMapGenerator$1$1),pathAvailable$1$1=!!(resolve$1$1&&isAbsolute$1),Input$4$1=class{constructor(e,t={}){if(e==null||typeof e==`object`&&!e.toString)throw Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]===`﻿`||this.css[0]===`￾`?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!pathAvailable$1$1||/^\w+:\/\//.test(t.from)||isAbsolute$1(t.from)?this.file=t.from:this.file=resolve$1$1(t.from)),pathAvailable$1$1&&sourceMapAvailable$1$1){let e=new PreviousMap$1$1(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id=`<input css `+nanoid$2(6)+`>`),this.map&&(this.map.file=this.from)}error(e,t,r,i={}){let a,o,s;if(t&&typeof t==`object`){let e=t,i=r;if(typeof e.offset==`number`){let i=this.fromOffset(e.offset);t=i.line,r=i.col}else t=e.line,r=e.column;if(typeof i.offset==`number`){let e=this.fromOffset(i.offset);o=e.line,s=e.col}else o=i.line,s=i.column}else if(!r){let e=this.fromOffset(t);t=e.line,r=e.col}let c=this.origin(t,r,o,s);return a=c?new CssSyntaxError$1$1(e,c.endLine===void 0?c.line:{column:c.column,line:c.line},c.endLine===void 0?c.column:{column:c.endColumn,line:c.endLine},c.source,c.file,i.plugin):new CssSyntaxError$1$1(e,o===void 0?t:{column:r,line:t},o===void 0?r:{column:s,line:o},this.css,this.file,i.plugin),a.input={column:r,endColumn:s,endLine:o,line:t,source:this.css},this.file&&(pathToFileURL$1$1&&(a.input.url=pathToFileURL$1$1(this.file).toString()),a.input.file=this.file),a}fromOffset(e){let t,r;if(this[fromOffsetCache$1])r=this[fromOffsetCache$1];else{let e=this.css.split(`
`);r=Array(e.length);let t=0;for(let i=0,a=e.length;i<a;i++)r[i]=t,t+=e[i].length+1;this[fromOffsetCache$1]=r}t=r[r.length-1];let i=0;if(e>=t)i=r.length-1;else{let t=r.length-2,a;for(;i<t;)if(a=i+(t-i>>1),e<r[a])t=a-1;else if(e>=r[a+1])i=a+1;else{i=a;break}}return{col:e-r[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:resolve$1$1(this.map.consumer().sourceRoot||this.map.root||`.`,e)}origin(e,t,r,i){if(!this.map)return!1;let a=this.map.consumer(),o=a.originalPositionFor({column:t,line:e});if(!o.source)return!1;let s;typeof r==`number`&&(s=a.originalPositionFor({column:i,line:r}));let c;c=isAbsolute$1(o.source)?pathToFileURL$1$1(o.source):new URL(o.source,this.map.consumer().sourceRoot||pathToFileURL$1$1(this.map.mapFile));let l={column:o.column,endColumn:s&&s.column,endLine:s&&s.line,line:o.line,url:c.toString()};if(c.protocol===`file:`)if(fileURLToPath$1)l.file=fileURLToPath$1(c);else throw Error(`file: protocol is not available in this PostCSS build`);let u=a.sourceContentFor(o.source);return u&&(l.source=u),l}toJSON(){let e={};for(let t of[`hasBOM`,`css`,`file`,`id`])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}},input$1=Input$4$1,Input$4$1.default=Input$4$1,terminalHighlight$2&&terminalHighlight$2.registerInput&&terminalHighlight$2.registerInput(Input$4$1),{SourceMapConsumer:SourceMapConsumer$3,SourceMapGenerator:SourceMapGenerator$3}=require$$2$1,{dirname:dirname$2,relative:relative$1,resolve:resolve$2,sep:sep$1}=require$$2$1,{pathToFileURL:pathToFileURL$2}=require$$2$1,Input$3$1=input$1,sourceMapAvailable$2=!!(SourceMapConsumer$3&&SourceMapGenerator$3),pathAvailable$2=!!(dirname$2&&resolve$2&&relative$1&&sep$1),mapGenerator$1=class{constructor(e,t,r,i){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?`data:application/json;base64,`+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation==`string`?this.mapOpts.annotation:typeof this.mapOpts.annotation==`function`?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+`.map`;let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+`/*# sourceMappingURL=`+e+` */`}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||dirname$2(e.file),i;this.mapOpts.sourcesContent===!1?(i=new SourceMapConsumer$3(e.text),i.sourcesContent&&=null):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type===`comment`&&e.text.indexOf(`# sourceMappingURL=`)===0&&this.root.removeChild(t)}else this.css&&=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,``)}generate(){if(this.clearAnnotation(),pathAvailable$2&&sourceMapAvailable$2&&this.isMap())return this.generateMap();{let e=``;return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=SourceMapGenerator$3.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new SourceMapGenerator$3({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):`<no source>`});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css=``,this.map=new SourceMapGenerator$3({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,r=`<no source>`,i={generated:{column:0,line:0},original:{column:0,line:0},source:``},a,o;this.stringify(this.root,(s,c,l)=>{if(this.css+=s,c&&l!==`end`&&(i.generated.line=e,i.generated.column=t-1,c.source&&c.source.start?(i.source=this.sourcePath(c),i.original.line=c.source.start.line,i.original.column=c.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),a=s.match(/\n/g),a?(e+=a.length,o=s.lastIndexOf(`
`),t=s.length-o):t+=s.length,c&&l!==`start`){let a=c.parent||{raws:{}};(!(c.type===`decl`||c.type===`atrule`&&!c.nodes)||c!==a.last||a.raws.semicolon)&&(c.source&&c.source.end?(i.source=this.sourcePath(c),i.original.line=c.source.end.line,i.original.column=c.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:this.mapOpts.annotation===void 0?this.previous().length?this.previous().some(e=>e.annotation):!0:this.mapOpts.annotation}isInline(){if(this.mapOpts.inline!==void 0)return this.mapOpts.inline;let e=this.mapOpts.annotation;return e!==void 0&&e!==!0?!1:this.previous().length?this.previous().some(e=>e.inline):!0}isMap(){return this.opts.map===void 0?this.previous().length>0:!!this.opts.map}isSourcesContent(){return this.mapOpts.sourcesContent===void 0?this.previous().length?this.previous().some(e=>e.withContent()):!0:this.mapOpts.sourcesContent}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):`to.css`}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?dirname$2(this.opts.to):`.`;typeof this.mapOpts.annotation==`string`&&(r=dirname$2(resolve$2(r,this.mapOpts.annotation)));let i=relative$1(r,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new Input$3$1(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let i=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):`<no source>`;this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString(`base64`):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(pathToFileURL$2){let t=pathToFileURL$2(e).toString();return this.memoizedFileURLs.set(e,t),t}else throw Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;sep$1===`\\`&&(e=e.replace(/\\/g,`/`));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}},Node$2$1=node$1,Comment$4$1=class extends Node$2$1{constructor(e){super(e),this.type=`comment`}},comment$1=Comment$4$1,Comment$4$1.default=Comment$4$1,{isClean:isClean$1$1,my:my$1$1}=symbols$1,Declaration$3$1=declaration$1,Comment$3$1=comment$1,Node$1$1=node$1,Container$7$1=class e extends Node$1$1{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],i=e(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||=0,this.indexes||={},this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t===`proxyOf`?e:e[t]?t===`each`||typeof t==`string`&&t.startsWith(`walk`)?(...r)=>e[t](...r.map(e=>typeof e==`function`?(t,r)=>e(t.toProxy(),r):e)):t===`every`||t===`some`?r=>e[t]((e,...t)=>r(e.toProxy(),...t)):t===`root`?()=>e.root().toProxy():t===`nodes`?e.nodes.map(e=>e.toProxy()):t===`first`||t===`last`?e[t].toProxy():e[t]:e[t]},set(e,t,r){return e[t]===r?!0:(e[t]=r,(t===`name`||t===`params`||t===`selector`)&&e.markDirty(),!0)}}}index(e){return typeof e==`number`?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r=this.index(e),i=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let e of i)this.proxyOf.nodes.splice(r+1,0,e);let a;for(let e in this.indexes)a=this.indexes[e],r<a&&(this.indexes[e]=a+i.length);return this.markDirty(),this}insertBefore(e,t){let r=this.index(e),i=r===0?`prepend`:!1,a=this.normalize(t,this.proxyOf.nodes[r],i).reverse();r=this.index(e);for(let e of a)this.proxyOf.nodes.splice(r,0,e);let o;for(let e in this.indexes)o=this.indexes[e],r<=o&&(this.indexes[e]=o+a.length);return this.markDirty(),this}normalize(t,r){if(typeof t==`string`)t=cleanSource$1(parse$4$1(t).nodes);else if(t===void 0)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,`ignore`)}else if(t.type===`root`&&this.type!==`document`){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,`ignore`)}else if(t.type)t=[t];else if(t.prop){if(t.value===void 0)throw Error(`Value field is missed in node creation`);typeof t.value!=`string`&&(t.value=String(t.value)),t=[new Declaration$3$1(t)]}else if(t.selector)t=[new Rule$4$1(t)];else if(t.name)t=[new AtRule$4$1(t)];else if(t.text)t=[new Comment$3$1(t)];else throw Error(`Unknown node type in node creation`);return t.map(t=>(t[my$1$1]||e.rebuild(t),t=t.proxyOf,t.parent&&t.parent.removeChild(t),t[isClean$1$1]&&markDirtyUp$1(t),t.raws.before===void 0&&r&&r.raws.before!==void 0&&(t.raws.before=r.raws.before.replace(/\S/g,``)),t.parent=this.proxyOf,t))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,`prepend`).reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let i;try{i=e(t,r)}catch(e){throw t.addToError(e)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type===`atrule`&&e.test(r.name))return t(r,i)}):this.walk((r,i)=>{if(r.type===`atrule`&&r.name===e)return t(r,i)}):(t=e,this.walk((e,r)=>{if(e.type===`atrule`)return t(e,r)}))}walkComments(e){return this.walk((t,r)=>{if(t.type===`comment`)return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type===`decl`&&e.test(r.prop))return t(r,i)}):this.walk((r,i)=>{if(r.type===`decl`&&r.prop===e)return t(r,i)}):(t=e,this.walk((e,r)=>{if(e.type===`decl`)return t(e,r)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type===`rule`&&e.test(r.selector))return t(r,i)}):this.walk((r,i)=>{if(r.type===`rule`&&r.selector===e)return t(r,i)}):(t=e,this.walk((e,r)=>{if(e.type===`rule`)return t(e,r)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}},Container$7$1.registerParse=e=>{parse$4$1=e},Container$7$1.registerRule=e=>{Rule$4$1=e},Container$7$1.registerAtRule=e=>{AtRule$4$1=e},Container$7$1.registerRoot=e=>{Root$6$1=e},container$1=Container$7$1,Container$7$1.default=Container$7$1,Container$7$1.rebuild=e=>{e.type===`atrule`?Object.setPrototypeOf(e,AtRule$4$1.prototype):e.type===`rule`?Object.setPrototypeOf(e,Rule$4$1.prototype):e.type===`decl`?Object.setPrototypeOf(e,Declaration$3$1.prototype):e.type===`comment`?Object.setPrototypeOf(e,Comment$3$1.prototype):e.type===`root`&&Object.setPrototypeOf(e,Root$6$1.prototype),e[my$1$1]=!0,e.nodes&&e.nodes.forEach(e=>{Container$7$1.rebuild(e)})},Container$6$1=container$1,Document$3$1=class extends Container$6$1{constructor(e){super({type:`document`,...e}),this.nodes||=[]}toResult(e={}){return new LazyResult$4$1(new Processor$3$1,this,e).stringify()}},Document$3$1.registerLazyResult=e=>{LazyResult$4$1=e},Document$3$1.registerProcessor=e=>{Processor$3$1=e},document$1$1=Document$3$1,Document$3$1.default=Document$3$1,Warning$2$1=class{constructor(e,t={}){if(this.type=`warning`,this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+`: `+this.text:this.text}},warning$1=Warning$2$1,Warning$2$1.default=Warning$2$1,Warning$1$1=warning$1,Result$3$1=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new Warning$1$1(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type===`warning`)}get content(){return this.css}},result$1=Result$3$1,Result$3$1.default=Result$3$1,SINGLE_QUOTE$1=39,DOUBLE_QUOTE$1=34,BACKSLASH$1=92,SLASH$1=47,NEWLINE$1=10,SPACE$1=32,FEED$1=12,TAB$1=9,CR$1=13,OPEN_SQUARE$1=91,CLOSE_SQUARE$1=93,OPEN_PARENTHESES$1=40,CLOSE_PARENTHESES$1=41,OPEN_CURLY$1=123,CLOSE_CURLY$1=125,SEMICOLON$1=59,ASTERISK$1=42,COLON$1=58,AT$1=64,RE_AT_END$1=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END$1=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET$1=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE$1=/[\da-f]/i,tokenize$1=function(e,t={}){let r=e.css.valueOf(),i=t.ignoreErrors,a,o,s,c,l,u,d,f,p,m,h=r.length,g=0,_=[],v=[];function y(){return g}function b(t){throw e.error(`Unclosed `+t,g)}function S(){return v.length===0&&g>=h}function C(e){if(v.length)return v.pop();if(g>=h)return;let t=e?e.ignoreUnclosed:!1;switch(a=r.charCodeAt(g),a){case NEWLINE$1:case SPACE$1:case TAB$1:case CR$1:case FEED$1:o=g;do o+=1,a=r.charCodeAt(o);while(a===SPACE$1||a===NEWLINE$1||a===TAB$1||a===CR$1||a===FEED$1);m=[`space`,r.slice(g,o)],g=o-1;break;case OPEN_SQUARE$1:case CLOSE_SQUARE$1:case OPEN_CURLY$1:case CLOSE_CURLY$1:case COLON$1:case SEMICOLON$1:case CLOSE_PARENTHESES$1:{let e=String.fromCharCode(a);m=[e,e,g];break}case OPEN_PARENTHESES$1:if(f=_.length?_.pop()[1]:``,p=r.charCodeAt(g+1),f===`url`&&p!==SINGLE_QUOTE$1&&p!==DOUBLE_QUOTE$1&&p!==SPACE$1&&p!==NEWLINE$1&&p!==TAB$1&&p!==FEED$1&&p!==CR$1){o=g;do{if(u=!1,o=r.indexOf(`)`,o+1),o===-1)if(i||t){o=g;break}else b(`bracket`);for(d=o;r.charCodeAt(d-1)===BACKSLASH$1;)--d,u=!u}while(u);m=[`brackets`,r.slice(g,o+1),g,o],g=o}else o=r.indexOf(`)`,g+1),c=r.slice(g,o+1),o===-1||RE_BAD_BRACKET$1.test(c)?m=[`(`,`(`,g]:(m=[`brackets`,c,g,o],g=o);break;case SINGLE_QUOTE$1:case DOUBLE_QUOTE$1:s=a===SINGLE_QUOTE$1?`'`:`"`,o=g;do{if(u=!1,o=r.indexOf(s,o+1),o===-1)if(i||t){o=g+1;break}else b(`string`);for(d=o;r.charCodeAt(d-1)===BACKSLASH$1;)--d,u=!u}while(u);m=[`string`,r.slice(g,o+1),g,o],g=o;break;case AT$1:RE_AT_END$1.lastIndex=g+1,RE_AT_END$1.test(r),o=RE_AT_END$1.lastIndex===0?r.length-1:RE_AT_END$1.lastIndex-2,m=[`at-word`,r.slice(g,o+1),g,o],g=o;break;case BACKSLASH$1:for(o=g,l=!0;r.charCodeAt(o+1)===BACKSLASH$1;)o+=1,l=!l;if(a=r.charCodeAt(o+1),l&&a!==SLASH$1&&a!==SPACE$1&&a!==NEWLINE$1&&a!==TAB$1&&a!==CR$1&&a!==FEED$1&&(o+=1,RE_HEX_ESCAPE$1.test(r.charAt(o)))){for(;RE_HEX_ESCAPE$1.test(r.charAt(o+1));)o+=1;r.charCodeAt(o+1)===SPACE$1&&(o+=1)}m=[`word`,r.slice(g,o+1),g,o],g=o;break;default:a===SLASH$1&&r.charCodeAt(g+1)===ASTERISK$1?(o=r.indexOf(`*/`,g+2)+1,o===0&&(i||t?o=r.length:b(`comment`)),m=[`comment`,r.slice(g,o+1),g,o],g=o):(RE_WORD_END$1.lastIndex=g+1,RE_WORD_END$1.test(r),o=RE_WORD_END$1.lastIndex===0?r.length-1:RE_WORD_END$1.lastIndex-2,m=[`word`,r.slice(g,o+1),g,o],_.push(m),g=o);break}return g++,m}function w(e){v.push(e)}return{back:w,endOfFile:S,nextToken:C,position:y}},Container$5$1=container$1,AtRule$3$1=class extends Container$5$1{constructor(e){super(e),this.type=`atrule`}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}},atRule$1=AtRule$3$1,AtRule$3$1.default=AtRule$3$1,Container$5$1.registerAtRule(AtRule$3$1),Container$4$1=container$1,Root$5$1=class extends Container$4$1{constructor(e){super(e),this.type=`root`,this.nodes||=[]}normalize(e,t,r){let i=super.normalize(e);if(t){if(r===`prepend`)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of i)e.raws.before=t.raws.before}return i}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new LazyResult$3$1(new Processor$2$1,this,e).stringify()}},Root$5$1.registerLazyResult=e=>{LazyResult$3$1=e},Root$5$1.registerProcessor=e=>{Processor$2$1=e},root$1=Root$5$1,Root$5$1.default=Root$5$1,Container$4$1.registerRoot(Root$5$1),list$2$1={comma(e){return list$2$1.split(e,[`,`],!0)},space(e){return list$2$1.split(e,[` `,`
`,`	`])},split(e,t,r){let i=[],a=``,o=!1,s=0,c=!1,l=``,u=!1;for(let r of e)u?u=!1:r===`\\`?u=!0:c?r===l&&(c=!1):r===`"`||r===`'`?(c=!0,l=r):r===`(`?s+=1:r===`)`?s>0&&--s:s===0&&t.includes(r)&&(o=!0),o?(a!==``&&i.push(a.trim()),a=``,o=!1):a+=r;return(r||a!==``)&&i.push(a.trim()),i}},list_1$1=list$2$1,list$2$1.default=list$2$1,Container$3$1=container$1,list$1$1=list_1$1,Rule$3$1=class extends Container$3$1{constructor(e){super(e),this.type=`rule`,this.nodes||=[]}get selectors(){return list$1$1.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:`,`+this.raw(`between`,`beforeOpen`);this.selector=e.join(r)}},rule$1=Rule$3$1,Rule$3$1.default=Rule$3$1,Container$3$1.registerRule(Rule$3$1),Declaration$2$1=declaration$1,tokenizer2$1=tokenize$1,Comment$2$1=comment$1,AtRule$2$1=atRule$1,Root$4$1=root$1,Rule$2$1=rule$1,SAFE_COMMENT_NEIGHBOR$1={empty:!0,space:!0},parser$1=class{constructor(e){this.input=e,this.root=new Root$4$1,this.current=this.root,this.spaces=``,this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new AtRule$2$1;t.name=e[1].slice(1),t.name===``&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,i,a,o=!1,s=!1,c=[],l=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r===`(`||r===`[`?l.push(r===`(`?`)`:`]`):r===`{`&&l.length>0?l.push(`}`):r===l[l.length-1]&&l.pop(),l.length===0)if(r===`;`){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(r===`{`){s=!0;break}else if(r===`}`){if(c.length>0){for(a=c.length-1,i=c[a];i&&i[0]===`space`;)i=c[--a];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else c.push(e);else c.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(c),c.length?(t.raws.afterName=this.spacesAndCommentsFromStart(c),this.raw(t,`params`,c),o&&(e=c[c.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between=``)):(t.raws.afterName=``,t.params=``),s&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,i;for(let a=t-1;a>=0&&(i=e[a],!(i[0]!==`space`&&(r+=1,r===2)));a--);throw this.input.error(`Missed semicolon`,i[0]===`word`?i[3]+1:i[2])}colon(e){let t=0,r,i,a;for(let[o,s]of e.entries()){if(r=s,i=r[0],i===`(`&&(t+=1),i===`)`&&--t,t===0&&i===`:`)if(!a)this.doubleColon(r);else if(a[0]===`word`&&a[1]===`progid`)continue;else return o;a=r}return!1}comment(e){let t=new Comment$2$1;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text=``,t.raws.left=r,t.raws.right=``;else{let e=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=tokenizer2$1(this.input)}decl(e,t){let r=new Declaration$2$1;this.init(r,e[0][2]);let i=e[e.length-1];for(i[0]===`;`&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||findLastWithPosition$1(e)),r.source.end.offset++;e[0][0]!==`word`;)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop=``;e.length;){let t=e[0][0];if(t===`:`||t===`space`||t===`comment`)break;r.prop+=e.shift()[1]}r.raws.between=``;let a;for(;e.length;)if(a=e.shift(),a[0]===`:`){r.raws.between+=a[1];break}else a[0]===`word`&&/\w/.test(a[1])&&this.unknownWord([a]),r.raws.between+=a[1];(r.prop[0]===`_`||r.prop[0]===`*`)&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let o=[],s;for(;e.length&&(s=e[0][0],!(s!==`space`&&s!==`comment`));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(a=e[t],a[1].toLowerCase()===`!important`){r.important=!0;let i=this.stringFrom(e,t);i=this.spacesFromEnd(e)+i,i!==` !important`&&(r.raws.important=i);break}else if(a[1].toLowerCase()===`important`){let i=e.slice(0),a=``;for(let e=t;e>0;e--){let t=i[e][0];if(a.trim().indexOf(`!`)===0&&t!==`space`)break;a=i.pop()[1]+a}a.trim().indexOf(`!`)===0&&(r.important=!0,r.raws.important=a,e=i)}if(a[0]!==`space`&&a[0]!==`comment`)break}e.some(e=>e[0]!==`space`&&e[0]!==`comment`)&&(r.raws.between+=o.map(e=>e[1]).join(``),o=[]),this.raw(r,`value`,o.concat(e),t),r.value.includes(`:`)&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error(`Double colon`,{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Rule$2$1;this.init(t,e[2]),t.selector=``,t.raws.between=``,this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||``)+this.spaces,this.spaces=``,this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||``)+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&e.type===`rule`&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces=``)}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces=``,e.type!==`comment`&&(this.semicolon=!1)}other(e){let t=!1,r=null,i=!1,a=null,o=[],s=e[1].startsWith(`--`),c=[],l=e;for(;l;){if(r=l[0],c.push(l),r===`(`||r===`[`)a||=l,o.push(r===`(`?`)`:`]`);else if(s&&i&&r===`{`)a||=l,o.push(`}`);else if(o.length===0)if(r===`;`)if(i){this.decl(c,s);return}else break;else if(r===`{`){this.rule(c);return}else if(r===`}`){this.tokenizer.back(c.pop()),t=!0;break}else r===`:`&&(i=!0);else r===o[o.length-1]&&(o.pop(),o.length===0&&(a=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(a),t&&i){if(!s)for(;c.length&&(l=c[c.length-1][0],!(l!==`space`&&l!==`comment`));)this.tokenizer.back(c.pop());this.decl(c,s)}else this.unknownWord(c)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case`space`:this.spaces+=e[1];break;case`;`:this.freeSemicolon(e);break;case`}`:this.end(e);break;case`comment`:this.comment(e);break;case`at-word`:this.atrule(e);break;case`{`:this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,i){let a,o,s=r.length,c=``,l=!0,u,d;for(let e=0;e<s;e+=1)a=r[e],o=a[0],o===`space`&&e===s-1&&!i?l=!1:o===`comment`?(d=r[e-1]?r[e-1][0]:`empty`,u=r[e+1]?r[e+1][0]:`empty`,!SAFE_COMMENT_NEIGHBOR$1[d]&&!SAFE_COMMENT_NEIGHBOR$1[u]?c.slice(-1)===`,`?l=!1:c+=a[1]:l=!1):c+=a[1];if(!l){let i=r.reduce((e,t)=>e+t[1],``);e.raws[t]={raw:i,value:c}}e[t]=c}rule(e){e.pop();let t=new Rule$2$1;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,`selector`,e),this.current=t}spacesAndCommentsFromEnd(e){let t,r=``;for(;e.length&&(t=e[e.length-1][0],!(t!==`space`&&t!==`comment`));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r=``;for(;e.length&&(t=e[0][0],!(t!==`space`&&t!==`comment`));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r=``;for(;e.length&&(t=e[e.length-1][0],t===`space`);)r=e.pop()[1]+r;return r}stringFrom(e,t){let r=``;for(let i=t;i<e.length;i++)r+=e[i][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error(`Unclosed block`,e.line,e.column)}unclosedBracket(e){throw this.input.error(`Unclosed bracket`,{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error(`Unexpected }`,{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error(`Unknown word`,{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error(`At-rule without name`,{offset:t[2]},{offset:t[2]+t[1].length})}},Container$2$1=container$1,Parser2$1=parser$1,Input$2$1=input$1,parse_1$1=parse$3$1,parse$3$1.default=parse$3$1,Container$2$1.registerParse(parse$3$1),{isClean:isClean$3,my:my$3}=symbols$1,MapGenerator$1$1=mapGenerator$1,stringify$2$1=stringify_1$1,Container$1$1=container$1,Document$2$1=document$1$1,Result$2$1=result$1,parse$2$1=parse_1$1,Root$3$1=root$1,TYPE_TO_CLASS_NAME$1={atrule:`AtRule`,comment:`Comment`,decl:`Declaration`,document:`Document`,root:`Root`,rule:`Rule`},PLUGIN_PROPS$1={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS$1={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN$1=0,postcss$2$1={},LazyResult$2$1=class e{constructor(t,r,i){this.stringified=!1,this.processed=!1;let a;if(typeof r==`object`&&r&&(r.type===`root`||r.type===`document`))a=cleanMarks$1(r);else if(r instanceof e||r instanceof Result$2$1)a=cleanMarks$1(r.root),r.map&&(i.map===void 0&&(i.map={}),i.map.inline||(i.map.inline=!1),i.map.prev=r.map);else{let e=parse$2$1;i.syntax&&(e=i.syntax.parse),i.parser&&(e=i.parser),e.parse&&(e=e.parse);try{a=e(r,i)}catch(e){this.processed=!0,this.error=e}a&&!a[my$3]&&Container$1$1.rebuild(a)}this.result=new Result$2$1(t,a,i),this.helpers={...postcss$2$1,postcss:postcss$2$1,result:this.result},this.plugins=this.processor.plugins.map(e=>typeof e==`object`&&e.prepare?{...e,...e.prepare(this.result)}:e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||=this.runAsync(),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw Error(`Use process(css).then(cb) to work with async plugins`)}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name===`CssSyntaxError`&&!e.plugin?(e.plugin=r.postcssPlugin,e.setMessage()):r.postcssVersion}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if(typeof t==`object`)for(let r in t){if(!PLUGIN_PROPS$1[r]&&/^[A-Z]/.test(r))throw Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!NOT_VISITORS$1[r])if(typeof t[r]==`object`)for(let i in t[r])i===`*`?e(t,r,t[r][i]):e(t,r+`-`+i.toLowerCase(),t[r][i]);else typeof t[r]==`function`&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(isPromise$1(r))try{await r}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[isClean$3];){e[isClean$3]=!0;let t=[toStack$1(e)];for(;t.length>0;){let e=this.visitTick(t);if(isPromise$1(e))try{await e}catch(e){let r=t[t.length-1].node;throw this.handleError(e,r)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type===`document`){let t=e.nodes.map(e=>r(e,this.helpers));await Promise.all(t)}else await r(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e==`object`&&e.Once){if(this.result.root.type===`document`){let t=this.result.root.nodes.map(t=>e.Once(t,this.helpers));return isPromise$1(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e==`function`)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=stringify$2$1;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new MapGenerator$1$1(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins)if(isPromise$1(this.runOnRoot(e)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[isClean$3];)e[isClean$3]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type===`document`)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,i]of e){this.result.lastPlugin=r;let e;try{e=i(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if(t.type!==`root`&&t.type!==`document`&&!t.parent)return!0;if(isPromise$1(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:i}=t;if(r.type!==`root`&&r.type!==`document`&&!r.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[e,a]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return a(r.toProxy(),this.helpers)}catch(e){throw this.handleError(e,r)}}if(t.iterator!==0){let i=t.iterator,a;for(;a=r.nodes[r.indexes[i]];)if(r.indexes[i]+=1,!a[isClean$3]){a[isClean$3]=!0,e.push(toStack$1(a));return}t.iterator=0,delete r.indexes[i]}let a=t.events;for(;t.eventIndex<a.length;){let e=a[t.eventIndex];if(t.eventIndex+=1,e===CHILDREN$1){r.nodes&&r.nodes.length&&(r[isClean$3]=!0,t.iterator=r.getIterator());return}else if(this.listeners[e]){t.visitors=this.listeners[e];return}}e.pop()}walkSync(e){e[isClean$3]=!0;let t=getEvents$1(e);for(let r of t)if(r===CHILDREN$1)e.nodes&&e.each(e=>{e[isClean$3]||this.walkSync(e)});else{let t=this.listeners[r];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return`LazyResult`}},LazyResult$2$1.registerPostcss=e=>{postcss$2$1=e},lazyResult$1=LazyResult$2$1,LazyResult$2$1.default=LazyResult$2$1,Root$3$1.registerLazyResult(LazyResult$2$1),Document$2$1.registerLazyResult(LazyResult$2$1),MapGenerator2$1=mapGenerator$1,stringify$1$1=stringify_1$1,parse$1$1=parse_1$1,Result$1$1=result$1,NoWorkResult$1$1=class{constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i,a=stringify$1$1;this.result=new Result$1$1(this._processor,void 0,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,`root`,{get(){return o.root}});let s=new MapGenerator2$1(a,void 0,this._opts,t);if(s.isMap()){let[e,t]=s.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else s.clearAnnotation(),this.result.css=s.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=parse$1$1;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return`NoWorkResult`}},noWorkResult$1=NoWorkResult$1$1,NoWorkResult$1$1.default=NoWorkResult$1$1,NoWorkResult2$1=noWorkResult$1,LazyResult$1$1=lazyResult$1,Document$1$1=document$1$1,Root$2$1=root$1,Processor$1$1=class{constructor(e=[]){this.version=`8.4.38`,this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r==`object`&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r==`object`&&r.postcssPlugin)t.push(r);else if(typeof r==`function`)t.push(r);else if(!(typeof r==`object`&&(r.parse||r.stringify)))throw Error(r+` is not a PostCSS plugin`);return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new NoWorkResult2$1(this,e,t):new LazyResult$1$1(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}},processor$1=Processor$1$1,Processor$1$1.default=Processor$1$1,Root$2$1.registerProcessor(Processor$1$1),Document$1$1.registerProcessor(Processor$1$1),Declaration$1$1=declaration$1,PreviousMap2$1=previousMap$1,Comment$1$1=comment$1,AtRule$1$1=atRule$1,Input$1$1=input$1,Root$1$1=root$1,Rule$1$1=rule$1,fromJSON_1$1=fromJSON$1$1,fromJSON$1$1.default=fromJSON$1$1,CssSyntaxError2$1=cssSyntaxError$1,Declaration2$1=declaration$1,LazyResult2$1=lazyResult$1,Container2$1=container$1,Processor2$1=processor$1,stringify$5=stringify_1$1,fromJSON$2=fromJSON_1$1,Document22=document$1$1,Warning2$1=warning$1,Comment2$1=comment$1,AtRule2$1=atRule$1,Result2$1=result$1,Input2$1=input$1,parse$5=parse_1$1,list$3=list_1$1,Rule2$1=rule$1,Root2$1=root$1,Node2$1=node$1,postcss$3.plugin=function(e,t){let r=!1;function i(...i){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith(`cn`)&&console.warn(e+`: 里面 postcss.plugin 被弃用. 迁移指南:
https://www.w3ctech.com/topic/2226`));let a=t(...i);return a.postcssPlugin=e,a.postcssVersion=new Processor2$1().version,a}let a;return Object.defineProperty(i,`postcss`,{get(){return a||=i(),a}}),i.process=function(e,t,r){return postcss$3([i(r)]).process(e,t)},i},postcss$3.stringify=stringify$5,postcss$3.parse=parse$5,postcss$3.fromJSON=fromJSON$2,postcss$3.list=list$3,postcss$3.comment=e=>new Comment2$1(e),postcss$3.atRule=e=>new AtRule2$1(e),postcss$3.decl=e=>new Declaration2$1(e),postcss$3.rule=e=>new Rule2$1(e),postcss$3.root=e=>new Root2$1(e),postcss$3.document=e=>new Document22(e),postcss$3.CssSyntaxError=CssSyntaxError2$1,postcss$3.Declaration=Declaration2$1,postcss$3.Container=Container2$1,postcss$3.Processor=Processor2$1,postcss$3.Document=Document22,postcss$3.Comment=Comment2$1,postcss$3.Warning=Warning2$1,postcss$3.AtRule=AtRule2$1,postcss$3.Result=Result2$1,postcss$3.Input=Input2$1,postcss$3.Rule=Rule2$1,postcss$3.Root=Root2$1,postcss$3.Node=Node2$1,LazyResult2$1.registerPostcss(postcss$3),postcss_1$1=postcss$3,postcss$3.default=postcss$3,postcss$1$1=getDefaultExportFromCjs$1(postcss_1$1),postcss$1$1.stringify,postcss$1$1.fromJSON,postcss$1$1.plugin,postcss$1$1.parse,postcss$1$1.list,postcss$1$1.document,postcss$1$1.comment,postcss$1$1.atRule,postcss$1$1.rule,postcss$1$1.decl,postcss$1$1.root,postcss$1$1.CssSyntaxError,postcss$1$1.Declaration,postcss$1$1.Container,postcss$1$1.Processor,postcss$1$1.Document,postcss$1$1.Comment,postcss$1$1.Warning,postcss$1$1.AtRule,postcss$1$1.Result,postcss$1$1.Input,postcss$1$1.Rule,postcss$1$1.Root,postcss$1$1.Node,__defProp2=Object.defineProperty,__defNormalProp2=(e,t,r)=>(t in e)?__defProp2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__publicField2=(e,t,r)=>__defNormalProp2(e,typeof t==`symbol`?t:t+``,r),picocolors_browser={exports:{}},x=String,create=function(){return{isColorSupported:!1,reset:x,bold:x,dim:x,italic:x,underline:x,inverse:x,hidden:x,strikethrough:x,black:x,red:x,green:x,yellow:x,blue:x,magenta:x,cyan:x,white:x,gray:x,bgBlack:x,bgRed:x,bgGreen:x,bgYellow:x,bgBlue:x,bgMagenta:x,bgCyan:x,bgWhite:x}},picocolors_browser.exports=create(),picocolors_browser.exports.createColors=create,picocolors_browserExports=picocolors_browser.exports,require$$2=getAugmentedNamespace(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:`Module`}))),pico=picocolors_browserExports,terminalHighlight$1=require$$2,CssSyntaxError$3=class e extends Error{constructor(t,r,i,a,o,s){super(t),this.name=`CssSyntaxError`,this.reason=t,o&&(this.file=o),a&&(this.source=a),s&&(this.plugin=s),r!==void 0&&i!==void 0&&(typeof r==`number`?(this.line=r,this.column=i):(this.line=r.line,this.column=r.column,this.endLine=i.line,this.endColumn=i.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+`: `:``,this.message+=this.file?this.file:`<css input>`,this.line!==void 0&&(this.message+=`:`+this.line+`:`+this.column),this.message+=`: `+this.reason}showSourceCode(e){if(!this.source)return``;let t=this.source;e??=pico.isColorSupported,terminalHighlight$1&&e&&(t=terminalHighlight$1(t));let r=t.split(/\r?\n/),i=Math.max(this.line-3,0),a=Math.min(this.line+2,r.length),o=String(a).length,s,c;if(e){let{bold:e,gray:t,red:r}=pico.createColors(!0);s=t=>e(r(t)),c=e=>t(e)}else s=c=e=>e;return r.slice(i,a).map((e,t)=>{let r=i+1+t,a=` `+(` `+r).slice(-o)+` | `;if(r===this.line){let t=c(a.replace(/\d/g,` `))+e.slice(0,this.column-1).replace(/[^\t]/g,` `);return s(`>`)+c(a)+e+`
 `+t+s(`^`)}return` `+c(a)+e}).join(`
`)}toString(){let e=this.showSourceCode();return e&&=`

`+e+`
`,this.name+`: `+this.message+e}},cssSyntaxError=CssSyntaxError$3,CssSyntaxError$3.default=CssSyntaxError$3,symbols={},symbols.isClean=Symbol(`isClean`),symbols.my=Symbol(`my`),DEFAULT_RAW={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:` `,beforeRule:`
`,colon:`: `,commentLeft:` `,commentRight:` `,emptyBody:``,indent:`    `,semicolon:!1},Stringifier$2=class{constructor(e){this.builder=e}atrule(e,t){let r=`@`+e.name,i=e.params?this.rawValue(e,`params`):``;if(e.raws.afterName===void 0?i&&(r+=` `):r+=e.raws.afterName,e.nodes)this.block(e,r+i);else{let a=(e.raws.between||``)+(t?`;`:``);this.builder(r+i+a,e)}}beforeAfter(e,t){let r;r=e.type===`decl`?this.raw(e,null,`beforeDecl`):e.type===`comment`?this.raw(e,null,`beforeComment`):t===`before`?this.raw(e,null,`beforeRule`):this.raw(e,null,`beforeClose`);let i=e.parent,a=0;for(;i&&i.type!==`root`;)a+=1,i=i.parent;if(r.includes(`
`)){let t=this.raw(e,null,`indent`);if(t.length)for(let e=0;e<a;e++)r+=t}return r}block(e,t){let r=this.raw(e,`between`,`beforeOpen`);this.builder(t+r+`{`,e,`start`);let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,`after`)):i=this.raw(e,`after`,`emptyBody`),i&&this.builder(i),this.builder(`}`,e,`end`)}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type===`comment`;)--t;let r=this.raw(e,`semicolon`);for(let i=0;i<e.nodes.length;i++){let a=e.nodes[i],o=this.raw(a,`before`);o&&this.builder(o),this.stringify(a,t!==i||r)}}comment(e){let t=this.raw(e,`left`,`commentLeft`),r=this.raw(e,`right`,`commentRight`);this.builder(`/*`+t+e.text+r+`*/`,e)}decl(e,t){let r=this.raw(e,`between`,`colon`),i=e.prop+r+this.rawValue(e,`value`);e.important&&(i+=e.raws.important||` !important`),t&&(i+=`;`),this.builder(i,e)}document(e){this.body(e)}raw(e,t,r){let i;if(r||=t,t&&(i=e.raws[t],i!==void 0))return i;let a=e.parent;if(r===`before`&&(!a||a.type===`root`&&a.first===e||a&&a.type===`document`))return``;if(!a)return DEFAULT_RAW[r];let o=e.root();if(o.rawCache||={},o.rawCache[r]!==void 0)return o.rawCache[r];if(r===`before`||r===`after`)return this.beforeAfter(e,r);{let a=`raw`+capitalize(r);this[a]?i=this[a](o,e):o.walk(e=>{if(i=e.raws[t],i!==void 0)return!1})}return i===void 0&&(i=DEFAULT_RAW[r]),o.rawCache[r]=i,i}rawBeforeClose(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length>0&&e.raws.after!==void 0)return t=e.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,``)),!1}),t&&=t.replace(/\S/g,``),t}rawBeforeComment(e,t){let r;return e.walkComments(e=>{if(e.raws.before!==void 0)return r=e.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,``)),!1}),r===void 0?r=this.raw(t,null,`beforeDecl`):r&&=r.replace(/\S/g,``),r}rawBeforeDecl(e,t){let r;return e.walkDecls(e=>{if(e.raws.before!==void 0)return r=e.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,``)),!1}),r===void 0?r=this.raw(t,null,`beforeRule`):r&&=r.replace(/\S/g,``),r}rawBeforeOpen(e){let t;return e.walk(e=>{if(e.type!==`decl`&&(t=e.raws.between,t!==void 0))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&r.raws.before!==void 0)return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,``)),!1}),t&&=t.replace(/\S/g,``),t}rawColon(e){let t;return e.walkDecls(e=>{if(e.raws.between!==void 0)return t=e.raws.between.replace(/[^\s:]/g,``),!1}),t}rawEmptyBody(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length===0&&(t=e.raws.after,t!==void 0))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let i=r.parent;if(i&&i!==e&&i.parent&&i.parent===e&&r.raws.before!==void 0){let e=r.raws.before.split(`
`);return t=e[e.length-1],t=t.replace(/\S/g,``),!1}}),t}rawSemicolon(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length&&e.last.type===`decl`&&(t=e.raws.semicolon,t!==void 0))return!1}),t}rawValue(e,t){let r=e[t],i=e.raws[t];return i&&i.value===r?i.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,`selector`)),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,`end`)}stringify(e,t){if(!this[e.type])throw Error(`Unknown AST node type `+e.type+`. Maybe you need to change PostCSS stringifier.`);this[e.type](e,t)}},stringifier=Stringifier$2,Stringifier$2.default=Stringifier$2,Stringifier$1=stringifier,stringify_1=stringify$4,stringify$4.default=stringify$4,{isClean:isClean$2,my:my$2}=symbols,CssSyntaxError$2=cssSyntaxError,Stringifier22=stringifier,stringify$3=stringify_1,Node$4=class{constructor(e={}){for(let t in this.raws={},this[isClean$2]=!1,this[my$2]=!0,e)if(t===`nodes`){this.nodes=[];for(let r of e[t])typeof r.clone==`function`?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=cloneNode(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new CssSyntaxError$2(e)}getProxyProcessor(){return{get(e,t){return t===`proxyOf`?e:t===`root`?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r?!0:(e[t]=r,(t===`prop`||t===`value`||t===`name`||t===`params`||t===`important`||t===`text`)&&e.markDirty(),!0)}}}markDirty(){if(this[isClean$2]){this[isClean$2]=!1;let e=this;for(;e=e.parent;)e[isClean$2]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let i=t.indexOf(e.word);i!==-1&&(r=this.positionInside(i,t))}return r}positionInside(e,t){let r=t||this.toString(),i=this.source.start.column,a=this.source.start.line;for(let t=0;t<e;t++)r[t]===`
`?(i=1,a+=1):i+=1;return{column:i,line:a}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let i=this.toString(),a=i.indexOf(e.word);a!==-1&&(t=this.positionInside(a,i),r=this.positionInside(a+e.word.length,i))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:typeof e.endIndex==`number`?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new Stringifier22().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let i of e)i===this?r=!0:r?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);r||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!==`document`;)e=e.parent;return e}toJSON(e,t){let r={},i=t==null;t||=new Map;let a=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e)||e===`parent`||e===`proxyCache`)continue;let i=this[e];if(Array.isArray(i))r[e]=i.map(e=>typeof e==`object`&&e.toJSON?e.toJSON(null,t):e);else if(typeof i==`object`&&i.toJSON)r[e]=i.toJSON(null,t);else if(e===`source`){let o=t.get(i.input);o??(o=a,t.set(i.input,a),a++),r[e]={end:i.end,inputId:o,start:i.start}}else r[e]=i}return i&&(r.inputs=[...t.keys()].map(e=>e.toJSON())),r}toProxy(){return this.proxyCache||=new Proxy(this,this.getProxyProcessor()),this.proxyCache}toString(e=stringify$3){e.stringify&&(e=e.stringify);let t=``;return e(this,e=>{t+=e}),t}warn(e,t,r){let i={node:this};for(let e in r)i[e]=r[e];return e.warn(t,i)}get proxyOf(){return this}},node=Node$4,Node$4.default=Node$4,Node$3=node,Declaration$4=class extends Node$3{constructor(e){e&&e.value!==void 0&&typeof e.value!=`string`&&(e={...e,value:String(e.value)}),super(e),this.type=`decl`}get variable(){return this.prop.startsWith(`--`)||this.prop[0]===`$`}},declaration=Declaration$4,Declaration$4.default=Declaration$4,urlAlphabet=`useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict`,customAlphabet=(e,t=21)=>(r=t)=>{let i=``,a=r;for(;a--;)i+=e[Math.random()*e.length|0];return i},nanoid$1=(e=21)=>{let t=``,r=e;for(;r--;)t+=urlAlphabet[Math.random()*64|0];return t},nonSecure={nanoid:nanoid$1,customAlphabet},{SourceMapConsumer:SourceMapConsumer$2,SourceMapGenerator:SourceMapGenerator$2}=require$$2,{existsSync,readFileSync}=require$$2,{dirname:dirname$1,join}=require$$2,PreviousMap$2=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,`data:`);let r=t.map?t.map.prev:void 0,i=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=dirname$1(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||=new SourceMapConsumer$2(this.text),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/;if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return fromBase64(e.substr(RegExp.lastMatch.length));let i=e.match(/data:application\/json;([^,]+),/)[1];throw Error(`Unsupported source map encoding `+i)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,``).trim()}isMap(e){return typeof e==`object`?typeof e.mappings==`string`||typeof e._mappings==`string`||Array.isArray(e.sections):!1}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),i=e.indexOf(`*/`,r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,i)))}loadFile(e){if(this.root=dirname$1(e),existsSync(e))return this.mapFile=e,readFileSync(e,`utf-8`).toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t==`string`)return t;if(typeof t==`function`){let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw Error(`Unable to load previous source map: `+r.toString());return e}}else if(t instanceof SourceMapConsumer$2)return SourceMapGenerator$2.fromSourceMap(t).toString();else if(t instanceof SourceMapGenerator$2)return t.toString();else if(this.isMap(t))return JSON.stringify(t);else throw Error(`Unsupported previous source map format: `+t.toString())}else if(this.inline)return this.decodeInline(this.annotation);else if(this.annotation){let t=this.annotation;return e&&(t=join(dirname$1(e),t)),this.loadFile(t)}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}},previousMap=PreviousMap$2,PreviousMap$2.default=PreviousMap$2,{SourceMapConsumer:SourceMapConsumer$1,SourceMapGenerator:SourceMapGenerator$1}=require$$2,{fileURLToPath,pathToFileURL:pathToFileURL$1}=require$$2,{isAbsolute,resolve:resolve$1}=require$$2,{nanoid}=nonSecure,terminalHighlight=require$$2,CssSyntaxError$1=cssSyntaxError,PreviousMap$1=previousMap,fromOffsetCache=Symbol(`fromOffsetCache`),sourceMapAvailable$1=!!(SourceMapConsumer$1&&SourceMapGenerator$1),pathAvailable$1=!!(resolve$1&&isAbsolute),Input$4=class{constructor(e,t={}){if(e==null||typeof e==`object`&&!e.toString)throw Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]===`﻿`||this.css[0]===`￾`?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!pathAvailable$1||/^\w+:\/\//.test(t.from)||isAbsolute(t.from)?this.file=t.from:this.file=resolve$1(t.from)),pathAvailable$1&&sourceMapAvailable$1){let e=new PreviousMap$1(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id=`<input css `+nanoid(6)+`>`),this.map&&(this.map.file=this.from)}error(e,t,r,i={}){let a,o,s;if(t&&typeof t==`object`){let e=t,i=r;if(typeof e.offset==`number`){let i=this.fromOffset(e.offset);t=i.line,r=i.col}else t=e.line,r=e.column;if(typeof i.offset==`number`){let e=this.fromOffset(i.offset);o=e.line,s=e.col}else o=i.line,s=i.column}else if(!r){let e=this.fromOffset(t);t=e.line,r=e.col}let c=this.origin(t,r,o,s);return a=c?new CssSyntaxError$1(e,c.endLine===void 0?c.line:{column:c.column,line:c.line},c.endLine===void 0?c.column:{column:c.endColumn,line:c.endLine},c.source,c.file,i.plugin):new CssSyntaxError$1(e,o===void 0?t:{column:r,line:t},o===void 0?r:{column:s,line:o},this.css,this.file,i.plugin),a.input={column:r,endColumn:s,endLine:o,line:t,source:this.css},this.file&&(pathToFileURL$1&&(a.input.url=pathToFileURL$1(this.file).toString()),a.input.file=this.file),a}fromOffset(e){let t,r;if(this[fromOffsetCache])r=this[fromOffsetCache];else{let e=this.css.split(`
`);r=Array(e.length);let t=0;for(let i=0,a=e.length;i<a;i++)r[i]=t,t+=e[i].length+1;this[fromOffsetCache]=r}t=r[r.length-1];let i=0;if(e>=t)i=r.length-1;else{let t=r.length-2,a;for(;i<t;)if(a=i+(t-i>>1),e<r[a])t=a-1;else if(e>=r[a+1])i=a+1;else{i=a;break}}return{col:e-r[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:resolve$1(this.map.consumer().sourceRoot||this.map.root||`.`,e)}origin(e,t,r,i){if(!this.map)return!1;let a=this.map.consumer(),o=a.originalPositionFor({column:t,line:e});if(!o.source)return!1;let s;typeof r==`number`&&(s=a.originalPositionFor({column:i,line:r}));let c;c=isAbsolute(o.source)?pathToFileURL$1(o.source):new URL(o.source,this.map.consumer().sourceRoot||pathToFileURL$1(this.map.mapFile));let l={column:o.column,endColumn:s&&s.column,endLine:s&&s.line,line:o.line,url:c.toString()};if(c.protocol===`file:`)if(fileURLToPath)l.file=fileURLToPath(c);else throw Error(`file: protocol is not available in this PostCSS build`);let u=a.sourceContentFor(o.source);return u&&(l.source=u),l}toJSON(){let e={};for(let t of[`hasBOM`,`css`,`file`,`id`])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}},input=Input$4,Input$4.default=Input$4,terminalHighlight&&terminalHighlight.registerInput&&terminalHighlight.registerInput(Input$4),{SourceMapConsumer,SourceMapGenerator}=require$$2,{dirname,relative,resolve,sep}=require$$2,{pathToFileURL}=require$$2,Input$3=input,sourceMapAvailable=!!(SourceMapConsumer&&SourceMapGenerator),pathAvailable=!!(dirname&&resolve&&relative&&sep),mapGenerator=class{constructor(e,t,r,i){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?`data:application/json;base64,`+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation==`string`?this.mapOpts.annotation:typeof this.mapOpts.annotation==`function`?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+`.map`;let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+`/*# sourceMappingURL=`+e+` */`}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||dirname(e.file),i;this.mapOpts.sourcesContent===!1?(i=new SourceMapConsumer(e.text),i.sourcesContent&&=null):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type===`comment`&&e.text.indexOf(`# sourceMappingURL=`)===0&&this.root.removeChild(t)}else this.css&&=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,``)}generate(){if(this.clearAnnotation(),pathAvailable&&sourceMapAvailable&&this.isMap())return this.generateMap();{let e=``;return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=SourceMapGenerator.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new SourceMapGenerator({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):`<no source>`});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css=``,this.map=new SourceMapGenerator({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,r=`<no source>`,i={generated:{column:0,line:0},original:{column:0,line:0},source:``},a,o;this.stringify(this.root,(s,c,l)=>{if(this.css+=s,c&&l!==`end`&&(i.generated.line=e,i.generated.column=t-1,c.source&&c.source.start?(i.source=this.sourcePath(c),i.original.line=c.source.start.line,i.original.column=c.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),a=s.match(/\n/g),a?(e+=a.length,o=s.lastIndexOf(`
`),t=s.length-o):t+=s.length,c&&l!==`start`){let a=c.parent||{raws:{}};(!(c.type===`decl`||c.type===`atrule`&&!c.nodes)||c!==a.last||a.raws.semicolon)&&(c.source&&c.source.end?(i.source=this.sourcePath(c),i.original.line=c.source.end.line,i.original.column=c.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:this.mapOpts.annotation===void 0?this.previous().length?this.previous().some(e=>e.annotation):!0:this.mapOpts.annotation}isInline(){if(this.mapOpts.inline!==void 0)return this.mapOpts.inline;let e=this.mapOpts.annotation;return e!==void 0&&e!==!0?!1:this.previous().length?this.previous().some(e=>e.inline):!0}isMap(){return this.opts.map===void 0?this.previous().length>0:!!this.opts.map}isSourcesContent(){return this.mapOpts.sourcesContent===void 0?this.previous().length?this.previous().some(e=>e.withContent()):!0:this.mapOpts.sourcesContent}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):`to.css`}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?dirname(this.opts.to):`.`;typeof this.mapOpts.annotation==`string`&&(r=dirname(resolve(r,this.mapOpts.annotation)));let i=relative(r,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new Input$3(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let i=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):`<no source>`;this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString(`base64`):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(pathToFileURL){let t=pathToFileURL(e).toString();return this.memoizedFileURLs.set(e,t),t}else throw Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;sep===`\\`&&(e=e.replace(/\\/g,`/`));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}},Node$2=node,Comment$4=class extends Node$2{constructor(e){super(e),this.type=`comment`}},comment=Comment$4,Comment$4.default=Comment$4,{isClean:isClean$1,my:my$1}=symbols,Declaration$3=declaration,Comment$3=comment,Node$1=node,Container$7=class e extends Node$1{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],i=e(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||=0,this.indexes||={},this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t===`proxyOf`?e:e[t]?t===`each`||typeof t==`string`&&t.startsWith(`walk`)?(...r)=>e[t](...r.map(e=>typeof e==`function`?(t,r)=>e(t.toProxy(),r):e)):t===`every`||t===`some`?r=>e[t]((e,...t)=>r(e.toProxy(),...t)):t===`root`?()=>e.root().toProxy():t===`nodes`?e.nodes.map(e=>e.toProxy()):t===`first`||t===`last`?e[t].toProxy():e[t]:e[t]},set(e,t,r){return e[t]===r?!0:(e[t]=r,(t===`name`||t===`params`||t===`selector`)&&e.markDirty(),!0)}}}index(e){return typeof e==`number`?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r=this.index(e),i=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let e of i)this.proxyOf.nodes.splice(r+1,0,e);let a;for(let e in this.indexes)a=this.indexes[e],r<a&&(this.indexes[e]=a+i.length);return this.markDirty(),this}insertBefore(e,t){let r=this.index(e),i=r===0?`prepend`:!1,a=this.normalize(t,this.proxyOf.nodes[r],i).reverse();r=this.index(e);for(let e of a)this.proxyOf.nodes.splice(r,0,e);let o;for(let e in this.indexes)o=this.indexes[e],r<=o&&(this.indexes[e]=o+a.length);return this.markDirty(),this}normalize(t,r){if(typeof t==`string`)t=cleanSource(parse$4(t).nodes);else if(t===void 0)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,`ignore`)}else if(t.type===`root`&&this.type!==`document`){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,`ignore`)}else if(t.type)t=[t];else if(t.prop){if(t.value===void 0)throw Error(`Value field is missed in node creation`);typeof t.value!=`string`&&(t.value=String(t.value)),t=[new Declaration$3(t)]}else if(t.selector)t=[new Rule$4(t)];else if(t.name)t=[new AtRule$4(t)];else if(t.text)t=[new Comment$3(t)];else throw Error(`Unknown node type in node creation`);return t.map(t=>(t[my$1]||e.rebuild(t),t=t.proxyOf,t.parent&&t.parent.removeChild(t),t[isClean$1]&&markDirtyUp(t),t.raws.before===void 0&&r&&r.raws.before!==void 0&&(t.raws.before=r.raws.before.replace(/\S/g,``)),t.parent=this.proxyOf,t))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,`prepend`).reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let i;try{i=e(t,r)}catch(e){throw t.addToError(e)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type===`atrule`&&e.test(r.name))return t(r,i)}):this.walk((r,i)=>{if(r.type===`atrule`&&r.name===e)return t(r,i)}):(t=e,this.walk((e,r)=>{if(e.type===`atrule`)return t(e,r)}))}walkComments(e){return this.walk((t,r)=>{if(t.type===`comment`)return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type===`decl`&&e.test(r.prop))return t(r,i)}):this.walk((r,i)=>{if(r.type===`decl`&&r.prop===e)return t(r,i)}):(t=e,this.walk((e,r)=>{if(e.type===`decl`)return t(e,r)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type===`rule`&&e.test(r.selector))return t(r,i)}):this.walk((r,i)=>{if(r.type===`rule`&&r.selector===e)return t(r,i)}):(t=e,this.walk((e,r)=>{if(e.type===`rule`)return t(e,r)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}},Container$7.registerParse=e=>{parse$4=e},Container$7.registerRule=e=>{Rule$4=e},Container$7.registerAtRule=e=>{AtRule$4=e},Container$7.registerRoot=e=>{Root$6=e},container=Container$7,Container$7.default=Container$7,Container$7.rebuild=e=>{e.type===`atrule`?Object.setPrototypeOf(e,AtRule$4.prototype):e.type===`rule`?Object.setPrototypeOf(e,Rule$4.prototype):e.type===`decl`?Object.setPrototypeOf(e,Declaration$3.prototype):e.type===`comment`?Object.setPrototypeOf(e,Comment$3.prototype):e.type===`root`&&Object.setPrototypeOf(e,Root$6.prototype),e[my$1]=!0,e.nodes&&e.nodes.forEach(e=>{Container$7.rebuild(e)})},Container$6=container,Document$3=class extends Container$6{constructor(e){super({type:`document`,...e}),this.nodes||=[]}toResult(e={}){return new LazyResult$4(new Processor$3,this,e).stringify()}},Document$3.registerLazyResult=e=>{LazyResult$4=e},Document$3.registerProcessor=e=>{Processor$3=e},document$1=Document$3,Document$3.default=Document$3,Warning$2=class{constructor(e,t={}){if(this.type=`warning`,this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+`: `+this.text:this.text}},warning=Warning$2,Warning$2.default=Warning$2,Warning$1=warning,Result$3=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new Warning$1(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type===`warning`)}get content(){return this.css}},result=Result$3,Result$3.default=Result$3,SINGLE_QUOTE=39,DOUBLE_QUOTE=34,BACKSLASH=92,SLASH=47,NEWLINE=10,SPACE=32,FEED=12,TAB=9,CR=13,OPEN_SQUARE=91,CLOSE_SQUARE=93,OPEN_PARENTHESES=40,CLOSE_PARENTHESES=41,OPEN_CURLY=123,CLOSE_CURLY=125,SEMICOLON=59,ASTERISK=42,COLON=58,AT=64,RE_AT_END=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE=/[\da-f]/i,tokenize=function(e,t={}){let r=e.css.valueOf(),i=t.ignoreErrors,a,o,s,c,l,u,d,f,p,m,h=r.length,g=0,_=[],v=[];function y(){return g}function b(t){throw e.error(`Unclosed `+t,g)}function S(){return v.length===0&&g>=h}function C(e){if(v.length)return v.pop();if(g>=h)return;let t=e?e.ignoreUnclosed:!1;switch(a=r.charCodeAt(g),a){case NEWLINE:case SPACE:case TAB:case CR:case FEED:o=g;do o+=1,a=r.charCodeAt(o);while(a===SPACE||a===NEWLINE||a===TAB||a===CR||a===FEED);m=[`space`,r.slice(g,o)],g=o-1;break;case OPEN_SQUARE:case CLOSE_SQUARE:case OPEN_CURLY:case CLOSE_CURLY:case COLON:case SEMICOLON:case CLOSE_PARENTHESES:{let e=String.fromCharCode(a);m=[e,e,g];break}case OPEN_PARENTHESES:if(f=_.length?_.pop()[1]:``,p=r.charCodeAt(g+1),f===`url`&&p!==SINGLE_QUOTE&&p!==DOUBLE_QUOTE&&p!==SPACE&&p!==NEWLINE&&p!==TAB&&p!==FEED&&p!==CR){o=g;do{if(u=!1,o=r.indexOf(`)`,o+1),o===-1)if(i||t){o=g;break}else b(`bracket`);for(d=o;r.charCodeAt(d-1)===BACKSLASH;)--d,u=!u}while(u);m=[`brackets`,r.slice(g,o+1),g,o],g=o}else o=r.indexOf(`)`,g+1),c=r.slice(g,o+1),o===-1||RE_BAD_BRACKET.test(c)?m=[`(`,`(`,g]:(m=[`brackets`,c,g,o],g=o);break;case SINGLE_QUOTE:case DOUBLE_QUOTE:s=a===SINGLE_QUOTE?`'`:`"`,o=g;do{if(u=!1,o=r.indexOf(s,o+1),o===-1)if(i||t){o=g+1;break}else b(`string`);for(d=o;r.charCodeAt(d-1)===BACKSLASH;)--d,u=!u}while(u);m=[`string`,r.slice(g,o+1),g,o],g=o;break;case AT:RE_AT_END.lastIndex=g+1,RE_AT_END.test(r),o=RE_AT_END.lastIndex===0?r.length-1:RE_AT_END.lastIndex-2,m=[`at-word`,r.slice(g,o+1),g,o],g=o;break;case BACKSLASH:for(o=g,l=!0;r.charCodeAt(o+1)===BACKSLASH;)o+=1,l=!l;if(a=r.charCodeAt(o+1),l&&a!==SLASH&&a!==SPACE&&a!==NEWLINE&&a!==TAB&&a!==CR&&a!==FEED&&(o+=1,RE_HEX_ESCAPE.test(r.charAt(o)))){for(;RE_HEX_ESCAPE.test(r.charAt(o+1));)o+=1;r.charCodeAt(o+1)===SPACE&&(o+=1)}m=[`word`,r.slice(g,o+1),g,o],g=o;break;default:a===SLASH&&r.charCodeAt(g+1)===ASTERISK?(o=r.indexOf(`*/`,g+2)+1,o===0&&(i||t?o=r.length:b(`comment`)),m=[`comment`,r.slice(g,o+1),g,o],g=o):(RE_WORD_END.lastIndex=g+1,RE_WORD_END.test(r),o=RE_WORD_END.lastIndex===0?r.length-1:RE_WORD_END.lastIndex-2,m=[`word`,r.slice(g,o+1),g,o],_.push(m),g=o);break}return g++,m}function w(e){v.push(e)}return{back:w,endOfFile:S,nextToken:C,position:y}},Container$5=container,AtRule$3=class extends Container$5{constructor(e){super(e),this.type=`atrule`}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}},atRule=AtRule$3,AtRule$3.default=AtRule$3,Container$5.registerAtRule(AtRule$3),Container$4=container,Root$5=class extends Container$4{constructor(e){super(e),this.type=`root`,this.nodes||=[]}normalize(e,t,r){let i=super.normalize(e);if(t){if(r===`prepend`)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of i)e.raws.before=t.raws.before}return i}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new LazyResult$3(new Processor$2,this,e).stringify()}},Root$5.registerLazyResult=e=>{LazyResult$3=e},Root$5.registerProcessor=e=>{Processor$2=e},root=Root$5,Root$5.default=Root$5,Container$4.registerRoot(Root$5),list$2={comma(e){return list$2.split(e,[`,`],!0)},space(e){return list$2.split(e,[` `,`
`,`	`])},split(e,t,r){let i=[],a=``,o=!1,s=0,c=!1,l=``,u=!1;for(let r of e)u?u=!1:r===`\\`?u=!0:c?r===l&&(c=!1):r===`"`||r===`'`?(c=!0,l=r):r===`(`?s+=1:r===`)`?s>0&&--s:s===0&&t.includes(r)&&(o=!0),o?(a!==``&&i.push(a.trim()),a=``,o=!1):a+=r;return(r||a!==``)&&i.push(a.trim()),i}},list_1=list$2,list$2.default=list$2,Container$3=container,list$1=list_1,Rule$3=class extends Container$3{constructor(e){super(e),this.type=`rule`,this.nodes||=[]}get selectors(){return list$1.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:`,`+this.raw(`between`,`beforeOpen`);this.selector=e.join(r)}},rule=Rule$3,Rule$3.default=Rule$3,Container$3.registerRule(Rule$3),Declaration$2=declaration,tokenizer22=tokenize,Comment$2=comment,AtRule$2=atRule,Root$4=root,Rule$2=rule,SAFE_COMMENT_NEIGHBOR={empty:!0,space:!0},parser=class{constructor(e){this.input=e,this.root=new Root$4,this.current=this.root,this.spaces=``,this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new AtRule$2;t.name=e[1].slice(1),t.name===``&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,i,a,o=!1,s=!1,c=[],l=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r===`(`||r===`[`?l.push(r===`(`?`)`:`]`):r===`{`&&l.length>0?l.push(`}`):r===l[l.length-1]&&l.pop(),l.length===0)if(r===`;`){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(r===`{`){s=!0;break}else if(r===`}`){if(c.length>0){for(a=c.length-1,i=c[a];i&&i[0]===`space`;)i=c[--a];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else c.push(e);else c.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(c),c.length?(t.raws.afterName=this.spacesAndCommentsFromStart(c),this.raw(t,`params`,c),o&&(e=c[c.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between=``)):(t.raws.afterName=``,t.params=``),s&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,i;for(let a=t-1;a>=0&&(i=e[a],!(i[0]!==`space`&&(r+=1,r===2)));a--);throw this.input.error(`Missed semicolon`,i[0]===`word`?i[3]+1:i[2])}colon(e){let t=0,r,i,a;for(let[o,s]of e.entries()){if(r=s,i=r[0],i===`(`&&(t+=1),i===`)`&&--t,t===0&&i===`:`)if(!a)this.doubleColon(r);else if(a[0]===`word`&&a[1]===`progid`)continue;else return o;a=r}return!1}comment(e){let t=new Comment$2;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text=``,t.raws.left=r,t.raws.right=``;else{let e=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=tokenizer22(this.input)}decl(e,t){let r=new Declaration$2;this.init(r,e[0][2]);let i=e[e.length-1];for(i[0]===`;`&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||findLastWithPosition(e)),r.source.end.offset++;e[0][0]!==`word`;)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop=``;e.length;){let t=e[0][0];if(t===`:`||t===`space`||t===`comment`)break;r.prop+=e.shift()[1]}r.raws.between=``;let a;for(;e.length;)if(a=e.shift(),a[0]===`:`){r.raws.between+=a[1];break}else a[0]===`word`&&/\w/.test(a[1])&&this.unknownWord([a]),r.raws.between+=a[1];(r.prop[0]===`_`||r.prop[0]===`*`)&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let o=[],s;for(;e.length&&(s=e[0][0],!(s!==`space`&&s!==`comment`));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(a=e[t],a[1].toLowerCase()===`!important`){r.important=!0;let i=this.stringFrom(e,t);i=this.spacesFromEnd(e)+i,i!==` !important`&&(r.raws.important=i);break}else if(a[1].toLowerCase()===`important`){let i=e.slice(0),a=``;for(let e=t;e>0;e--){let t=i[e][0];if(a.trim().indexOf(`!`)===0&&t!==`space`)break;a=i.pop()[1]+a}a.trim().indexOf(`!`)===0&&(r.important=!0,r.raws.important=a,e=i)}if(a[0]!==`space`&&a[0]!==`comment`)break}e.some(e=>e[0]!==`space`&&e[0]!==`comment`)&&(r.raws.between+=o.map(e=>e[1]).join(``),o=[]),this.raw(r,`value`,o.concat(e),t),r.value.includes(`:`)&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error(`Double colon`,{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Rule$2;this.init(t,e[2]),t.selector=``,t.raws.between=``,this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||``)+this.spaces,this.spaces=``,this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||``)+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&e.type===`rule`&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces=``)}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces=``,e.type!==`comment`&&(this.semicolon=!1)}other(e){let t=!1,r=null,i=!1,a=null,o=[],s=e[1].startsWith(`--`),c=[],l=e;for(;l;){if(r=l[0],c.push(l),r===`(`||r===`[`)a||=l,o.push(r===`(`?`)`:`]`);else if(s&&i&&r===`{`)a||=l,o.push(`}`);else if(o.length===0)if(r===`;`)if(i){this.decl(c,s);return}else break;else if(r===`{`){this.rule(c);return}else if(r===`}`){this.tokenizer.back(c.pop()),t=!0;break}else r===`:`&&(i=!0);else r===o[o.length-1]&&(o.pop(),o.length===0&&(a=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(a),t&&i){if(!s)for(;c.length&&(l=c[c.length-1][0],!(l!==`space`&&l!==`comment`));)this.tokenizer.back(c.pop());this.decl(c,s)}else this.unknownWord(c)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case`space`:this.spaces+=e[1];break;case`;`:this.freeSemicolon(e);break;case`}`:this.end(e);break;case`comment`:this.comment(e);break;case`at-word`:this.atrule(e);break;case`{`:this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,i){let a,o,s=r.length,c=``,l=!0,u,d;for(let e=0;e<s;e+=1)a=r[e],o=a[0],o===`space`&&e===s-1&&!i?l=!1:o===`comment`?(d=r[e-1]?r[e-1][0]:`empty`,u=r[e+1]?r[e+1][0]:`empty`,!SAFE_COMMENT_NEIGHBOR[d]&&!SAFE_COMMENT_NEIGHBOR[u]?c.slice(-1)===`,`?l=!1:c+=a[1]:l=!1):c+=a[1];if(!l){let i=r.reduce((e,t)=>e+t[1],``);e.raws[t]={raw:i,value:c}}e[t]=c}rule(e){e.pop();let t=new Rule$2;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,`selector`,e),this.current=t}spacesAndCommentsFromEnd(e){let t,r=``;for(;e.length&&(t=e[e.length-1][0],!(t!==`space`&&t!==`comment`));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r=``;for(;e.length&&(t=e[0][0],!(t!==`space`&&t!==`comment`));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r=``;for(;e.length&&(t=e[e.length-1][0],t===`space`);)r=e.pop()[1]+r;return r}stringFrom(e,t){let r=``;for(let i=t;i<e.length;i++)r+=e[i][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error(`Unclosed block`,e.line,e.column)}unclosedBracket(e){throw this.input.error(`Unclosed bracket`,{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error(`Unexpected }`,{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error(`Unknown word`,{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error(`At-rule without name`,{offset:t[2]},{offset:t[2]+t[1].length})}},Container$2=container,Parser22=parser,Input$2=input,parse_1=parse$3,parse$3.default=parse$3,Container$2.registerParse(parse$3),{isClean,my}=symbols,MapGenerator$1=mapGenerator,stringify$2=stringify_1,Container$1=container,Document$2=document$1,Result$2=result,parse$2=parse_1,Root$3=root,TYPE_TO_CLASS_NAME={atrule:`AtRule`,comment:`Comment`,decl:`Declaration`,document:`Document`,root:`Root`,rule:`Rule`},PLUGIN_PROPS={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN=0,postcss$2={},LazyResult$2=class e{constructor(t,r,i){this.stringified=!1,this.processed=!1;let a;if(typeof r==`object`&&r&&(r.type===`root`||r.type===`document`))a=cleanMarks(r);else if(r instanceof e||r instanceof Result$2)a=cleanMarks(r.root),r.map&&(i.map===void 0&&(i.map={}),i.map.inline||(i.map.inline=!1),i.map.prev=r.map);else{let e=parse$2;i.syntax&&(e=i.syntax.parse),i.parser&&(e=i.parser),e.parse&&(e=e.parse);try{a=e(r,i)}catch(e){this.processed=!0,this.error=e}a&&!a[my]&&Container$1.rebuild(a)}this.result=new Result$2(t,a,i),this.helpers={...postcss$2,postcss:postcss$2,result:this.result},this.plugins=this.processor.plugins.map(e=>typeof e==`object`&&e.prepare?{...e,...e.prepare(this.result)}:e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||=this.runAsync(),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw Error(`Use process(css).then(cb) to work with async plugins`)}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name===`CssSyntaxError`&&!e.plugin?(e.plugin=r.postcssPlugin,e.setMessage()):r.postcssVersion}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if(typeof t==`object`)for(let r in t){if(!PLUGIN_PROPS[r]&&/^[A-Z]/.test(r))throw Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!NOT_VISITORS[r])if(typeof t[r]==`object`)for(let i in t[r])i===`*`?e(t,r,t[r][i]):e(t,r+`-`+i.toLowerCase(),t[r][i]);else typeof t[r]==`function`&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(isPromise(r))try{await r}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[isClean];){e[isClean]=!0;let t=[toStack(e)];for(;t.length>0;){let e=this.visitTick(t);if(isPromise(e))try{await e}catch(e){let r=t[t.length-1].node;throw this.handleError(e,r)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type===`document`){let t=e.nodes.map(e=>r(e,this.helpers));await Promise.all(t)}else await r(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e==`object`&&e.Once){if(this.result.root.type===`document`){let t=this.result.root.nodes.map(t=>e.Once(t,this.helpers));return isPromise(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e==`function`)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=stringify$2;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new MapGenerator$1(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins)if(isPromise(this.runOnRoot(e)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[isClean];)e[isClean]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type===`document`)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,i]of e){this.result.lastPlugin=r;let e;try{e=i(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if(t.type!==`root`&&t.type!==`document`&&!t.parent)return!0;if(isPromise(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:i}=t;if(r.type!==`root`&&r.type!==`document`&&!r.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[e,a]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return a(r.toProxy(),this.helpers)}catch(e){throw this.handleError(e,r)}}if(t.iterator!==0){let i=t.iterator,a;for(;a=r.nodes[r.indexes[i]];)if(r.indexes[i]+=1,!a[isClean]){a[isClean]=!0,e.push(toStack(a));return}t.iterator=0,delete r.indexes[i]}let a=t.events;for(;t.eventIndex<a.length;){let e=a[t.eventIndex];if(t.eventIndex+=1,e===CHILDREN){r.nodes&&r.nodes.length&&(r[isClean]=!0,t.iterator=r.getIterator());return}else if(this.listeners[e]){t.visitors=this.listeners[e];return}}e.pop()}walkSync(e){e[isClean]=!0;let t=getEvents(e);for(let r of t)if(r===CHILDREN)e.nodes&&e.each(e=>{e[isClean]||this.walkSync(e)});else{let t=this.listeners[r];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return`LazyResult`}},LazyResult$2.registerPostcss=e=>{postcss$2=e},lazyResult=LazyResult$2,LazyResult$2.default=LazyResult$2,Root$3.registerLazyResult(LazyResult$2),Document$2.registerLazyResult(LazyResult$2),MapGenerator22=mapGenerator,stringify$1=stringify_1,parse$1=parse_1,Result$1=result,NoWorkResult$1=class{constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i,a=stringify$1;this.result=new Result$1(this._processor,void 0,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,`root`,{get(){return o.root}});let s=new MapGenerator22(a,void 0,this._opts,t);if(s.isMap()){let[e,t]=s.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else s.clearAnnotation(),this.result.css=s.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=parse$1;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return`NoWorkResult`}},noWorkResult=NoWorkResult$1,NoWorkResult$1.default=NoWorkResult$1,NoWorkResult22=noWorkResult,LazyResult$1=lazyResult,Document$1=document$1,Root$2=root,Processor$1=class{constructor(e=[]){this.version=`8.4.38`,this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r==`object`&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r==`object`&&r.postcssPlugin)t.push(r);else if(typeof r==`function`)t.push(r);else if(!(typeof r==`object`&&(r.parse||r.stringify)))throw Error(r+` is not a PostCSS plugin`);return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new NoWorkResult22(this,e,t):new LazyResult$1(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}},processor=Processor$1,Processor$1.default=Processor$1,Root$2.registerProcessor(Processor$1),Document$1.registerProcessor(Processor$1),Declaration$1=declaration,PreviousMap22=previousMap,Comment$1=comment,AtRule$1=atRule,Input$1=input,Root$1=root,Rule$1=rule,fromJSON_1=fromJSON$1,fromJSON$1.default=fromJSON$1,CssSyntaxError22=cssSyntaxError,Declaration22=declaration,LazyResult22=lazyResult,Container22=container,Processor22=processor,stringify=stringify_1,fromJSON=fromJSON_1,Document222=document$1,Warning22=warning,Comment22=comment,AtRule22=atRule,Result22=result,Input22=input,parse=parse_1,list=list_1,Rule22=rule,Root22=root,Node22=node,postcss.plugin=function(e,t){let r=!1;function i(...i){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith(`cn`)&&console.warn(e+`: 里面 postcss.plugin 被弃用. 迁移指南:
https://www.w3ctech.com/topic/2226`));let a=t(...i);return a.postcssPlugin=e,a.postcssVersion=new Processor22().version,a}let a;return Object.defineProperty(i,`postcss`,{get(){return a||=i(),a}}),i.process=function(e,t,r){return postcss([i(r)]).process(e,t)},i},postcss.stringify=stringify,postcss.parse=parse,postcss.fromJSON=fromJSON,postcss.list=list,postcss.comment=e=>new Comment22(e),postcss.atRule=e=>new AtRule22(e),postcss.decl=e=>new Declaration22(e),postcss.rule=e=>new Rule22(e),postcss.root=e=>new Root22(e),postcss.document=e=>new Document222(e),postcss.CssSyntaxError=CssSyntaxError22,postcss.Declaration=Declaration22,postcss.Container=Container22,postcss.Processor=Processor22,postcss.Document=Document222,postcss.Comment=Comment22,postcss.Warning=Warning22,postcss.AtRule=AtRule22,postcss.Result=Result22,postcss.Input=Input22,postcss.Rule=Rule22,postcss.Root=Root22,postcss.Node=Node22,LazyResult22.registerPostcss(postcss),postcss_1=postcss,postcss.default=postcss,postcss$1=getDefaultExportFromCjs(postcss_1),postcss$1.stringify,postcss$1.fromJSON,postcss$1.plugin,postcss$1.parse,postcss$1.list,postcss$1.document,postcss$1.comment,postcss$1.atRule,postcss$1.rule,postcss$1.decl,postcss$1.root,postcss$1.CssSyntaxError,postcss$1.Declaration,postcss$1.Container,postcss$1.Processor,postcss$1.Document,postcss$1.Comment,postcss$1.Warning,postcss$1.AtRule,postcss$1.Result,postcss$1.Input,postcss$1.Rule,postcss$1.Root,postcss$1.Node,BaseRRNode=class e{constructor(...e){__publicField2(this,`parentElement`,null),__publicField2(this,`parentNode`,null),__publicField2(this,`ownerDocument`),__publicField2(this,`firstChild`,null),__publicField2(this,`lastChild`,null),__publicField2(this,`previousSibling`,null),__publicField2(this,`nextSibling`,null),__publicField2(this,`ELEMENT_NODE`,1),__publicField2(this,`TEXT_NODE`,3),__publicField2(this,`nodeType`),__publicField2(this,`nodeName`),__publicField2(this,`RRNodeType`)}get childNodes(){let e=[],t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(t){if(!(t instanceof e)||t.ownerDocument!==this.ownerDocument)return!1;if(t===this)return!0;for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}appendChild(e){throw Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.`)}insertBefore(e,t){throw Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.`)}removeChild(e){throw Error(`RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.`)}toString(){return`RRNode`}},testableAccessors={Node:[`childNodes`,`parentNode`,`parentElement`,`textContent`],ShadowRoot:[`host`,`styleSheets`],Element:[`shadowRoot`,`querySelector`,`querySelectorAll`],MutationObserver:[]},testableMethods={Node:[`contains`,`getRootNode`],ShadowRoot:[`getSelection`],Element:[],MutationObserver:[`constructor`]},untaintedBasePrototype={},isAngularZonePresent=()=>!!globalThis.Zone,untaintedAccessorCache={},untaintedMethodCache={},index={childNodes,parentNode,parentElement,textContent,contains,getRootNode,host,styleSheets,shadowRoot,querySelector,querySelectorAll,mutationObserver:mutationObserverCtor},DEPARTED_MIRROR_ACCESS_WARNING=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,_mirror={map:{},getId(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),-1},getNode(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),null},removeNodeFromMap(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)},has(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),!1},reset(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)}},typeof window<`u`&&window.Proxy&&window.Reflect&&(_mirror=new Proxy(_mirror,{get(e,t,r){return t===`map`&&console.error(DEPARTED_MIRROR_ACCESS_WARNING),Reflect.get(e,t,r)}})),nowTimestamp=Date.now,/[1-9][0-9]{12}/.test(Date.now().toString())||(nowTimestamp=()=>new Date().getTime()),StyleSheetMirror=class{constructor(){__publicField(this,`id`,1),__publicField(this,`styleIDMap`,new WeakMap),__publicField(this,`idStyleMap`,new Map)}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let r;return r=t===void 0?this.id++:t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}},EventType=(e=>(e[e.DomContentLoaded=0]=`DomContentLoaded`,e[e.Load=1]=`Load`,e[e.FullSnapshot=2]=`FullSnapshot`,e[e.IncrementalSnapshot=3]=`IncrementalSnapshot`,e[e.Meta=4]=`Meta`,e[e.Custom=5]=`Custom`,e[e.Plugin=6]=`Plugin`,e))(EventType||{}),IncrementalSource=(e=>(e[e.Mutation=0]=`Mutation`,e[e.MouseMove=1]=`MouseMove`,e[e.MouseInteraction=2]=`MouseInteraction`,e[e.Scroll=3]=`Scroll`,e[e.ViewportResize=4]=`ViewportResize`,e[e.Input=5]=`Input`,e[e.TouchMove=6]=`TouchMove`,e[e.MediaInteraction=7]=`MediaInteraction`,e[e.StyleSheetRule=8]=`StyleSheetRule`,e[e.CanvasMutation=9]=`CanvasMutation`,e[e.Font=10]=`Font`,e[e.Log=11]=`Log`,e[e.Drag=12]=`Drag`,e[e.StyleDeclaration=13]=`StyleDeclaration`,e[e.Selection=14]=`Selection`,e[e.AdoptedStyleSheet=15]=`AdoptedStyleSheet`,e[e.CustomElement=16]=`CustomElement`,e))(IncrementalSource||{}),MouseInteractions=(e=>(e[e.MouseUp=0]=`MouseUp`,e[e.MouseDown=1]=`MouseDown`,e[e.Click=2]=`Click`,e[e.ContextMenu=3]=`ContextMenu`,e[e.DblClick=4]=`DblClick`,e[e.Focus=5]=`Focus`,e[e.Blur=6]=`Blur`,e[e.TouchStart=7]=`TouchStart`,e[e.TouchMove_Departed=8]=`TouchMove_Departed`,e[e.TouchEnd=9]=`TouchEnd`,e[e.TouchCancel=10]=`TouchCancel`,e))(MouseInteractions||{}),PointerTypes=(e=>(e[e.Mouse=0]=`Mouse`,e[e.Pen=1]=`Pen`,e[e.Touch=2]=`Touch`,e))(PointerTypes||{}),CanvasContext=(e=>(e[e[`2D`]=0]=`2D`,e[e.WebGL=1]=`WebGL`,e[e.WebGL2=2]=`WebGL2`,e))(CanvasContext||{}),MediaInteractions=(e=>(e[e.Play=0]=`Play`,e[e.Pause=1]=`Pause`,e[e.Seeked=2]=`Seeked`,e[e.VolumeChange=3]=`VolumeChange`,e[e.RateChange=4]=`RateChange`,e))(MediaInteractions||{}),NodeType=(e=>(e[e.Document=0]=`Document`,e[e.DocumentType=1]=`DocumentType`,e[e.Element=2]=`Element`,e[e.Text=3]=`Text`,e[e.CDATA=4]=`CDATA`,e[e.Comment=5]=`Comment`,e))(NodeType||{}),DoubleLinkedList=class{constructor(){__publicField(this,`length`,0),__publicField(this,`head`,null),__publicField(this,`tail`,null)}get(e){if(e>=this.length)throw Error(`Position outside of list range`);let t=this.head;for(let r=0;r<e;r++)t=t?.next||null;return t}addNode(e){let t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&isNodeInLinkedList(e.previousSibling)){let r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&isNodeInLinkedList(e.nextSibling)&&e.nextSibling.__ln.previous){let r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;t.next===null&&(this.tail=t),this.length++}removeNode(e){let t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}},moveKey=(e,t)=>`${e}@${t}`,MutationBuffer=class{constructor(){__publicField(this,`frozen`,!1),__publicField(this,`locked`,!1),__publicField(this,`texts`,[]),__publicField(this,`attributes`,[]),__publicField(this,`attributeMap`,new WeakMap),__publicField(this,`removes`,[]),__publicField(this,`mapRemoves`,[]),__publicField(this,`movedMap`,{}),__publicField(this,`addedSet`,new Set),__publicField(this,`movedSet`,new Set),__publicField(this,`droppedSet`,new Set),__publicField(this,`removesSubTreeCache`,new Set),__publicField(this,`mutationCb`),__publicField(this,`blockClass`),__publicField(this,`blockSelector`),__publicField(this,`maskTextClass`),__publicField(this,`maskTextSelector`),__publicField(this,`inlineStylesheet`),__publicField(this,`maskInputOptions`),__publicField(this,`maskTextFn`),__publicField(this,`maskInputFn`),__publicField(this,`keepIframeSrcFn`),__publicField(this,`recordCanvas`),__publicField(this,`inlineImages`),__publicField(this,`slimDOMOptions`),__publicField(this,`dataURLOptions`),__publicField(this,`doc`),__publicField(this,`mirror`),__publicField(this,`iframeManager`),__publicField(this,`stylesheetManager`),__publicField(this,`shadowDomManager`),__publicField(this,`canvasManager`),__publicField(this,`processedNodeManager`),__publicField(this,`unattachedDoc`),__publicField(this,`processMutations`,e=>{e.forEach(this.processMutation),this.emit()}),__publicField(this,`emit`,()=>{if(this.frozen||this.locked)return;let e=[],t=new Set,r=new DoubleLinkedList,i=e=>{let t=e,r=IGNORED_NODE;for(;r===IGNORED_NODE;)t&&=t.nextSibling,r=t&&this.mirror.getId(t);return r},a=a=>{let o=index.parentNode(a);if(!o||!inDom(a))return;let s=!1;if(a.nodeType===Node.TEXT_NODE){let e=o.tagName;if(e===`TEXTAREA`)return;e===`STYLE`&&this.addedSet.has(o)&&(s=!0)}let c=isShadowRoot(o)?this.mirror.getId(getShadowHost(a)):this.mirror.getId(o),l=i(a);if(c===-1||l===-1)return r.addNode(a);let u=serializeNodeWithId(a,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{isSerializedIframe(e,this.mirror)&&this.iframeManager.addIframe(e),isSerializedStylesheet(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),hasShadowRoot(a)&&this.shadowDomManager.addShadowRoot(index.shadowRoot(a),this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)},cssCaptured:s});u&&(e.push({parentId:c,nextId:l,node:u}),t.add(u.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let e of this.movedSet)isParentRemoved(this.removesSubTreeCache,e,this.mirror)&&!this.movedSet.has(index.parentNode(e))||a(e);for(let e of this.addedSet)!isAncestorInSet(this.droppedSet,e)&&!isParentRemoved(this.removesSubTreeCache,e,this.mirror)||isAncestorInSet(this.movedSet,e)?a(e):this.droppedSet.add(e);let o=null;for(;r.length;){let e=null;if(o){let t=this.mirror.getId(index.parentNode(o.value)),r=i(o.value);t!==-1&&r!==-1&&(e=o)}if(!e){let t=r.tail;for(;t;){let r=t;if(t=t.previous,r){let t=this.mirror.getId(index.parentNode(r.value));if(i(r.value)===-1)continue;if(t!==-1){e=r;break}else{let t=r.value,i=index.parentNode(t);if(i&&i.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let t=index.host(i);if(this.mirror.getId(t)!==-1){e=r;break}}}}}}if(!e){for(;r.head;)r.removeNode(r.head.value);break}o=e.previous,r.removeNode(e.value),a(e.value)}let s={texts:this.texts.map(e=>{let t=e.node,r=index.parentNode(t);return r&&r.tagName===`TEXTAREA`&&this.genTextAreaValueMutation(r),{id:this.mirror.getId(t),value:e.value}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),attributes:this.attributes.map(e=>{let{attributes:t}=e;if(typeof t.style==`string`){let r=JSON.stringify(e.styleDiff),i=JSON.stringify(e._unchangedStyles);r.length<t.style.length&&(r+i).split(`var(`).length===t.style.split(`var(`).length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),removes:this.removes,adds:e};!s.texts.length&&!s.attributes.length&&!s.removes.length&&!s.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.removesSubTreeCache=new Set,this.movedMap={},this.mutationCb(s))}),__publicField(this,`genTextAreaValueMutation`,e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t)),t.attributes.value=Array.from(index.childNodes(e),e=>index.textContent(e)||``).join(``)}),__publicField(this,`processMutation`,e=>{if(!isIgnored(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case`characterData`:{let t=index.textContent(e.target);!isBlocked(e.target,this.blockClass,this.blockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:needMaskingText(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,closestElementOfNode(e.target)):t.replace(/[\S]/g,`*`):t,node:e.target});break}case`attributes`:{let t=e.target,r=e.attributeName,i=e.target.getAttribute(r);if(r===`value`){let e=getInputType(t);i=maskInputValue({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:e,value:i,maskInputFn:this.maskInputFn})}if(isBlocked(e.target,this.blockClass,this.blockSelector,!1)||i===e.oldValue)return;let a=this.attributeMap.get(e.target);if(t.tagName===`IFRAME`&&r===`src`&&!this.keepIframeSrcFn(i))if(!t.contentDocument)r=`rr_src`;else return;if(a||(a={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(a),this.attributeMap.set(e.target,a)),r===`type`&&t.tagName===`INPUT`&&(e.oldValue||``).toLowerCase()===`password`&&t.setAttribute(`data-rr-is-password`,`true`),!ignoreAttribute(t.tagName,r))if(a.attributes[r]=transformAttribute(this.doc,toLowerCase(t.tagName),toLowerCase(r),i),r===`style`){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let r=this.unattachedDoc.createElement(`span`);e.oldValue&&r.setAttribute(`style`,e.oldValue);for(let e of Array.from(t.style)){let i=t.style.getPropertyValue(e),o=t.style.getPropertyPriority(e);i!==r.style.getPropertyValue(e)||o!==r.style.getPropertyPriority(e)?o===``?a.styleDiff[e]=i:a.styleDiff[e]=[i,o]:a._unchangedStyles[e]=[i,o]}for(let e of Array.from(r.style))t.style.getPropertyValue(e)===``&&(a.styleDiff[e]=!1)}else r===`open`&&t.tagName===`DIALOG`&&(t.matches(`dialog:modal`)?a.attributes.rr_open_mode=`modal`:a.attributes.rr_open_mode=`non-modal`);break}case`childList`:if(isBlocked(e.target,this.blockClass,this.blockSelector,!0))return;if(e.target.tagName===`TEXTAREA`){this.genTextAreaValueMutation(e.target);return}e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{let r=this.mirror.getId(t),i=isShadowRoot(e.target)?this.mirror.getId(index.host(e.target)):this.mirror.getId(e.target);isBlocked(e.target,this.blockClass,this.blockSelector,!1)||isIgnored(t,this.mirror,this.slimDOMOptions)||!isSerialized(t,this.mirror)||(this.addedSet.has(t)?(deepDelete(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&r===-1||isAncestorRemoved(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[moveKey(r,i)]?deepDelete(this.movedSet,t):(this.removes.push({parentId:i,id:r,isShadow:isShadowRoot(e.target)&&isNativeShadowDom(e.target)?!0:void 0}),processRemoves(t,this.removesSubTreeCache))),this.mapRemoves.push(t))});break}}),__publicField(this,`genAdds`,(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(isIgnored(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let r=null;t&&this.mirror.hasNode(t)&&(r=this.mirror.getId(t)),r&&r!==-1&&(this.movedMap[moveKey(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);isBlocked(e,this.blockClass,this.blockSelector,!1)||(index.childNodes(e).forEach(e=>this.genAdds(e)),hasShadowRoot(e)&&index.childNodes(index.shadowRoot(e)).forEach(t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)}))}})}init(e){[`mutationCb`,`blockClass`,`blockSelector`,`maskTextClass`,`maskTextSelector`,`inlineStylesheet`,`maskInputOptions`,`maskTextFn`,`maskInputFn`,`keepIframeSrcFn`,`recordCanvas`,`inlineImages`,`slimDOMOptions`,`dataURLOptions`,`doc`,`mirror`,`iframeManager`,`stylesheetManager`,`shadowDomManager`,`canvasManager`,`processedNodeManager`].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}},callbackWrapper=e=>errorHandler?(...t)=>{try{return e(...t)}catch(e){if(errorHandler&&errorHandler(e)===!0)return;throw e}}:e,mutationBuffers=[],INPUT_TAGS=[`INPUT`,`TEXTAREA`,`SELECT`],lastInputValueMap=new WeakMap,CrossOriginIframeMirror=class{constructor(e){__publicField(this,`iframeIdToRemoteIdMap`,new WeakMap),__publicField(this,`iframeRemoteIdToIdMap`,new WeakMap),this.generateIdFn=e}getId(e,t,r,i){let a=r||this.getIdToRemoteIdMap(e),o=i||this.getRemoteIdToIdMap(e),s=a.get(t);return s||(s=this.generateIdFn(),a.set(t,s),o.set(s,t)),s}getIds(e,t){let r=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map(t=>this.getId(e,t,r,i))}getRemoteId(e,t,r){let i=r||this.getRemoteIdToIdMap(e);return typeof t==`number`?i.get(t)||-1:t}getRemoteIds(e,t){let r=this.getRemoteIdToIdMap(e);return t.map(t=>this.getRemoteId(e,t,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}},IframeManager=class{constructor(e){__publicField(this,`iframes`,new WeakMap),__publicField(this,`crossOriginIframeMap`,new WeakMap),__publicField(this,`crossOriginIframeMirror`,new CrossOriginIframeMirror(genId)),__publicField(this,`crossOriginIframeStyleMirror`),__publicField(this,`crossOriginIframeRootIdMap`,new WeakMap),__publicField(this,`mirror`),__publicField(this,`mutationCb`),__publicField(this,`wrappedEmit`),__publicField(this,`loadListener`),__publicField(this,`stylesheetManager`),__publicField(this,`recordCrossOriginIframes`),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener(`message`,this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var r,i;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((r=e.contentWindow)==null||r.addEventListener(`message`,this.handleMessage.bind(this))),(i=this.loadListener)==null||i.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){let t=e;if(t.data.type!==`rrweb`||t.origin!==t.data.origin||!e.source)return;let r=this.crossOriginIframeMap.get(e.source);if(!r)return;let i=this.transformCrossOriginEvent(r,t.data.event);i&&this.wrappedEmit(i,t.data.isCheckout)}transformCrossOriginEvent(e,t){var r;switch(t.type){case EventType.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);let r=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(t.data.node,r),{timestamp:t.timestamp,type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case EventType.Meta:case EventType.Load:case EventType.DomContentLoaded:return!1;case EventType.Plugin:return t;case EventType.Custom:return this.replaceIds(t.data.payload,e,[`id`,`parentId`,`previousId`,`nextId`]),t;case EventType.IncrementalSnapshot:switch(t.data.source){case IncrementalSource.Mutation:return t.data.adds.forEach(t=>{this.replaceIds(t,e,[`parentId`,`nextId`,`previousId`]),this.replaceIdOnNode(t.node,e);let r=this.crossOriginIframeRootIdMap.get(e);r&&this.patchRootIdOnNode(t.node,r)}),t.data.removes.forEach(t=>{this.replaceIds(t,e,[`parentId`,`id`])}),t.data.attributes.forEach(t=>{this.replaceIds(t,e,[`id`])}),t.data.texts.forEach(t=>{this.replaceIds(t,e,[`id`])}),t;case IncrementalSource.Drag:case IncrementalSource.TouchMove:case IncrementalSource.MouseMove:return t.data.positions.forEach(t=>{this.replaceIds(t,e,[`id`])}),t;case IncrementalSource.ViewportResize:return!1;case IncrementalSource.MediaInteraction:case IncrementalSource.MouseInteraction:case IncrementalSource.Scroll:case IncrementalSource.CanvasMutation:case IncrementalSource.Input:return this.replaceIds(t.data,e,[`id`]),t;case IncrementalSource.StyleSheetRule:case IncrementalSource.StyleDeclaration:return this.replaceIds(t.data,e,[`id`]),this.replaceStyleIds(t.data,e,[`styleId`]),t;case IncrementalSource.Font:return t;case IncrementalSource.Selection:return t.data.ranges.forEach(t=>{this.replaceIds(t,e,[`start`,`end`])}),t;case IncrementalSource.AdoptedStyleSheet:return this.replaceIds(t.data,e,[`id`]),this.replaceStyleIds(t.data,e,[`styleIds`]),(r=t.data.styles)==null||r.forEach(t=>{this.replaceStyleIds(t,e,[`styleId`])}),t}}return!1}replace(e,t,r,i){for(let a of i)!Array.isArray(t[a])&&typeof t[a]!=`number`||(Array.isArray(t[a])?t[a]=e.getIds(r,t[a]):t[a]=e.getId(r,t[a]));return t}replaceIds(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)}replaceStyleIds(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)}replaceIdOnNode(e,t){this.replaceIds(e,t,[`id`,`rootId`]),`childNodes`in e&&e.childNodes.forEach(e=>{this.replaceIdOnNode(e,t)})}patchRootIdOnNode(e,t){e.type!==NodeType.Document&&!e.rootId&&(e.rootId=t),`childNodes`in e&&e.childNodes.forEach(e=>{this.patchRootIdOnNode(e,t)})}},ShadowDomManager=class{constructor(e){__publicField(this,`shadowDoms`,new WeakSet),__publicField(this,`mutationCb`),__publicField(this,`scrollCb`),__publicField(this,`bypassOptions`),__publicField(this,`mirror`),__publicField(this,`restoreHandlers`,[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!isNativeShadowDom(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);let r=initMutationObserver({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(initScrollObserver({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(index.host(e))),this.restoreHandlers.push(initAdoptedStyleSheetObserver({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){let r=this;this.restoreHandlers.push(patch(e.prototype,`attachShadow`,function(e){return function(i){let a=e.call(this,i),o=index.shadowRoot(this);return o&&inDom(this)&&r.addShadowRoot(o,t),a}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}},chars=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,lookup=typeof Uint8Array>`u`?[]:new Uint8Array(256),i$1=0;i$1<chars.length;i$1++)lookup[chars.charCodeAt(i$1)]=i$1;encode=function(e){var t=new Uint8Array(e),r,i=t.length,a=``;for(r=0;r<i;r+=3)a+=chars[t[r]>>2],a+=chars[(t[r]&3)<<4|t[r+1]>>4],a+=chars[(t[r+1]&15)<<2|t[r+2]>>6],a+=chars[t[r+2]&63];return i%3==2?a=a.substring(0,a.length-1)+`=`:i%3==1&&(a=a.substring(0,a.length-2)+`==`),a},canvasVarMap=new Map,saveWebGLVar=(e,t,r)=>{if(!e||!(isInstanceOfWebGLObject(e,t)||typeof e==`object`))return;let i=e.constructor.name,a=variableListFor$1(r,i),o=a.indexOf(e);return o===-1&&(o=a.length,a.push(e)),o},serializeArgs=(e,t,r)=>e.map(e=>serializeArg(e,t,r)),isInstanceOfWebGLObject=(e,t)=>!![`WebGLActiveInfo`,`WebGLBuffer`,`WebGLFramebuffer`,`WebGLProgram`,`WebGLRenderbuffer`,`WebGLShader`,`WebGLShaderPrecisionFormat`,`WebGLTexture`,`WebGLUniformLocation`,`WebGLVertexArrayObject`,`WebGLVertexArrayObjectOES`].filter(e=>typeof t[e]==`function`).find(r=>e instanceof t[r]),encodedJs=`KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=`,decodeBase64=e=>Uint8Array.from(atob(e),e=>e.charCodeAt(0)),blob=typeof window<`u`&&window.Blob&&new Blob([decodeBase64(encodedJs)],{type:`text/javascript;charset=utf-8`}),CanvasManager=class{constructor(e){__publicField(this,`pendingCanvasMutations`,new Map),__publicField(this,`rafStamps`,{latestId:0,invokeId:null}),__publicField(this,`mirror`),__publicField(this,`mutationCb`),__publicField(this,`resetObservers`),__publicField(this,`frozen`,!1),__publicField(this,`locked`,!1),__publicField(this,`processMutation`,(e,t)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)});let{sampling:t=`all`,win:r,blockClass:i,blockSelector:a,recordCanvas:o,dataURLOptions:s}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,o&&t===`all`&&this.initCanvasMutationObserver(r,i,a),o&&typeof t==`number`&&this.initCanvasFPSObserver(t,r,i,a,{dataURLOptions:s})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,r,i,a){let o=initCanvasContextObserver(t,r,i,!0),s=new Map,c=new WorkerWrapper;c.onmessage=e=>{let{id:t}=e.data;if(s.set(t,!1),!(`base64`in e.data))return;let{base64:r,type:i,width:a,height:o}=e.data;this.mutationCb({id:t,type:CanvasContext[`2D`],commands:[{property:`clearRect`,args:[0,0,a,o]},{property:`drawImage`,args:[{rr_type:`ImageBitmap`,args:[{rr_type:`Blob`,data:[{rr_type:`ArrayBuffer`,base64:r}],type:i}]},0,0]}]})};let l=1e3/e,u=0,d,f=()=>{let e=[];return t.document.querySelectorAll(`canvas`).forEach(t=>{isBlocked(t,r,i,!0)||e.push(t)}),e},p=e=>{if(u&&e-u<l){d=requestAnimationFrame(p);return}u=e,f().forEach(async e=>{var t;let r=this.mirror.getId(e);if(s.get(r)||e.width===0||e.height===0)return;if(s.set(r,!0),[`webgl`,`webgl2`].includes(e.__context)){let t=e.getContext(e.__context);t?.getContextAttributes()?.preserveDrawingBuffer===!1&&t.clear(t.COLOR_BUFFER_BIT)}let i=await createImageBitmap(e);c.postMessage({id:r,bitmap:i,width:e.width,height:e.height,dataURLOptions:a.dataURLOptions},[i])}),d=requestAnimationFrame(p)};d=requestAnimationFrame(p),this.resetObservers=()=>{o(),cancelAnimationFrame(d)}}initCanvasMutationObserver(e,t,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let i=initCanvasContextObserver(e,t,r,!1),a=initCanvas2DMutationObserver(this.processMutation.bind(this),e,t,r),o=initCanvasWebGLMutationObserver(this.processMutation.bind(this),e,t,r);this.resetObservers=()=>{i(),a(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{let r=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,r)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;let r=this.pendingCanvasMutations.get(e);if(!r||t===-1)return;let i=r.map(e=>{let{type:t,...r}=e;return r}),{type:a}=r[0];this.mutationCb({id:t,type:a,commands:i}),this.pendingCanvasMutations.delete(e)}},StylesheetManager=class{constructor(e){__publicField(this,`trackedLinkElements`,new WeakSet),__publicField(this,`mutationCb`),__publicField(this,`adoptedStyleSheetCb`),__publicField(this,`styleMirror`,new StyleSheetMirror),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){`_cssText`in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(e.length===0)return;let r={id:t,styleIds:[]},i=[];for(let t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),i.push({styleId:e,rules:Array.from(t.rules||CSSRule,(e,r)=>({rule:stringifyRule(e,t.href),index:r}))})),r.styleIds.push(e)}i.length>0&&(r.styles=i),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}},ProcessedNodeManager=class{constructor(){__publicField(this,`nodeMap`,new WeakMap),__publicField(this,`active`,!1)}inOtherBuffer(e,t){let r=this.nodeMap.get(e);return r&&Array.from(r).some(e=>e!==t)}add(e,t){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}},recording=!1;try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement(`iframe`);document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug(`Unable to override Array.from`,e)}mirror=createMirror$2(),record.addCustomEvent=(e,t)=>{if(!recording)throw Error(`please add custom event after start recording`);wrappedEmit({type:EventType.Custom,data:{tag:e,payload:t}})},record.freezePage=()=>{mutationBuffers.forEach(e=>e.freeze())},record.takeFullSnapshot=e=>{if(!recording)throw Error(`please take full snapshot after start recording`);takeFullSnapshot$1(e)},record.mirror=mirror,(function(e){e[e.NotStarted=0]=`NotStarted`,e[e.Running=1]=`Running`,e[e.Stopped=2]=`Stopped`})(n||={})}));async function loadRecord(){let e=(await Promise.resolve().then(()=>(init_record(),record_exports))).record;if(!e)throw Error(`rrweb record not available / rrweb record를 찾을 수 없음`);return e}function initRrwebRecorder(e){let{transport:t,recordOptions:r,flushIntervalMs:i=2e3,maxBatchSize:a=50,onError:o,sessionId:s=`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,kind:c=`rrweb`}=e,l=null,u=createEventBuffer(a),d=null,f=!1,p=!1,m={sessionId:s,kind:c},h=async()=>{if(p||u.size()===0)return;p=!0;let e=u.drain();try{await t.send({...m,events:e})}catch(e){o?.(e)}finally{p=!1}},g=async()=>{if(f)return;l=(await loadRecord())({...r,emit(e){u.push(e)&&h()}}),f=!0;let e=()=>{d=setTimeout(()=>{h().finally(()=>{f&&e()})},i)};e()};return{start:g,stop:()=>{f&&(l?.(),l=null,f=!1,d&&=(clearTimeout(d),null),u.clear(),p=!1)},pause:()=>{f&&(l?.(),l=null,f=!1,d&&=(clearTimeout(d),null),h())},resume:async()=>{f||await g()},flush:h,isRecording(){return f},getSessionId(){return s}}}function createDefaultCDPTransport(e){return createCDPTransport(e)}var init_src=__esmMin((()=>{init_buffer(),init_cdp()})),rrweb_init_exports=__exportAll({initRrwebRecording:()=>initRrwebRecording});async function initRrwebRecording(e,t,r){if(!t.enable)return null;try{r.execute({method:`SessionReplay.enable`});let i=t.recordOptions??{},a=initRrwebRecorder({transport:createDefaultCDPTransport({executeCDP:(e,t)=>{let i=r.execute({method:e,params:t});return i instanceof Promise?{error:{message:`Async method not supported in executeCDP`}}:{result:i.result,error:i.error}}}),flushIntervalMs:t.flushIntervalMs,maxBatchSize:t.maxBatchSize,recordOptions:{checkoutEveryNth:200,checkoutEveryNms:5e3,recordCanvas:!1,inlineStylesheet:!1,blockClass:`rr-block`,blockSelector:`script, meta[http-equiv="refresh"], iframe`,ignoreClass:`rr-ignore`,maskAllInputs:!0,...i},kind:`rrweb`,onError:e=>{console.warn(`rrweb recorder error / rrweb 레코더 오류:`,e)}});return await a.start(),e&&e.addEventListener(`close`,()=>{a.stop()}),a}catch(e){return console.error(`Failed to start rrweb recorder / rrweb 레코더 시작 실패:`,e),null}}var init_rrweb_init=__esmMin((()=>{init_src()})),CDPClient=class{domain=null;rrwebRecorder=null;websocketClient=null;postMessageHandler=null;async initialize(e,t={enable:!1},r=!1){this.websocketClient=new WebSocketClient(e,t,r,e=>{this.domain=e,this.postMessageHandler&&this.postMessageHandler.setDomain(e)},async(e,r)=>{if(t.enable)try{let{initRrwebRecording:i}=await Promise.resolve().then(()=>(init_rrweb_init(),rrweb_init_exports));this.rrwebRecorder=await i(e,t,r)}catch(e){console.error(`Failed to load rrweb initialization / rrweb 초기화 로드 실패:`,e)}}),await this.websocketClient.initialize(),this.domain=this.websocketClient.getDomain(),this.postMessageHandler=new PostMessageHandler(this.domain),keepScreenDisplay()}getDomain(){return this.domain}getRrwebRecorder(){return this.rrwebRecorder}getWebSocketClient(){return this.websocketClient}getPostMessageHandler(){return this.postMessageHandler}destroy(){this.websocketClient&&=(this.websocketClient.cleanup(),null),this.postMessageHandler&&=(this.postMessageHandler.destroy(),null),this.rrwebRecorder&&=(this.rrwebRecorder.stop(),null),this.domain=null}};let clientInstance=null;async function initCDPClient(e,t={enable:!1},r=!1){clientInstance&&clientInstance.destroy(),clientInstance=new CDPClient,await clientInstance.initialize(e,t,r)}async function init(e={}){let{serverUrl:t,rrweb:r={enable:!1},skipWebSocket:i=!1}=e,a=t||``,o=i||!t;if(typeof window<`u`){let e=getId();if(o&&window.parent!==window){try{window.parent.postMessage({type:`SET_DEBUG_ID`,debugId:e},`*`)}catch{}try{localStorage.setItem(`debug_id`,e)}catch{}}}await initCDPClient(a,r,o)}async function exportEvents(){if(!clientInstance)throw Error(`CDP client not initialized / CDP 클라이언트가 초기화되지 않았습니다`);let e=clientInstance.getDomain();if(!e)throw Error(`CDP domain not available / CDP 도메인을 사용할 수 없습니다`);let t=e.getEventStorage();if(!t)throw Error(`Event storage not available / 이벤트 저장소를 사용할 수 없습니다`);await t.exportToFile()}return typeof window<`u`&&(window.ChromeRemoteDevTools={init,exportEvents}),exports.exportEvents=exportEvents,exports.init=init,exports.initCDPClient=initCDPClient,exports})({});
//# sourceMappingURL=index.iife.js.map
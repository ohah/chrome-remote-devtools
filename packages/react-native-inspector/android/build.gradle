buildscript {
  repositories {
    google()
    mavenCentral()
  }
  dependencies {
    classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:2.1.20")
  }
}

apply plugin: 'com.android.library'
apply plugin: 'org.jetbrains.kotlin.android'
apply plugin: 'com.facebook.react'

android {
  compileSdkVersion 36
  buildToolsVersion "36.0.0"

  namespace "com.ohah.chromeremotedevtools"

  defaultConfig {
    minSdkVersion 24
    targetSdkVersion 36

    externalNativeBuild {
      cmake {
        arguments "-DANDROID_STL=c++_shared"
      }
    }

    ndk {
      abiFilters "armeabi-v7a", "arm64-v8a", "x86", "x86_64"
    }
  }

  compileOptions {
    sourceCompatibility JavaVersion.VERSION_17
    targetCompatibility JavaVersion.VERSION_17
  }

  kotlinOptions {
    jvmTarget = "17"
  }

  externalNativeBuild {
    cmake {
      path "src/main/cpp/CMakeLists.txt"
    }
  }
}

repositories {
  google()
  mavenCentral()
  maven {
    // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm
    // React Native(JS, Obj-C 소스, Android 바이너리)는 모두 npm에서 설치됩니다
    url("$rootDir/../node_modules/react-native/android")
  }
  maven {
    // Android JSC is installed from npm
    // Android JSC는 npm에서 설치됩니다
    url("$rootDir/../node_modules/jsc-android/dist")
  }
}

dependencies {
  implementation("com.facebook.react:react-android")
  implementation("com.facebook.react:react-native")
  implementation("com.squareup.okhttp3:okhttp:4.12.0") // WebSocket support / WebSocket 지원
}

